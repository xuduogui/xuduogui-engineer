'use strict';function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableRest();}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}var assert=require('assert');var events=require('events');var os=require('os');var tty=require('tty');var util=require('util');var fs=require('fs');var path=require('path');var cluster$1=require('cluster');var constants=require('constants');var stream$1=require('stream');var zlib=require('zlib');var child_process=require('child_process');var buffer$2=require('buffer');function _interopDefaultLegacy(e){return e&&_typeof(e)==='object'&&'default'in e?e:{'default':e};}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function get(){return e[k];}});}});}n["default"]=e;return Object.freeze(n);}var assert__default=/*#__PURE__*/_interopDefaultLegacy(assert);var events__default=/*#__PURE__*/_interopDefaultLegacy(events);var os__default=/*#__PURE__*/_interopDefaultLegacy(os);var tty__default=/*#__PURE__*/_interopDefaultLegacy(tty);var util__default=/*#__PURE__*/_interopDefaultLegacy(util);var fs__default=/*#__PURE__*/_interopDefaultLegacy(fs);var path__default=/*#__PURE__*/_interopDefaultLegacy(path);var path__namespace=/*#__PURE__*/_interopNamespace(path);var cluster__default=/*#__PURE__*/_interopDefaultLegacy(cluster$1);var constants__default=/*#__PURE__*/_interopDefaultLegacy(constants);var stream__default=/*#__PURE__*/_interopDefaultLegacy(stream$1);var zlib__default=/*#__PURE__*/_interopDefaultLegacy(zlib);var child_process__default=/*#__PURE__*/_interopDefaultLegacy(child_process);var buffer__default=/*#__PURE__*/_interopDefaultLegacy(buffer$2);var pMap=function pMap(iterable,mapper,options){return new Promise(function(resolve,reject){options=Object.assign({concurrency:Infinity},options);if(typeof mapper!=='function'){throw new TypeError('Mapper function is required');}var _options=options,concurrency=_options.concurrency;if(!(typeof concurrency==='number'&&concurrency>=1)){throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(concurrency,"` (").concat(_typeof(concurrency),")"));}var ret=[];var iterator=iterable[Symbol.iterator]();var isRejected=false;var isIterableDone=false;var resolvingCount=0;var currentIndex=0;var next=function next(){if(isRejected){return;}var nextItem=iterator.next();var i=currentIndex;currentIndex++;if(nextItem.done){isIterableDone=true;if(resolvingCount===0){resolve(ret);}return;}resolvingCount++;Promise.resolve(nextItem.value).then(function(element){return mapper(element,i);}).then(function(value){ret[i]=value;resolvingCount--;next();},function(error){isRejected=true;reject(error);});};for(var i=0;i<concurrency;i++){next();if(isIterableDone){break;}}});};var pMap_1=pMap;// TODO: Remove this for the next major release
var default_1$4=pMap;pMap_1["default"]=default_1$4;var isPromise_1=isPromise$1;var default_1$3=isPromise$1;function isPromise$1(obj){return!!obj&&(_typeof(obj)==='object'||typeof obj==='function')&&typeof obj.then==='function';}isPromise_1["default"]=default_1$3;var commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function commonjsRequire(){throw new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');}function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,'default')?x['default']:x;}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports;}var REGISTRATION_KEY=Symbol('@@any-observable/REGISTRATION');var registered=null;var loader=function loader(global,loadImplementation){return function(implementation,opts){opts=opts||{};// global registration unless explicitly  {global: false} in options (default true)
var registerGlobal=opts.global!==false;// Load any previous global registration
if(registerGlobal&&!registered){registered=global[REGISTRATION_KEY];}if(registered&&implementation&&registered.implementation!==implementation){throw new Error("any-observable already defined as \"".concat(registered.implementation,"\". You can only register an implementation before the first call to require('any-observable') and an implementation cannot be changed"));}if(!registered){// Use provided implementation
if(implementation&&opts.Observable){registered={Observable:opts.Observable,implementation:implementation};}else{// Require implementation if implementation is specified but not provided
registered=loadImplementation(implementation||null);}if(registerGlobal){// Register preference globally in case multiple installations
global[REGISTRATION_KEY]=registered;}}return registered;};};var register=loader(commonjsGlobal,loadImplementation);function loadImplementation(implementation){var impl;if(implementation==='global.Observable'){// If no implementation or env specified use global.Observable
impl={Observable:commonjsGlobal.Observable,implementation:'global.Observable'};}else if(implementation){// If implementation specified, require it
var _lib=commonjsRequire();impl={Observable:_lib.Observable||_lib["default"]||_lib,implementation:implementation};}else{// Try to auto detect implementation. This is non-deterministic
// and should prefer other branches, but this is our last chance
// to load something without throwing error
impl=tryAutoDetect();}if(!impl){throw new Error('Cannot find any-observable implementation nor'+' global.Observable. You must install polyfill or call'+' require("any-observable/register") with your preferred'+' implementation, e.g. require("any-observable/register")(\'rxjs\')'+' on application load prior to any require("any-observable").');}return impl;}function tryAutoDetect(){var libs=['rxjs','zen-observable'];for(var _i2=0,_libs=libs;_i2<_libs.length;_i2++){var _lib2=_libs[_i2];try{return loadImplementation(_lib2);}catch(_){}}return null;}var anyObservable=register().Observable;function or(option,alternate,required){var result=option===false?false:option||alternate;if(required&&!result||result&&typeof result!=='string'){throw new TypeError(alternate+'Event must be a string.');}return result;}var streamToObservable=function streamToObservable(stream,opts){opts=opts||{};var complete=false;var dataListeners=[];var awaited=opts["await"];var dataEvent=or(opts.dataEvent,'data',true);var errorEvent=or(opts.errorEvent,'error');var endEvent=or(opts.endEvent,'end');function cleanup(){complete=true;dataListeners.forEach(function(listener){stream.removeListener(dataEvent,listener);});dataListeners=null;}var completion=new Promise(function(resolve,reject){function onEnd(result){if(awaited){awaited.then(resolve);}else{resolve(result);}}if(endEvent){stream.once(endEvent,onEnd);}else if(awaited){onEnd();}if(errorEvent){stream.once(errorEvent,reject);}if(awaited){awaited["catch"](reject);}})["catch"](function(err){cleanup();throw err;}).then(function(result){cleanup();return result;});return new anyObservable(function(observer){completion.then(observer.complete.bind(observer))["catch"](observer.error.bind(observer));if(complete){return null;}var onData=function onData(data){observer.next(data);};stream.on(dataEvent,onData);dataListeners.push(onData);return function(){stream.removeListener(dataEvent,onData);if(complete){return;}var idx=dataListeners.indexOf(onData);if(idx!==-1){dataListeners.splice(idx,1);}};});};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ /* global Reflect, Promise */var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p];}};return _extendStatics(d,b);};function __extends(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}/** PURE_IMPORTS_START  PURE_IMPORTS_END */function isFunction(x){return typeof x==='function';}/** PURE_IMPORTS_START  PURE_IMPORTS_END */var _enable_super_gross_mode_that_will_cause_bad_things=false;var config={Promise:undefined,set useDeprecatedSynchronousErrorHandling(value){if(value){var error=/*@__PURE__*/new Error();/*@__PURE__*/console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n'+error.stack);}_enable_super_gross_mode_that_will_cause_bad_things=value;},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things;}};/** PURE_IMPORTS_START  PURE_IMPORTS_END */function hostReportError(err){setTimeout(function(){throw err;},0);}/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */var empty$2={closed:true,next:function next(value){},error:function error(err){if(config.useDeprecatedSynchronousErrorHandling){throw err;}else{hostReportError(err);}},complete:function complete(){}};/** PURE_IMPORTS_START  PURE_IMPORTS_END */var isArray=/*@__PURE__*/function(){return Array.isArray||function(x){return x&&typeof x.length==='number';};}();/** PURE_IMPORTS_START  PURE_IMPORTS_END */function isObject(x){return x!==null&&_typeof(x)==='object';}/** PURE_IMPORTS_START  PURE_IMPORTS_END */var UnsubscriptionErrorImpl=/*@__PURE__*/function(){function UnsubscriptionErrorImpl(errors){Error.call(this);this.message=errors?errors.length+" errors occurred during unsubscription:\n"+errors.map(function(err,i){return i+1+") "+err.toString();}).join('\n  '):'';this.name='UnsubscriptionError';this.errors=errors;return this;}UnsubscriptionErrorImpl.prototype=/*@__PURE__*/Object.create(Error.prototype);return UnsubscriptionErrorImpl;}();var UnsubscriptionError=UnsubscriptionErrorImpl;/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */var Subscription=/*@__PURE__*/function(){function Subscription(unsubscribe){this.closed=false;this._parentOrParents=null;this._subscriptions=null;if(unsubscribe){this._ctorUnsubscribe=true;this._unsubscribe=unsubscribe;}}Subscription.prototype.unsubscribe=function(){var errors;if(this.closed){return;}var _a=this,_parentOrParents=_a._parentOrParents,_ctorUnsubscribe=_a._ctorUnsubscribe,_unsubscribe=_a._unsubscribe,_subscriptions=_a._subscriptions;this.closed=true;this._parentOrParents=null;this._subscriptions=null;if(_parentOrParents instanceof Subscription){_parentOrParents.remove(this);}else if(_parentOrParents!==null){for(var index=0;index<_parentOrParents.length;++index){var parent_1=_parentOrParents[index];parent_1.remove(this);}}if(isFunction(_unsubscribe)){if(_ctorUnsubscribe){this._unsubscribe=undefined;}try{_unsubscribe.call(this);}catch(e){errors=e instanceof UnsubscriptionError?flattenUnsubscriptionErrors(e.errors):[e];}}if(isArray(_subscriptions)){var index=-1;var len=_subscriptions.length;while(++index<len){var sub=_subscriptions[index];if(isObject(sub)){try{sub.unsubscribe();}catch(e){errors=errors||[];if(e instanceof UnsubscriptionError){errors=errors.concat(flattenUnsubscriptionErrors(e.errors));}else{errors.push(e);}}}}}if(errors){throw new UnsubscriptionError(errors);}};Subscription.prototype.add=function(teardown){var subscription=teardown;if(!teardown){return Subscription.EMPTY;}switch(_typeof(teardown)){case'function':subscription=new Subscription(teardown);case'object':if(subscription===this||subscription.closed||typeof subscription.unsubscribe!=='function'){return subscription;}else if(this.closed){subscription.unsubscribe();return subscription;}else if(!(subscription instanceof Subscription)){var tmp=subscription;subscription=new Subscription();subscription._subscriptions=[tmp];}break;default:{throw new Error('unrecognized teardown '+teardown+' added to Subscription.');}}var _parentOrParents=subscription._parentOrParents;if(_parentOrParents===null){subscription._parentOrParents=this;}else if(_parentOrParents instanceof Subscription){if(_parentOrParents===this){return subscription;}subscription._parentOrParents=[_parentOrParents,this];}else if(_parentOrParents.indexOf(this)===-1){_parentOrParents.push(this);}else{return subscription;}var subscriptions=this._subscriptions;if(subscriptions===null){this._subscriptions=[subscription];}else{subscriptions.push(subscription);}return subscription;};Subscription.prototype.remove=function(subscription){var subscriptions=this._subscriptions;if(subscriptions){var subscriptionIndex=subscriptions.indexOf(subscription);if(subscriptionIndex!==-1){subscriptions.splice(subscriptionIndex,1);}}};Subscription.EMPTY=function(empty){empty.closed=true;return empty;}(new Subscription());return Subscription;}();function flattenUnsubscriptionErrors(errors){return errors.reduce(function(errs,err){return errs.concat(err instanceof UnsubscriptionError?err.errors:err);},[]);}/** PURE_IMPORTS_START  PURE_IMPORTS_END */var rxSubscriber=/*@__PURE__*/function(){return typeof Symbol==='function'?/*@__PURE__*/Symbol('rxSubscriber'):'@@rxSubscriber_'+/*@__PURE__*/Math.random();}();/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */var Subscriber=/*@__PURE__*/function(_super){__extends(Subscriber,_super);function Subscriber(destinationOrNext,error,complete){var _this=_super.call(this)||this;_this.syncErrorValue=null;_this.syncErrorThrown=false;_this.syncErrorThrowable=false;_this.isStopped=false;switch(arguments.length){case 0:_this.destination=empty$2;break;case 1:if(!destinationOrNext){_this.destination=empty$2;break;}if(_typeof(destinationOrNext)==='object'){if(destinationOrNext instanceof Subscriber){_this.syncErrorThrowable=destinationOrNext.syncErrorThrowable;_this.destination=destinationOrNext;destinationOrNext.add(_this);}else{_this.syncErrorThrowable=true;_this.destination=new SafeSubscriber(_this,destinationOrNext);}break;}default:_this.syncErrorThrowable=true;_this.destination=new SafeSubscriber(_this,destinationOrNext,error,complete);break;}return _this;}Subscriber.prototype[rxSubscriber]=function(){return this;};Subscriber.create=function(next,error,complete){var subscriber=new Subscriber(next,error,complete);subscriber.syncErrorThrowable=false;return subscriber;};Subscriber.prototype.next=function(value){if(!this.isStopped){this._next(value);}};Subscriber.prototype.error=function(err){if(!this.isStopped){this.isStopped=true;this._error(err);}};Subscriber.prototype.complete=function(){if(!this.isStopped){this.isStopped=true;this._complete();}};Subscriber.prototype.unsubscribe=function(){if(this.closed){return;}this.isStopped=true;_super.prototype.unsubscribe.call(this);};Subscriber.prototype._next=function(value){this.destination.next(value);};Subscriber.prototype._error=function(err){this.destination.error(err);this.unsubscribe();};Subscriber.prototype._complete=function(){this.destination.complete();this.unsubscribe();};Subscriber.prototype._unsubscribeAndRecycle=function(){var _parentOrParents=this._parentOrParents;this._parentOrParents=null;this.unsubscribe();this.closed=false;this.isStopped=false;this._parentOrParents=_parentOrParents;return this;};return Subscriber;}(Subscription);var SafeSubscriber=/*@__PURE__*/function(_super){__extends(SafeSubscriber,_super);function SafeSubscriber(_parentSubscriber,observerOrNext,error,complete){var _this=_super.call(this)||this;_this._parentSubscriber=_parentSubscriber;var next;var context=_this;if(isFunction(observerOrNext)){next=observerOrNext;}else if(observerOrNext){next=observerOrNext.next;error=observerOrNext.error;complete=observerOrNext.complete;if(observerOrNext!==empty$2){context=Object.create(observerOrNext);if(isFunction(context.unsubscribe)){_this.add(context.unsubscribe.bind(context));}context.unsubscribe=_this.unsubscribe.bind(_this);}}_this._context=context;_this._next=next;_this._error=error;_this._complete=complete;return _this;}SafeSubscriber.prototype.next=function(value){if(!this.isStopped&&this._next){var _parentSubscriber=this._parentSubscriber;if(!config.useDeprecatedSynchronousErrorHandling||!_parentSubscriber.syncErrorThrowable){this.__tryOrUnsub(this._next,value);}else if(this.__tryOrSetError(_parentSubscriber,this._next,value)){this.unsubscribe();}}};SafeSubscriber.prototype.error=function(err){if(!this.isStopped){var _parentSubscriber=this._parentSubscriber;var useDeprecatedSynchronousErrorHandling=config.useDeprecatedSynchronousErrorHandling;if(this._error){if(!useDeprecatedSynchronousErrorHandling||!_parentSubscriber.syncErrorThrowable){this.__tryOrUnsub(this._error,err);this.unsubscribe();}else{this.__tryOrSetError(_parentSubscriber,this._error,err);this.unsubscribe();}}else if(!_parentSubscriber.syncErrorThrowable){this.unsubscribe();if(useDeprecatedSynchronousErrorHandling){throw err;}hostReportError(err);}else{if(useDeprecatedSynchronousErrorHandling){_parentSubscriber.syncErrorValue=err;_parentSubscriber.syncErrorThrown=true;}else{hostReportError(err);}this.unsubscribe();}}};SafeSubscriber.prototype.complete=function(){var _this=this;if(!this.isStopped){var _parentSubscriber=this._parentSubscriber;if(this._complete){var wrappedComplete=function wrappedComplete(){return _this._complete.call(_this._context);};if(!config.useDeprecatedSynchronousErrorHandling||!_parentSubscriber.syncErrorThrowable){this.__tryOrUnsub(wrappedComplete);this.unsubscribe();}else{this.__tryOrSetError(_parentSubscriber,wrappedComplete);this.unsubscribe();}}else{this.unsubscribe();}}};SafeSubscriber.prototype.__tryOrUnsub=function(fn,value){try{fn.call(this._context,value);}catch(err){this.unsubscribe();if(config.useDeprecatedSynchronousErrorHandling){throw err;}else{hostReportError(err);}}};SafeSubscriber.prototype.__tryOrSetError=function(parent,fn,value){if(!config.useDeprecatedSynchronousErrorHandling){throw new Error('bad call');}try{fn.call(this._context,value);}catch(err){if(config.useDeprecatedSynchronousErrorHandling){parent.syncErrorValue=err;parent.syncErrorThrown=true;return true;}else{hostReportError(err);return true;}}return false;};SafeSubscriber.prototype._unsubscribe=function(){var _parentSubscriber=this._parentSubscriber;this._context=null;this._parentSubscriber=null;_parentSubscriber.unsubscribe();};return SafeSubscriber;}(Subscriber);/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */function canReportError(observer){while(observer){var _a=observer,closed_1=_a.closed,destination=_a.destination,isStopped=_a.isStopped;if(closed_1||isStopped){return false;}else if(destination&&destination instanceof Subscriber){observer=destination;}else{observer=null;}}return true;}/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */function toSubscriber(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber){return nextOrObserver;}if(nextOrObserver[rxSubscriber]){return nextOrObserver[rxSubscriber]();}}if(!nextOrObserver&&!error&&!complete){return new Subscriber(empty$2);}return new Subscriber(nextOrObserver,error,complete);}/** PURE_IMPORTS_START  PURE_IMPORTS_END */var observable=/*@__PURE__*/function(){return typeof Symbol==='function'&&Symbol.observable||'@@observable';}();/** PURE_IMPORTS_START  PURE_IMPORTS_END */function identity(x){return x;}/** PURE_IMPORTS_START _identity PURE_IMPORTS_END */function pipe(){var fns=[];for(var _i=0;_i<arguments.length;_i++){fns[_i]=arguments[_i];}return pipeFromArray(fns);}function pipeFromArray(fns){if(fns.length===0){return identity;}if(fns.length===1){return fns[0];}return function piped(input){return fns.reduce(function(prev,fn){return fn(prev);},input);};}/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */var Observable=/*@__PURE__*/function(){function Observable(subscribe){this._isScalar=false;if(subscribe){this._subscribe=subscribe;}}Observable.prototype.lift=function(operator){var observable=new Observable();observable.source=this;observable.operator=operator;return observable;};Observable.prototype.subscribe=function(observerOrNext,error,complete){var operator=this.operator;var sink=toSubscriber(observerOrNext,error,complete);if(operator){sink.add(operator.call(sink,this.source));}else{sink.add(this.source||config.useDeprecatedSynchronousErrorHandling&&!sink.syncErrorThrowable?this._subscribe(sink):this._trySubscribe(sink));}if(config.useDeprecatedSynchronousErrorHandling){if(sink.syncErrorThrowable){sink.syncErrorThrowable=false;if(sink.syncErrorThrown){throw sink.syncErrorValue;}}}return sink;};Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink);}catch(err){if(config.useDeprecatedSynchronousErrorHandling){sink.syncErrorThrown=true;sink.syncErrorValue=err;}if(canReportError(sink)){sink.error(err);}else{console.warn(err);}}};Observable.prototype.forEach=function(next,promiseCtor){var _this=this;promiseCtor=getPromiseCtor(promiseCtor);return new promiseCtor(function(resolve,reject){var subscription;subscription=_this.subscribe(function(value){try{next(value);}catch(err){reject(err);if(subscription){subscription.unsubscribe();}}},reject,resolve);});};Observable.prototype._subscribe=function(subscriber){var source=this.source;return source&&source.subscribe(subscriber);};Observable.prototype[observable]=function(){return this;};Observable.prototype.pipe=function(){var operations=[];for(var _i=0;_i<arguments.length;_i++){operations[_i]=arguments[_i];}if(operations.length===0){return this;}return pipeFromArray(operations)(this);};Observable.prototype.toPromise=function(promiseCtor){var _this=this;promiseCtor=getPromiseCtor(promiseCtor);return new promiseCtor(function(resolve,reject){var value;_this.subscribe(function(x){return value=x;},function(err){return reject(err);},function(){return resolve(value);});});};Observable.create=function(subscribe){return new Observable(subscribe);};return Observable;}();function getPromiseCtor(promiseCtor){if(!promiseCtor){promiseCtor=config.Promise||Promise;}if(!promiseCtor){throw new Error('no Promise impl found');}return promiseCtor;}/** PURE_IMPORTS_START  PURE_IMPORTS_END */var ObjectUnsubscribedErrorImpl=/*@__PURE__*/function(){function ObjectUnsubscribedErrorImpl(){Error.call(this);this.message='object unsubscribed';this.name='ObjectUnsubscribedError';return this;}ObjectUnsubscribedErrorImpl.prototype=/*@__PURE__*/Object.create(Error.prototype);return ObjectUnsubscribedErrorImpl;}();var ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl;/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */var SubjectSubscription=/*@__PURE__*/function(_super){__extends(SubjectSubscription,_super);function SubjectSubscription(subject,subscriber){var _this=_super.call(this)||this;_this.subject=subject;_this.subscriber=subscriber;_this.closed=false;return _this;}SubjectSubscription.prototype.unsubscribe=function(){if(this.closed){return;}this.closed=true;var subject=this.subject;var observers=subject.observers;this.subject=null;if(!observers||observers.length===0||subject.isStopped||subject.closed){return;}var subscriberIndex=observers.indexOf(this.subscriber);if(subscriberIndex!==-1){observers.splice(subscriberIndex,1);}};return SubjectSubscription;}(Subscription);/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */var SubjectSubscriber=/*@__PURE__*/function(_super){__extends(SubjectSubscriber,_super);function SubjectSubscriber(destination){var _this=_super.call(this,destination)||this;_this.destination=destination;return _this;}return SubjectSubscriber;}(Subscriber);var Subject$1=/*@__PURE__*/function(_super){__extends(Subject,_super);function Subject(){var _this=_super.call(this)||this;_this.observers=[];_this.closed=false;_this.isStopped=false;_this.hasError=false;_this.thrownError=null;return _this;}Subject.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this);};Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);subject.operator=operator;return subject;};Subject.prototype.next=function(value){if(this.closed){throw new ObjectUnsubscribedError();}if(!this.isStopped){var observers=this.observers;var len=observers.length;var copy=observers.slice();for(var i=0;i<len;i++){copy[i].next(value);}}};Subject.prototype.error=function(err){if(this.closed){throw new ObjectUnsubscribedError();}this.hasError=true;this.thrownError=err;this.isStopped=true;var observers=this.observers;var len=observers.length;var copy=observers.slice();for(var i=0;i<len;i++){copy[i].error(err);}this.observers.length=0;};Subject.prototype.complete=function(){if(this.closed){throw new ObjectUnsubscribedError();}this.isStopped=true;var observers=this.observers;var len=observers.length;var copy=observers.slice();for(var i=0;i<len;i++){copy[i].complete();}this.observers.length=0;};Subject.prototype.unsubscribe=function(){this.isStopped=true;this.closed=true;this.observers=null;};Subject.prototype._trySubscribe=function(subscriber){if(this.closed){throw new ObjectUnsubscribedError();}else{return _super.prototype._trySubscribe.call(this,subscriber);}};Subject.prototype._subscribe=function(subscriber){if(this.closed){throw new ObjectUnsubscribedError();}else if(this.hasError){subscriber.error(this.thrownError);return Subscription.EMPTY;}else if(this.isStopped){subscriber.complete();return Subscription.EMPTY;}else{this.observers.push(subscriber);return new SubjectSubscription(this,subscriber);}};Subject.prototype.asObservable=function(){var observable=new Observable();observable.source=this;return observable;};Subject.create=function(destination,source){return new AnonymousSubject(destination,source);};return Subject;}(Observable);var AnonymousSubject=/*@__PURE__*/function(_super){__extends(AnonymousSubject,_super);function AnonymousSubject(destination,source){var _this=_super.call(this)||this;_this.destination=destination;_this.source=source;return _this;}AnonymousSubject.prototype.next=function(value){var destination=this.destination;if(destination&&destination.next){destination.next(value);}};AnonymousSubject.prototype.error=function(err){var destination=this.destination;if(destination&&destination.error){this.destination.error(err);}};AnonymousSubject.prototype.complete=function(){var destination=this.destination;if(destination&&destination.complete){this.destination.complete();}};AnonymousSubject.prototype._subscribe=function(subscriber){var source=this.source;if(source){return this.source.subscribe(subscriber);}else{return Subscription.EMPTY;}};return AnonymousSubject;}(Subject$1);/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */function refCount(){return function refCountOperatorFunction(source){return source.lift(new RefCountOperator(source));};}var RefCountOperator=/*@__PURE__*/function(){function RefCountOperator(connectable){this.connectable=connectable;}RefCountOperator.prototype.call=function(subscriber,source){var connectable=this.connectable;connectable._refCount++;var refCounter=new RefCountSubscriber(subscriber,connectable);var subscription=source.subscribe(refCounter);if(!refCounter.closed){refCounter.connection=connectable.connect();}return subscription;};return RefCountOperator;}();var RefCountSubscriber=/*@__PURE__*/function(_super){__extends(RefCountSubscriber,_super);function RefCountSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;_this.connectable=connectable;return _this;}RefCountSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(!connectable){this.connection=null;return;}this.connectable=null;var refCount=connectable._refCount;if(refCount<=0){this.connection=null;return;}connectable._refCount=refCount-1;if(refCount>1){this.connection=null;return;}var connection=this.connection;var sharedConnection=connectable._connection;this.connection=null;if(sharedConnection&&(!connection||sharedConnection===connection)){sharedConnection.unsubscribe();}};return RefCountSubscriber;}(Subscriber);/** PURE_IMPORTS_START tslib,_Subject,_Observable,_Subscriber,_Subscription,_operators_refCount PURE_IMPORTS_END */var ConnectableObservable=/*@__PURE__*/function(_super){__extends(ConnectableObservable,_super);function ConnectableObservable(source,subjectFactory){var _this=_super.call(this)||this;_this.source=source;_this.subjectFactory=subjectFactory;_this._refCount=0;_this._isComplete=false;return _this;}ConnectableObservable.prototype._subscribe=function(subscriber){return this.getSubject().subscribe(subscriber);};ConnectableObservable.prototype.getSubject=function(){var subject=this._subject;if(!subject||subject.isStopped){this._subject=this.subjectFactory();}return this._subject;};ConnectableObservable.prototype.connect=function(){var connection=this._connection;if(!connection){this._isComplete=false;connection=this._connection=new Subscription();connection.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this)));if(connection.closed){this._connection=null;connection=Subscription.EMPTY;}}return connection;};ConnectableObservable.prototype.refCount=function(){return refCount()(this);};return ConnectableObservable;}(Observable);var ConnectableSubscriber=/*@__PURE__*/function(_super){__extends(ConnectableSubscriber,_super);function ConnectableSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;_this.connectable=connectable;return _this;}ConnectableSubscriber.prototype._error=function(err){this._unsubscribe();_super.prototype._error.call(this,err);};ConnectableSubscriber.prototype._complete=function(){this.connectable._isComplete=true;this._unsubscribe();_super.prototype._complete.call(this);};ConnectableSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(connectable){this.connectable=null;var connection=connectable._connection;connectable._refCount=0;connectable._subject=null;connectable._connection=null;if(connection){connection.unsubscribe();}}};return ConnectableSubscriber;}(SubjectSubscriber);/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription,_Observable,_Subject PURE_IMPORTS_END */var GroupedObservable=/*@__PURE__*/function(_super){__extends(GroupedObservable,_super);function GroupedObservable(key,groupSubject,refCountSubscription){var _this=_super.call(this)||this;_this.key=key;_this.groupSubject=groupSubject;_this.refCountSubscription=refCountSubscription;return _this;}GroupedObservable.prototype._subscribe=function(subscriber){var subscription=new Subscription();var _a=this,refCountSubscription=_a.refCountSubscription,groupSubject=_a.groupSubject;if(refCountSubscription&&!refCountSubscription.closed){subscription.add(new InnerRefCountSubscription(refCountSubscription));}subscription.add(groupSubject.subscribe(subscriber));return subscription;};return GroupedObservable;}(Observable);var InnerRefCountSubscription=/*@__PURE__*/function(_super){__extends(InnerRefCountSubscription,_super);function InnerRefCountSubscription(parent){var _this=_super.call(this)||this;_this.parent=parent;parent.count++;return _this;}InnerRefCountSubscription.prototype.unsubscribe=function(){var parent=this.parent;if(!parent.closed&&!this.closed){_super.prototype.unsubscribe.call(this);parent.count-=1;if(parent.count===0&&parent.attemptedToUnsubscribe){parent.unsubscribe();}}};return InnerRefCountSubscription;}(Subscription);/** PURE_IMPORTS_START tslib,_Subject,_util_ObjectUnsubscribedError PURE_IMPORTS_END */var BehaviorSubject=/*@__PURE__*/function(_super){__extends(BehaviorSubject,_super);function BehaviorSubject(_value){var _this=_super.call(this)||this;_this._value=_value;return _this;}Object.defineProperty(BehaviorSubject.prototype,"value",{get:function get(){return this.getValue();},enumerable:true,configurable:true});BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);if(subscription&&!subscription.closed){subscriber.next(this._value);}return subscription;};BehaviorSubject.prototype.getValue=function(){if(this.hasError){throw this.thrownError;}else if(this.closed){throw new ObjectUnsubscribedError();}else{return this._value;}};BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value);};return BehaviorSubject;}(Subject$1);/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */var Action=/*@__PURE__*/function(_super){__extends(Action,_super);function Action(scheduler,work){return _super.call(this)||this;}Action.prototype.schedule=function(state,delay){return this;};return Action;}(Subscription);/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */var AsyncAction=/*@__PURE__*/function(_super){__extends(AsyncAction,_super);function AsyncAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;_this.pending=false;return _this;}AsyncAction.prototype.schedule=function(state,delay){if(delay===void 0){delay=0;}if(this.closed){return this;}this.state=state;var id=this.id;var scheduler=this.scheduler;if(id!=null){this.id=this.recycleAsyncId(scheduler,id,delay);}this.pending=true;this.delay=delay;this.id=this.id||this.requestAsyncId(scheduler,this.id,delay);return this;};AsyncAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}return setInterval(scheduler.flush.bind(scheduler,this),delay);};AsyncAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&this.delay===delay&&this.pending===false){return id;}clearInterval(id);return undefined;};AsyncAction.prototype.execute=function(state,delay){if(this.closed){return new Error('executing a cancelled action');}this.pending=false;var error=this._execute(state,delay);if(error){return error;}else if(this.pending===false&&this.id!=null){this.id=this.recycleAsyncId(this.scheduler,this.id,null);}};AsyncAction.prototype._execute=function(state,delay){var errored=false;var errorValue=undefined;try{this.work(state);}catch(e){errored=true;errorValue=!!e&&e||new Error(e);}if(errored){this.unsubscribe();return errorValue;}};AsyncAction.prototype._unsubscribe=function(){var id=this.id;var scheduler=this.scheduler;var actions=scheduler.actions;var index=actions.indexOf(this);this.work=null;this.state=null;this.pending=false;this.scheduler=null;if(index!==-1){actions.splice(index,1);}if(id!=null){this.id=this.recycleAsyncId(scheduler,id,null);}this.delay=null;};return AsyncAction;}(Action);/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */var QueueAction=/*@__PURE__*/function(_super){__extends(QueueAction,_super);function QueueAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;return _this;}QueueAction.prototype.schedule=function(state,delay){if(delay===void 0){delay=0;}if(delay>0){return _super.prototype.schedule.call(this,state,delay);}this.delay=delay;this.state=state;this.scheduler.flush(this);return this;};QueueAction.prototype.execute=function(state,delay){return delay>0||this.closed?_super.prototype.execute.call(this,state,delay):this._execute(state,delay);};QueueAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0||delay===null&&this.delay>0){return _super.prototype.requestAsyncId.call(this,scheduler,id,delay);}return scheduler.flush(this);};return QueueAction;}(AsyncAction);var Scheduler=/*@__PURE__*/function(){function Scheduler(SchedulerAction,now){if(now===void 0){now=Scheduler.now;}this.SchedulerAction=SchedulerAction;this.now=now;}Scheduler.prototype.schedule=function(work,delay,state){if(delay===void 0){delay=0;}return new this.SchedulerAction(this,work).schedule(state,delay);};Scheduler.now=function(){return Date.now();};return Scheduler;}();/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */var AsyncScheduler=/*@__PURE__*/function(_super){__extends(AsyncScheduler,_super);function AsyncScheduler(SchedulerAction,now){if(now===void 0){now=Scheduler.now;}var _this=_super.call(this,SchedulerAction,function(){if(AsyncScheduler.delegate&&AsyncScheduler.delegate!==_this){return AsyncScheduler.delegate.now();}else{return now();}})||this;_this.actions=[];_this.active=false;_this.scheduled=undefined;return _this;}AsyncScheduler.prototype.schedule=function(work,delay,state){if(delay===void 0){delay=0;}if(AsyncScheduler.delegate&&AsyncScheduler.delegate!==this){return AsyncScheduler.delegate.schedule(work,delay,state);}else{return _super.prototype.schedule.call(this,work,delay,state);}};AsyncScheduler.prototype.flush=function(action){var actions=this.actions;if(this.active){actions.push(action);return;}var error;this.active=true;do{if(error=action.execute(action.state,action.delay)){break;}}while(action=actions.shift());this.active=false;if(error){while(action=actions.shift()){action.unsubscribe();}throw error;}};return AsyncScheduler;}(Scheduler);/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */var QueueScheduler=/*@__PURE__*/function(_super){__extends(QueueScheduler,_super);function QueueScheduler(){return _super!==null&&_super.apply(this,arguments)||this;}return QueueScheduler;}(AsyncScheduler);/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */var queueScheduler=/*@__PURE__*/new QueueScheduler(QueueAction);var queue=queueScheduler;/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */var EMPTY=/*@__PURE__*/new Observable(function(subscriber){return subscriber.complete();});function empty$1(scheduler){return scheduler?emptyScheduled(scheduler):EMPTY;}function emptyScheduled(scheduler){return new Observable(function(subscriber){return scheduler.schedule(function(){return subscriber.complete();});});}/** PURE_IMPORTS_START  PURE_IMPORTS_END */function isScheduler(value){return value&&typeof value.schedule==='function';}/** PURE_IMPORTS_START  PURE_IMPORTS_END */var subscribeToArray=function subscribeToArray(array){return function(subscriber){for(var i=0,len=array.length;i<len&&!subscriber.closed;i++){subscriber.next(array[i]);}subscriber.complete();};};/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */function scheduleArray(input,scheduler){return new Observable(function(subscriber){var sub=new Subscription();var i=0;sub.add(scheduler.schedule(function(){if(i===input.length){subscriber.complete();return;}subscriber.next(input[i++]);if(!subscriber.closed){sub.add(this.schedule());}}));return sub;});}/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */function fromArray(input,scheduler){if(!scheduler){return new Observable(subscribeToArray(input));}else{return scheduleArray(input,scheduler);}}/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */function of(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var scheduler=args[args.length-1];if(isScheduler(scheduler)){args.pop();return scheduleArray(args,scheduler);}else{return fromArray(args);}}/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */function throwError(error,scheduler){if(!scheduler){return new Observable(function(subscriber){return subscriber.error(error);});}else{return new Observable(function(subscriber){return scheduler.schedule(dispatch$7,0,{error:error,subscriber:subscriber});});}}function dispatch$7(_a){var error=_a.error,subscriber=_a.subscriber;subscriber.error(error);}/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */var NotificationKind;/*@__PURE__*/(function(NotificationKind){NotificationKind["NEXT"]="N";NotificationKind["ERROR"]="E";NotificationKind["COMPLETE"]="C";})(NotificationKind||(NotificationKind={}));var Notification=/*@__PURE__*/function(){function Notification(kind,value,error){this.kind=kind;this.value=value;this.error=error;this.hasValue=kind==='N';}Notification.prototype.observe=function(observer){switch(this.kind){case'N':return observer.next&&observer.next(this.value);case'E':return observer.error&&observer.error(this.error);case'C':return observer.complete&&observer.complete();}};Notification.prototype["do"]=function(next,error,complete){var kind=this.kind;switch(kind){case'N':return next&&next(this.value);case'E':return error&&error(this.error);case'C':return complete&&complete();}};Notification.prototype.accept=function(nextOrObserver,error,complete){if(nextOrObserver&&typeof nextOrObserver.next==='function'){return this.observe(nextOrObserver);}else{return this["do"](nextOrObserver,error,complete);}};Notification.prototype.toObservable=function(){var kind=this.kind;switch(kind){case'N':return of(this.value);case'E':return throwError(this.error);case'C':return empty$1();}throw new Error('unexpected notification kind value');};Notification.createNext=function(value){if(typeof value!=='undefined'){return new Notification('N',value);}return Notification.undefinedValueNotification;};Notification.createError=function(err){return new Notification('E',undefined,err);};Notification.createComplete=function(){return Notification.completeNotification;};Notification.completeNotification=new Notification('C');Notification.undefinedValueNotification=new Notification('N',undefined);return Notification;}();/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */var ObserveOnSubscriber=/*@__PURE__*/function(_super){__extends(ObserveOnSubscriber,_super);function ObserveOnSubscriber(destination,scheduler,delay){if(delay===void 0){delay=0;}var _this=_super.call(this,destination)||this;_this.scheduler=scheduler;_this.delay=delay;return _this;}ObserveOnSubscriber.dispatch=function(arg){var notification=arg.notification,destination=arg.destination;notification.observe(destination);this.unsubscribe();};ObserveOnSubscriber.prototype.scheduleMessage=function(notification){var destination=this.destination;destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)));};ObserveOnSubscriber.prototype._next=function(value){this.scheduleMessage(Notification.createNext(value));};ObserveOnSubscriber.prototype._error=function(err){this.scheduleMessage(Notification.createError(err));this.unsubscribe();};ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(Notification.createComplete());this.unsubscribe();};return ObserveOnSubscriber;}(Subscriber);var ObserveOnMessage=/*@__PURE__*/function(){function ObserveOnMessage(notification,destination){this.notification=notification;this.destination=destination;}return ObserveOnMessage;}();/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */var ReplaySubject=/*@__PURE__*/function(_super){__extends(ReplaySubject,_super);function ReplaySubject(bufferSize,windowTime,scheduler){if(bufferSize===void 0){bufferSize=Number.POSITIVE_INFINITY;}if(windowTime===void 0){windowTime=Number.POSITIVE_INFINITY;}var _this=_super.call(this)||this;_this.scheduler=scheduler;_this._events=[];_this._infiniteTimeWindow=false;_this._bufferSize=bufferSize<1?1:bufferSize;_this._windowTime=windowTime<1?1:windowTime;if(windowTime===Number.POSITIVE_INFINITY){_this._infiniteTimeWindow=true;_this.next=_this.nextInfiniteTimeWindow;}else{_this.next=_this.nextTimeWindow;}return _this;}ReplaySubject.prototype.nextInfiniteTimeWindow=function(value){if(!this.isStopped){var _events=this._events;_events.push(value);if(_events.length>this._bufferSize){_events.shift();}}_super.prototype.next.call(this,value);};ReplaySubject.prototype.nextTimeWindow=function(value){if(!this.isStopped){this._events.push(new ReplayEvent(this._getNow(),value));this._trimBufferThenGetEvents();}_super.prototype.next.call(this,value);};ReplaySubject.prototype._subscribe=function(subscriber){var _infiniteTimeWindow=this._infiniteTimeWindow;var _events=_infiniteTimeWindow?this._events:this._trimBufferThenGetEvents();var scheduler=this.scheduler;var len=_events.length;var subscription;if(this.closed){throw new ObjectUnsubscribedError();}else if(this.isStopped||this.hasError){subscription=Subscription.EMPTY;}else{this.observers.push(subscriber);subscription=new SubjectSubscription(this,subscriber);}if(scheduler){subscriber.add(subscriber=new ObserveOnSubscriber(subscriber,scheduler));}if(_infiniteTimeWindow){for(var i=0;i<len&&!subscriber.closed;i++){subscriber.next(_events[i]);}}else{for(var i=0;i<len&&!subscriber.closed;i++){subscriber.next(_events[i].value);}}if(this.hasError){subscriber.error(this.thrownError);}else if(this.isStopped){subscriber.complete();}return subscription;};ReplaySubject.prototype._getNow=function(){return(this.scheduler||queue).now();};ReplaySubject.prototype._trimBufferThenGetEvents=function(){var now=this._getNow();var _bufferSize=this._bufferSize;var _windowTime=this._windowTime;var _events=this._events;var eventsCount=_events.length;var spliceCount=0;while(spliceCount<eventsCount){if(now-_events[spliceCount].time<_windowTime){break;}spliceCount++;}if(eventsCount>_bufferSize){spliceCount=Math.max(spliceCount,eventsCount-_bufferSize);}if(spliceCount>0){_events.splice(0,spliceCount);}return _events;};return ReplaySubject;}(Subject$1);var ReplayEvent=/*@__PURE__*/function(){function ReplayEvent(time,value){this.time=time;this.value=value;}return ReplayEvent;}();/** PURE_IMPORTS_START tslib,_Subject,_Subscription PURE_IMPORTS_END */var AsyncSubject=/*@__PURE__*/function(_super){__extends(AsyncSubject,_super);function AsyncSubject(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.value=null;_this.hasNext=false;_this.hasCompleted=false;return _this;}AsyncSubject.prototype._subscribe=function(subscriber){if(this.hasError){subscriber.error(this.thrownError);return Subscription.EMPTY;}else if(this.hasCompleted&&this.hasNext){subscriber.next(this.value);subscriber.complete();return Subscription.EMPTY;}return _super.prototype._subscribe.call(this,subscriber);};AsyncSubject.prototype.next=function(value){if(!this.hasCompleted){this.value=value;this.hasNext=true;}};AsyncSubject.prototype.error=function(error){if(!this.hasCompleted){_super.prototype.error.call(this,error);}};AsyncSubject.prototype.complete=function(){this.hasCompleted=true;if(this.hasNext){_super.prototype.next.call(this,this.value);}_super.prototype.complete.call(this);};return AsyncSubject;}(Subject$1);/** PURE_IMPORTS_START  PURE_IMPORTS_END */var nextHandle=1;var RESOLVED=/*@__PURE__*/function(){return/*@__PURE__*/Promise.resolve();}();var activeHandles={};function findAndClearHandle(handle){if(handle in activeHandles){delete activeHandles[handle];return true;}return false;}var Immediate={setImmediate:function setImmediate(cb){var handle=nextHandle++;activeHandles[handle]=true;RESOLVED.then(function(){return findAndClearHandle(handle)&&cb();});return handle;},clearImmediate:function clearImmediate(handle){findAndClearHandle(handle);}};/** PURE_IMPORTS_START tslib,_util_Immediate,_AsyncAction PURE_IMPORTS_END */var AsapAction=/*@__PURE__*/function(_super){__extends(AsapAction,_super);function AsapAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;return _this;}AsapAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0){return _super.prototype.requestAsyncId.call(this,scheduler,id,delay);}scheduler.actions.push(this);return scheduler.scheduled||(scheduler.scheduled=Immediate.setImmediate(scheduler.flush.bind(scheduler,null)));};AsapAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0||delay===null&&this.delay>0){return _super.prototype.recycleAsyncId.call(this,scheduler,id,delay);}if(scheduler.actions.length===0){Immediate.clearImmediate(id);scheduler.scheduled=undefined;}return undefined;};return AsapAction;}(AsyncAction);/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */var AsapScheduler=/*@__PURE__*/function(_super){__extends(AsapScheduler,_super);function AsapScheduler(){return _super!==null&&_super.apply(this,arguments)||this;}AsapScheduler.prototype.flush=function(action){this.active=true;this.scheduled=undefined;var actions=this.actions;var error;var index=-1;var count=actions.length;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay)){break;}}while(++index<count&&(action=actions.shift()));this.active=false;if(error){while(++index<count&&(action=actions.shift())){action.unsubscribe();}throw error;}};return AsapScheduler;}(AsyncScheduler);/** PURE_IMPORTS_START _AsapAction,_AsapScheduler PURE_IMPORTS_END */var asapScheduler=/*@__PURE__*/new AsapScheduler(AsapAction);var asap=asapScheduler;/** PURE_IMPORTS_START _AsyncAction,_AsyncScheduler PURE_IMPORTS_END */var asyncScheduler=/*@__PURE__*/new AsyncScheduler(AsyncAction);var async=asyncScheduler;/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */var AnimationFrameAction=/*@__PURE__*/function(_super){__extends(AnimationFrameAction,_super);function AnimationFrameAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;return _this;}AnimationFrameAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0){return _super.prototype.requestAsyncId.call(this,scheduler,id,delay);}scheduler.actions.push(this);return scheduler.scheduled||(scheduler.scheduled=requestAnimationFrame(function(){return scheduler.flush(null);}));};AnimationFrameAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}if(delay!==null&&delay>0||delay===null&&this.delay>0){return _super.prototype.recycleAsyncId.call(this,scheduler,id,delay);}if(scheduler.actions.length===0){cancelAnimationFrame(id);scheduler.scheduled=undefined;}return undefined;};return AnimationFrameAction;}(AsyncAction);/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */var AnimationFrameScheduler=/*@__PURE__*/function(_super){__extends(AnimationFrameScheduler,_super);function AnimationFrameScheduler(){return _super!==null&&_super.apply(this,arguments)||this;}AnimationFrameScheduler.prototype.flush=function(action){this.active=true;this.scheduled=undefined;var actions=this.actions;var error;var index=-1;var count=actions.length;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay)){break;}}while(++index<count&&(action=actions.shift()));this.active=false;if(error){while(++index<count&&(action=actions.shift())){action.unsubscribe();}throw error;}};return AnimationFrameScheduler;}(AsyncScheduler);/** PURE_IMPORTS_START _AnimationFrameAction,_AnimationFrameScheduler PURE_IMPORTS_END */var animationFrameScheduler=/*@__PURE__*/new AnimationFrameScheduler(AnimationFrameAction);var animationFrame=animationFrameScheduler;/** PURE_IMPORTS_START tslib,_AsyncAction,_AsyncScheduler PURE_IMPORTS_END */var VirtualTimeScheduler=/*@__PURE__*/function(_super){__extends(VirtualTimeScheduler,_super);function VirtualTimeScheduler(SchedulerAction,maxFrames){if(SchedulerAction===void 0){SchedulerAction=VirtualAction;}if(maxFrames===void 0){maxFrames=Number.POSITIVE_INFINITY;}var _this=_super.call(this,SchedulerAction,function(){return _this.frame;})||this;_this.maxFrames=maxFrames;_this.frame=0;_this.index=-1;return _this;}VirtualTimeScheduler.prototype.flush=function(){var _a=this,actions=_a.actions,maxFrames=_a.maxFrames;var error,action;while((action=actions[0])&&action.delay<=maxFrames){actions.shift();this.frame=action.delay;if(error=action.execute(action.state,action.delay)){break;}}if(error){while(action=actions.shift()){action.unsubscribe();}throw error;}};VirtualTimeScheduler.frameTimeFactor=10;return VirtualTimeScheduler;}(AsyncScheduler);var VirtualAction=/*@__PURE__*/function(_super){__extends(VirtualAction,_super);function VirtualAction(scheduler,work,index){if(index===void 0){index=scheduler.index+=1;}var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;_this.index=index;_this.active=true;_this.index=scheduler.index=index;return _this;}VirtualAction.prototype.schedule=function(state,delay){if(delay===void 0){delay=0;}if(!this.id){return _super.prototype.schedule.call(this,state,delay);}this.active=false;var action=new VirtualAction(this.scheduler,this.work);this.add(action);return action.schedule(state,delay);};VirtualAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}this.delay=scheduler.frame+delay;var actions=scheduler.actions;actions.push(this);actions.sort(VirtualAction.sortActions);return true;};VirtualAction.prototype.recycleAsyncId=function(scheduler,id,delay){return undefined;};VirtualAction.prototype._execute=function(state,delay){if(this.active===true){return _super.prototype._execute.call(this,state,delay);}};VirtualAction.sortActions=function(a,b){if(a.delay===b.delay){if(a.index===b.index){return 0;}else if(a.index>b.index){return 1;}else{return-1;}}else if(a.delay>b.delay){return 1;}else{return-1;}};return VirtualAction;}(AsyncAction);/** PURE_IMPORTS_START  PURE_IMPORTS_END */function noop(){}/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */function isObservable$2(obj){return!!obj&&(obj instanceof Observable||typeof obj.lift==='function'&&typeof obj.subscribe==='function');}/** PURE_IMPORTS_START  PURE_IMPORTS_END */var ArgumentOutOfRangeErrorImpl=/*@__PURE__*/function(){function ArgumentOutOfRangeErrorImpl(){Error.call(this);this.message='argument out of range';this.name='ArgumentOutOfRangeError';return this;}ArgumentOutOfRangeErrorImpl.prototype=/*@__PURE__*/Object.create(Error.prototype);return ArgumentOutOfRangeErrorImpl;}();var ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;/** PURE_IMPORTS_START  PURE_IMPORTS_END */var EmptyErrorImpl=/*@__PURE__*/function(){function EmptyErrorImpl(){Error.call(this);this.message='no elements in sequence';this.name='EmptyError';return this;}EmptyErrorImpl.prototype=/*@__PURE__*/Object.create(Error.prototype);return EmptyErrorImpl;}();var EmptyError=EmptyErrorImpl;/** PURE_IMPORTS_START  PURE_IMPORTS_END */var TimeoutErrorImpl=/*@__PURE__*/function(){function TimeoutErrorImpl(){Error.call(this);this.message='Timeout has occurred';this.name='TimeoutError';return this;}TimeoutErrorImpl.prototype=/*@__PURE__*/Object.create(Error.prototype);return TimeoutErrorImpl;}();var TimeoutError=TimeoutErrorImpl;/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */function map(project,thisArg){return function mapOperation(source){if(typeof project!=='function'){throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');}return source.lift(new MapOperator(project,thisArg));};}var MapOperator=/*@__PURE__*/function(){function MapOperator(project,thisArg){this.project=project;this.thisArg=thisArg;}MapOperator.prototype.call=function(subscriber,source){return source.subscribe(new MapSubscriber(subscriber,this.project,this.thisArg));};return MapOperator;}();var MapSubscriber=/*@__PURE__*/function(_super){__extends(MapSubscriber,_super);function MapSubscriber(destination,project,thisArg){var _this=_super.call(this,destination)||this;_this.project=project;_this.count=0;_this.thisArg=thisArg||_this;return _this;}MapSubscriber.prototype._next=function(value){var result;try{result=this.project.call(this.thisArg,value,this.count++);}catch(err){this.destination.error(err);return;}this.destination.next(result);};return MapSubscriber;}(Subscriber);/** PURE_IMPORTS_START _Observable,_AsyncSubject,_operators_map,_util_canReportError,_util_isArray,_util_isScheduler PURE_IMPORTS_END */function bindCallback(callbackFunc,resultSelector,scheduler){if(resultSelector){if(isScheduler(resultSelector)){scheduler=resultSelector;}else{return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return bindCallback(callbackFunc,scheduler).apply(void 0,args).pipe(map(function(args){return isArray(args)?resultSelector.apply(void 0,args):resultSelector(args);}));};}}return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var context=this;var subject;var params={context:context,subject:subject,callbackFunc:callbackFunc,scheduler:scheduler};return new Observable(function(subscriber){if(!scheduler){if(!subject){subject=new AsyncSubject();var handler=function handler(){var innerArgs=[];for(var _i=0;_i<arguments.length;_i++){innerArgs[_i]=arguments[_i];}subject.next(innerArgs.length<=1?innerArgs[0]:innerArgs);subject.complete();};try{callbackFunc.apply(context,args.concat([handler]));}catch(err){if(canReportError(subject)){subject.error(err);}else{console.warn(err);}}}return subject.subscribe(subscriber);}else{var state={args:args,subscriber:subscriber,params:params};return scheduler.schedule(dispatch$6,0,state);}});};}function dispatch$6(state){var _this=this;var args=state.args,subscriber=state.subscriber,params=state.params;var callbackFunc=params.callbackFunc,context=params.context,scheduler=params.scheduler;var subject=params.subject;if(!subject){subject=params.subject=new AsyncSubject();var handler=function handler(){var innerArgs=[];for(var _i=0;_i<arguments.length;_i++){innerArgs[_i]=arguments[_i];}var value=innerArgs.length<=1?innerArgs[0]:innerArgs;_this.add(scheduler.schedule(dispatchNext$1,0,{value:value,subject:subject}));};try{callbackFunc.apply(context,args.concat([handler]));}catch(err){subject.error(err);}}this.add(subject.subscribe(subscriber));}function dispatchNext$1(state){var value=state.value,subject=state.subject;subject.next(value);subject.complete();}/** PURE_IMPORTS_START _Observable,_AsyncSubject,_operators_map,_util_canReportError,_util_isScheduler,_util_isArray PURE_IMPORTS_END */function bindNodeCallback(callbackFunc,resultSelector,scheduler){if(resultSelector){if(isScheduler(resultSelector)){scheduler=resultSelector;}else{return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}return bindNodeCallback(callbackFunc,scheduler).apply(void 0,args).pipe(map(function(args){return isArray(args)?resultSelector.apply(void 0,args):resultSelector(args);}));};}}return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var params={subject:undefined,args:args,callbackFunc:callbackFunc,scheduler:scheduler,context:this};return new Observable(function(subscriber){var context=params.context;var subject=params.subject;if(!scheduler){if(!subject){subject=params.subject=new AsyncSubject();var handler=function handler(){var innerArgs=[];for(var _i=0;_i<arguments.length;_i++){innerArgs[_i]=arguments[_i];}var err=innerArgs.shift();if(err){subject.error(err);return;}subject.next(innerArgs.length<=1?innerArgs[0]:innerArgs);subject.complete();};try{callbackFunc.apply(context,args.concat([handler]));}catch(err){if(canReportError(subject)){subject.error(err);}else{console.warn(err);}}}return subject.subscribe(subscriber);}else{return scheduler.schedule(dispatch$5,0,{params:params,subscriber:subscriber,context:context});}});};}function dispatch$5(state){var _this=this;var params=state.params,subscriber=state.subscriber,context=state.context;var callbackFunc=params.callbackFunc,args=params.args,scheduler=params.scheduler;var subject=params.subject;if(!subject){subject=params.subject=new AsyncSubject();var handler=function handler(){var innerArgs=[];for(var _i=0;_i<arguments.length;_i++){innerArgs[_i]=arguments[_i];}var err=innerArgs.shift();if(err){_this.add(scheduler.schedule(dispatchError,0,{err:err,subject:subject}));}else{var value=innerArgs.length<=1?innerArgs[0]:innerArgs;_this.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}));}};try{callbackFunc.apply(context,args.concat([handler]));}catch(err){this.add(scheduler.schedule(dispatchError,0,{err:err,subject:subject}));}}this.add(subject.subscribe(subscriber));}function dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value);subject.complete();}function dispatchError(arg){var err=arg.err,subject=arg.subject;subject.error(err);}/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */var OuterSubscriber=/*@__PURE__*/function(_super){__extends(OuterSubscriber,_super);function OuterSubscriber(){return _super!==null&&_super.apply(this,arguments)||this;}OuterSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue);};OuterSubscriber.prototype.notifyError=function(error,innerSub){this.destination.error(error);};OuterSubscriber.prototype.notifyComplete=function(innerSub){this.destination.complete();};return OuterSubscriber;}(Subscriber);/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */var InnerSubscriber=/*@__PURE__*/function(_super){__extends(InnerSubscriber,_super);function InnerSubscriber(parent,outerValue,outerIndex){var _this=_super.call(this)||this;_this.parent=parent;_this.outerValue=outerValue;_this.outerIndex=outerIndex;_this.index=0;return _this;}InnerSubscriber.prototype._next=function(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this.index++,this);};InnerSubscriber.prototype._error=function(error){this.parent.notifyError(error,this);this.unsubscribe();};InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe();};return InnerSubscriber;}(Subscriber);/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */var subscribeToPromise=function subscribeToPromise(promise){return function(subscriber){promise.then(function(value){if(!subscriber.closed){subscriber.next(value);subscriber.complete();}},function(err){return subscriber.error(err);}).then(null,hostReportError);return subscriber;};};/** PURE_IMPORTS_START  PURE_IMPORTS_END */function getSymbolIterator(){if(typeof Symbol!=='function'||!Symbol.iterator){return'@@iterator';}return Symbol.iterator;}var iterator=/*@__PURE__*/getSymbolIterator();/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */var subscribeToIterable=function subscribeToIterable(iterable){return function(subscriber){var iterator$1=iterable[iterator]();do{var item=void 0;try{item=iterator$1.next();}catch(err){subscriber.error(err);return subscriber;}if(item.done){subscriber.complete();break;}subscriber.next(item.value);if(subscriber.closed){break;}}while(true);if(typeof iterator$1["return"]==='function'){subscriber.add(function(){if(iterator$1["return"]){iterator$1["return"]();}});}return subscriber;};};/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */var subscribeToObservable=function subscribeToObservable(obj){return function(subscriber){var obs=obj[observable]();if(typeof obs.subscribe!=='function'){throw new TypeError('Provided object does not correctly implement Symbol.observable');}else{return obs.subscribe(subscriber);}};};/** PURE_IMPORTS_START  PURE_IMPORTS_END */var isArrayLike=function isArrayLike(x){return x&&typeof x.length==='number'&&typeof x!=='function';};/** PURE_IMPORTS_START  PURE_IMPORTS_END */function isPromise(value){return!!value&&typeof value.subscribe!=='function'&&typeof value.then==='function';}/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */var subscribeTo=function subscribeTo(result){if(!!result&&typeof result[observable]==='function'){return subscribeToObservable(result);}else if(isArrayLike(result)){return subscribeToArray(result);}else if(isPromise(result)){return subscribeToPromise(result);}else if(!!result&&typeof result[iterator]==='function'){return subscribeToIterable(result);}else{var value=isObject(result)?'an invalid object':"'"+result+"'";var msg="You provided "+value+" where a stream was expected."+' You can provide an Observable, Promise, Array, or Iterable.';throw new TypeError(msg);}};/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */function subscribeToResult(outerSubscriber,result,outerValue,outerIndex,innerSubscriber){if(innerSubscriber===void 0){innerSubscriber=new InnerSubscriber(outerSubscriber,outerValue,outerIndex);}if(innerSubscriber.closed){return undefined;}if(result instanceof Observable){return result.subscribe(innerSubscriber);}return subscribeTo(result)(innerSubscriber);}/** PURE_IMPORTS_START tslib,_util_isScheduler,_util_isArray,_OuterSubscriber,_util_subscribeToResult,_fromArray PURE_IMPORTS_END */var NONE={};function combineLatest(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}var resultSelector=undefined;var scheduler=undefined;if(isScheduler(observables[observables.length-1])){scheduler=observables.pop();}if(typeof observables[observables.length-1]==='function'){resultSelector=observables.pop();}if(observables.length===1&&isArray(observables[0])){observables=observables[0];}return fromArray(observables,scheduler).lift(new CombineLatestOperator(resultSelector));}var CombineLatestOperator=/*@__PURE__*/function(){function CombineLatestOperator(resultSelector){this.resultSelector=resultSelector;}CombineLatestOperator.prototype.call=function(subscriber,source){return source.subscribe(new CombineLatestSubscriber(subscriber,this.resultSelector));};return CombineLatestOperator;}();var CombineLatestSubscriber=/*@__PURE__*/function(_super){__extends(CombineLatestSubscriber,_super);function CombineLatestSubscriber(destination,resultSelector){var _this=_super.call(this,destination)||this;_this.resultSelector=resultSelector;_this.active=0;_this.values=[];_this.observables=[];return _this;}CombineLatestSubscriber.prototype._next=function(observable){this.values.push(NONE);this.observables.push(observable);};CombineLatestSubscriber.prototype._complete=function(){var observables=this.observables;var len=observables.length;if(len===0){this.destination.complete();}else{this.active=len;this.toRespond=len;for(var i=0;i<len;i++){var observable=observables[i];this.add(subscribeToResult(this,observable,undefined,i));}}};CombineLatestSubscriber.prototype.notifyComplete=function(unused){if((this.active-=1)===0){this.destination.complete();}};CombineLatestSubscriber.prototype.notifyNext=function(_outerValue,innerValue,outerIndex){var values=this.values;var oldVal=values[outerIndex];var toRespond=!this.toRespond?0:oldVal===NONE?--this.toRespond:this.toRespond;values[outerIndex]=innerValue;if(toRespond===0){if(this.resultSelector){this._tryResultSelector(values);}else{this.destination.next(values.slice());}}};CombineLatestSubscriber.prototype._tryResultSelector=function(values){var result;try{result=this.resultSelector.apply(this,values);}catch(err){this.destination.error(err);return;}this.destination.next(result);};return CombineLatestSubscriber;}(OuterSubscriber);/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable PURE_IMPORTS_END */function scheduleObservable(input,scheduler){return new Observable(function(subscriber){var sub=new Subscription();sub.add(scheduler.schedule(function(){var observable$1=input[observable]();sub.add(observable$1.subscribe({next:function next(value){sub.add(scheduler.schedule(function(){return subscriber.next(value);}));},error:function error(err){sub.add(scheduler.schedule(function(){return subscriber.error(err);}));},complete:function complete(){sub.add(scheduler.schedule(function(){return subscriber.complete();}));}}));}));return sub;});}/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */function schedulePromise(input,scheduler){return new Observable(function(subscriber){var sub=new Subscription();sub.add(scheduler.schedule(function(){return input.then(function(value){sub.add(scheduler.schedule(function(){subscriber.next(value);sub.add(scheduler.schedule(function(){return subscriber.complete();}));}));},function(err){sub.add(scheduler.schedule(function(){return subscriber.error(err);}));});}));return sub;});}/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator PURE_IMPORTS_END */function scheduleIterable(input,scheduler){if(!input){throw new Error('Iterable cannot be null');}return new Observable(function(subscriber){var sub=new Subscription();var iterator$1;sub.add(function(){if(iterator$1&&typeof iterator$1["return"]==='function'){iterator$1["return"]();}});sub.add(scheduler.schedule(function(){iterator$1=input[iterator]();sub.add(scheduler.schedule(function(){if(subscriber.closed){return;}var value;var done;try{var result=iterator$1.next();value=result.value;done=result.done;}catch(err){subscriber.error(err);return;}if(done){subscriber.complete();}else{subscriber.next(value);this.schedule();}}));}));return sub;});}/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */function isInteropObservable(input){return input&&typeof input[observable]==='function';}/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */function isIterable(input){return input&&typeof input[iterator]==='function';}/** PURE_IMPORTS_START _scheduleObservable,_schedulePromise,_scheduleArray,_scheduleIterable,_util_isInteropObservable,_util_isPromise,_util_isArrayLike,_util_isIterable PURE_IMPORTS_END */function scheduled(input,scheduler){if(input!=null){if(isInteropObservable(input)){return scheduleObservable(input,scheduler);}else if(isPromise(input)){return schedulePromise(input,scheduler);}else if(isArrayLike(input)){return scheduleArray(input,scheduler);}else if(isIterable(input)||typeof input==='string'){return scheduleIterable(input,scheduler);}}throw new TypeError((input!==null&&_typeof(input)||input)+' is not observable');}/** PURE_IMPORTS_START _Observable,_util_subscribeTo,_scheduled_scheduled PURE_IMPORTS_END */function from(input,scheduler){if(!scheduler){if(input instanceof Observable){return input;}return new Observable(subscribeTo(input));}else{return scheduled(input,scheduler);}}/** PURE_IMPORTS_START tslib,_Subscriber,_Observable,_util_subscribeTo PURE_IMPORTS_END */var SimpleInnerSubscriber=/*@__PURE__*/function(_super){__extends(SimpleInnerSubscriber,_super);function SimpleInnerSubscriber(parent){var _this=_super.call(this)||this;_this.parent=parent;return _this;}SimpleInnerSubscriber.prototype._next=function(value){this.parent.notifyNext(value);};SimpleInnerSubscriber.prototype._error=function(error){this.parent.notifyError(error);this.unsubscribe();};SimpleInnerSubscriber.prototype._complete=function(){this.parent.notifyComplete();this.unsubscribe();};return SimpleInnerSubscriber;}(Subscriber);var SimpleOuterSubscriber=/*@__PURE__*/function(_super){__extends(SimpleOuterSubscriber,_super);function SimpleOuterSubscriber(){return _super!==null&&_super.apply(this,arguments)||this;}SimpleOuterSubscriber.prototype.notifyNext=function(innerValue){this.destination.next(innerValue);};SimpleOuterSubscriber.prototype.notifyError=function(err){this.destination.error(err);};SimpleOuterSubscriber.prototype.notifyComplete=function(){this.destination.complete();};return SimpleOuterSubscriber;}(Subscriber);function innerSubscribe(result,innerSubscriber){if(innerSubscriber.closed){return undefined;}if(result instanceof Observable){return result.subscribe(innerSubscriber);}var subscription;try{subscription=subscribeTo(result)(innerSubscriber);}catch(error){innerSubscriber.error(error);}return subscription;}/** PURE_IMPORTS_START tslib,_map,_observable_from,_innerSubscribe PURE_IMPORTS_END */function mergeMap(project,resultSelector,concurrent){if(concurrent===void 0){concurrent=Number.POSITIVE_INFINITY;}if(typeof resultSelector==='function'){return function(source){return source.pipe(mergeMap(function(a,i){return from(project(a,i)).pipe(map(function(b,ii){return resultSelector(a,b,i,ii);}));},concurrent));};}else if(typeof resultSelector==='number'){concurrent=resultSelector;}return function(source){return source.lift(new MergeMapOperator(project,concurrent));};}var MergeMapOperator=/*@__PURE__*/function(){function MergeMapOperator(project,concurrent){if(concurrent===void 0){concurrent=Number.POSITIVE_INFINITY;}this.project=project;this.concurrent=concurrent;}MergeMapOperator.prototype.call=function(observer,source){return source.subscribe(new MergeMapSubscriber(observer,this.project,this.concurrent));};return MergeMapOperator;}();var MergeMapSubscriber=/*@__PURE__*/function(_super){__extends(MergeMapSubscriber,_super);function MergeMapSubscriber(destination,project,concurrent){if(concurrent===void 0){concurrent=Number.POSITIVE_INFINITY;}var _this=_super.call(this,destination)||this;_this.project=project;_this.concurrent=concurrent;_this.hasCompleted=false;_this.buffer=[];_this.active=0;_this.index=0;return _this;}MergeMapSubscriber.prototype._next=function(value){if(this.active<this.concurrent){this._tryNext(value);}else{this.buffer.push(value);}};MergeMapSubscriber.prototype._tryNext=function(value){var result;var index=this.index++;try{result=this.project(value,index);}catch(err){this.destination.error(err);return;}this.active++;this._innerSub(result);};MergeMapSubscriber.prototype._innerSub=function(ish){var innerSubscriber=new SimpleInnerSubscriber(this);var destination=this.destination;destination.add(innerSubscriber);var innerSubscription=innerSubscribe(ish,innerSubscriber);if(innerSubscription!==innerSubscriber){destination.add(innerSubscription);}};MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=true;if(this.active===0&&this.buffer.length===0){this.destination.complete();}this.unsubscribe();};MergeMapSubscriber.prototype.notifyNext=function(innerValue){this.destination.next(innerValue);};MergeMapSubscriber.prototype.notifyComplete=function(){var buffer=this.buffer;this.active--;if(buffer.length>0){this._next(buffer.shift());}else if(this.active===0&&this.hasCompleted){this.destination.complete();}};return MergeMapSubscriber;}(SimpleOuterSubscriber);/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */function mergeAll(concurrent){if(concurrent===void 0){concurrent=Number.POSITIVE_INFINITY;}return mergeMap(identity,concurrent);}/** PURE_IMPORTS_START _mergeAll PURE_IMPORTS_END */function concatAll(){return mergeAll(1);}/** PURE_IMPORTS_START _of,_operators_concatAll PURE_IMPORTS_END */function concat(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}return concatAll()(of.apply(void 0,observables));}/** PURE_IMPORTS_START _Observable,_from,_empty PURE_IMPORTS_END */function defer(observableFactory){return new Observable(function(subscriber){var input;try{input=observableFactory();}catch(err){subscriber.error(err);return undefined;}var source=input?from(input):empty$1();return source.subscribe(subscriber);});}/** PURE_IMPORTS_START _Observable,_util_isArray,_operators_map,_util_isObject,_from PURE_IMPORTS_END */function forkJoin(){var sources=[];for(var _i=0;_i<arguments.length;_i++){sources[_i]=arguments[_i];}if(sources.length===1){var first_1=sources[0];if(isArray(first_1)){return forkJoinInternal(first_1,null);}if(isObject(first_1)&&Object.getPrototypeOf(first_1)===Object.prototype){var keys=Object.keys(first_1);return forkJoinInternal(keys.map(function(key){return first_1[key];}),keys);}}if(typeof sources[sources.length-1]==='function'){var resultSelector_1=sources.pop();sources=sources.length===1&&isArray(sources[0])?sources[0]:sources;return forkJoinInternal(sources,null).pipe(map(function(args){return resultSelector_1.apply(void 0,args);}));}return forkJoinInternal(sources,null);}function forkJoinInternal(sources,keys){return new Observable(function(subscriber){var len=sources.length;if(len===0){subscriber.complete();return;}var values=new Array(len);var completed=0;var emitted=0;var _loop_1=function _loop_1(i){var source=from(sources[i]);var hasValue=false;subscriber.add(source.subscribe({next:function next(value){if(!hasValue){hasValue=true;emitted++;}values[i]=value;},error:function error(err){return subscriber.error(err);},complete:function complete(){completed++;if(completed===len||!hasValue){if(emitted===len){subscriber.next(keys?keys.reduce(function(result,key,i){return result[key]=values[i],result;},{}):values);}subscriber.complete();}}}));};for(var i=0;i<len;i++){_loop_1(i);}});}/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */function fromEvent(target,eventName,options,resultSelector){if(isFunction(options)){resultSelector=options;options=undefined;}if(resultSelector){return fromEvent(target,eventName,options).pipe(map(function(args){return isArray(args)?resultSelector.apply(void 0,args):resultSelector(args);}));}return new Observable(function(subscriber){function handler(e){if(arguments.length>1){subscriber.next(Array.prototype.slice.call(arguments));}else{subscriber.next(e);}}setupSubscription(target,eventName,handler,subscriber,options);});}function setupSubscription(sourceObj,eventName,handler,subscriber,options){var unsubscribe;if(isEventTarget(sourceObj)){var source_1=sourceObj;sourceObj.addEventListener(eventName,handler,options);unsubscribe=function unsubscribe(){return source_1.removeEventListener(eventName,handler,options);};}else if(isJQueryStyleEventEmitter(sourceObj)){var source_2=sourceObj;sourceObj.on(eventName,handler);unsubscribe=function unsubscribe(){return source_2.off(eventName,handler);};}else if(isNodeStyleEventEmitter(sourceObj)){var source_3=sourceObj;sourceObj.addListener(eventName,handler);unsubscribe=function unsubscribe(){return source_3.removeListener(eventName,handler);};}else if(sourceObj&&sourceObj.length){for(var i=0,len=sourceObj.length;i<len;i++){setupSubscription(sourceObj[i],eventName,handler,subscriber,options);}}else{throw new TypeError('Invalid event target');}subscriber.add(unsubscribe);}function isNodeStyleEventEmitter(sourceObj){return sourceObj&&typeof sourceObj.addListener==='function'&&typeof sourceObj.removeListener==='function';}function isJQueryStyleEventEmitter(sourceObj){return sourceObj&&typeof sourceObj.on==='function'&&typeof sourceObj.off==='function';}function isEventTarget(sourceObj){return sourceObj&&typeof sourceObj.addEventListener==='function'&&typeof sourceObj.removeEventListener==='function';}/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */function fromEventPattern(addHandler,removeHandler,resultSelector){if(resultSelector){return fromEventPattern(addHandler,removeHandler).pipe(map(function(args){return isArray(args)?resultSelector.apply(void 0,args):resultSelector(args);}));}return new Observable(function(subscriber){var handler=function handler(){var e=[];for(var _i=0;_i<arguments.length;_i++){e[_i]=arguments[_i];}return subscriber.next(e.length===1?e[0]:e);};var retValue;try{retValue=addHandler(handler);}catch(err){subscriber.error(err);return undefined;}if(!isFunction(removeHandler)){return undefined;}return function(){return removeHandler(handler,retValue);};});}/** PURE_IMPORTS_START _Observable,_util_identity,_util_isScheduler PURE_IMPORTS_END */function generate(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler){var resultSelector;var initialState;if(arguments.length==1){var options=initialStateOrOptions;initialState=options.initialState;condition=options.condition;iterate=options.iterate;resultSelector=options.resultSelector||identity;scheduler=options.scheduler;}else if(resultSelectorOrObservable===undefined||isScheduler(resultSelectorOrObservable)){initialState=initialStateOrOptions;resultSelector=identity;scheduler=resultSelectorOrObservable;}else{initialState=initialStateOrOptions;resultSelector=resultSelectorOrObservable;}return new Observable(function(subscriber){var state=initialState;if(scheduler){return scheduler.schedule(dispatch$4,0,{subscriber:subscriber,iterate:iterate,condition:condition,resultSelector:resultSelector,state:state});}do{if(condition){var conditionResult=void 0;try{conditionResult=condition(state);}catch(err){subscriber.error(err);return undefined;}if(!conditionResult){subscriber.complete();break;}}var value=void 0;try{value=resultSelector(state);}catch(err){subscriber.error(err);return undefined;}subscriber.next(value);if(subscriber.closed){break;}try{state=iterate(state);}catch(err){subscriber.error(err);return undefined;}}while(true);return undefined;});}function dispatch$4(state){var subscriber=state.subscriber,condition=state.condition;if(subscriber.closed){return undefined;}if(state.needIterate){try{state.state=state.iterate(state.state);}catch(err){subscriber.error(err);return undefined;}}else{state.needIterate=true;}if(condition){var conditionResult=void 0;try{conditionResult=condition(state.state);}catch(err){subscriber.error(err);return undefined;}if(!conditionResult){subscriber.complete();return undefined;}if(subscriber.closed){return undefined;}}var value;try{value=state.resultSelector(state.state);}catch(err){subscriber.error(err);return undefined;}if(subscriber.closed){return undefined;}subscriber.next(value);if(subscriber.closed){return undefined;}return this.schedule(state);}/** PURE_IMPORTS_START _defer,_empty PURE_IMPORTS_END */function iif(condition,trueResult,falseResult){if(trueResult===void 0){trueResult=EMPTY;}if(falseResult===void 0){falseResult=EMPTY;}return defer(function(){return condition()?trueResult:falseResult;});}/** PURE_IMPORTS_START _isArray PURE_IMPORTS_END */function isNumeric(val){return!isArray(val)&&val-parseFloat(val)+1>=0;}/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric PURE_IMPORTS_END */function interval(period,scheduler){if(period===void 0){period=0;}if(scheduler===void 0){scheduler=async;}if(!isNumeric(period)||period<0){period=0;}if(!scheduler||typeof scheduler.schedule!=='function'){scheduler=async;}return new Observable(function(subscriber){subscriber.add(scheduler.schedule(dispatch$3,period,{subscriber:subscriber,counter:0,period:period}));return subscriber;});}function dispatch$3(state){var subscriber=state.subscriber,counter=state.counter,period=state.period;subscriber.next(counter);this.schedule({subscriber:subscriber,counter:counter+1,period:period},period);}/** PURE_IMPORTS_START _Observable,_util_isScheduler,_operators_mergeAll,_fromArray PURE_IMPORTS_END */function merge(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}var concurrent=Number.POSITIVE_INFINITY;var scheduler=null;var last=observables[observables.length-1];if(isScheduler(last)){scheduler=observables.pop();if(observables.length>1&&typeof observables[observables.length-1]==='number'){concurrent=observables.pop();}}else if(typeof last==='number'){concurrent=observables.pop();}if(scheduler===null&&observables.length===1&&observables[0]instanceof Observable){return observables[0];}return mergeAll(concurrent)(fromArray(observables,scheduler));}/** PURE_IMPORTS_START _Observable,_util_noop PURE_IMPORTS_END */var NEVER=/*@__PURE__*/new Observable(noop);function never(){return NEVER;}/** PURE_IMPORTS_START _Observable,_from,_util_isArray,_empty PURE_IMPORTS_END */function onErrorResumeNext(){var sources=[];for(var _i=0;_i<arguments.length;_i++){sources[_i]=arguments[_i];}if(sources.length===0){return EMPTY;}var first=sources[0],remainder=sources.slice(1);if(sources.length===1&&isArray(first)){return onErrorResumeNext.apply(void 0,first);}return new Observable(function(subscriber){var subNext=function subNext(){return subscriber.add(onErrorResumeNext.apply(void 0,remainder).subscribe(subscriber));};return from(first).subscribe({next:function next(value){subscriber.next(value);},error:subNext,complete:subNext});});}/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */function pairs(obj,scheduler){if(!scheduler){return new Observable(function(subscriber){var keys=Object.keys(obj);for(var i=0;i<keys.length&&!subscriber.closed;i++){var key=keys[i];if(obj.hasOwnProperty(key)){subscriber.next([key,obj[key]]);}}subscriber.complete();});}else{return new Observable(function(subscriber){var keys=Object.keys(obj);var subscription=new Subscription();subscription.add(scheduler.schedule(dispatch$2,0,{keys:keys,index:0,subscriber:subscriber,subscription:subscription,obj:obj}));return subscription;});}}function dispatch$2(state){var keys=state.keys,index=state.index,subscriber=state.subscriber,subscription=state.subscription,obj=state.obj;if(!subscriber.closed){if(index<keys.length){var key=keys[index];subscriber.next([key,obj[key]]);subscription.add(this.schedule({keys:keys,index:index+1,subscriber:subscriber,subscription:subscription,obj:obj}));}else{subscriber.complete();}}}/** PURE_IMPORTS_START  PURE_IMPORTS_END */function not$1(pred,thisArg){function notPred(){return!notPred.pred.apply(notPred.thisArg,arguments);}notPred.pred=pred;notPred.thisArg=thisArg;return notPred;}/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */function filter(predicate,thisArg){return function filterOperatorFunction(source){return source.lift(new FilterOperator(predicate,thisArg));};}var FilterOperator=/*@__PURE__*/function(){function FilterOperator(predicate,thisArg){this.predicate=predicate;this.thisArg=thisArg;}FilterOperator.prototype.call=function(subscriber,source){return source.subscribe(new FilterSubscriber(subscriber,this.predicate,this.thisArg));};return FilterOperator;}();var FilterSubscriber=/*@__PURE__*/function(_super){__extends(FilterSubscriber,_super);function FilterSubscriber(destination,predicate,thisArg){var _this=_super.call(this,destination)||this;_this.predicate=predicate;_this.thisArg=thisArg;_this.count=0;return _this;}FilterSubscriber.prototype._next=function(value){var result;try{result=this.predicate.call(this.thisArg,value,this.count++);}catch(err){this.destination.error(err);return;}if(result){this.destination.next(value);}};return FilterSubscriber;}(Subscriber);/** PURE_IMPORTS_START _util_not,_util_subscribeTo,_operators_filter,_Observable PURE_IMPORTS_END */function partition(source,predicate,thisArg){return[filter(predicate,thisArg)(new Observable(subscribeTo(source))),filter(not$1(predicate,thisArg))(new Observable(subscribeTo(source)))];}/** PURE_IMPORTS_START tslib,_util_isArray,_fromArray,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */function race(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}if(observables.length===1){if(isArray(observables[0])){observables=observables[0];}else{return observables[0];}}return fromArray(observables,undefined).lift(new RaceOperator());}var RaceOperator=/*@__PURE__*/function(){function RaceOperator(){}RaceOperator.prototype.call=function(subscriber,source){return source.subscribe(new RaceSubscriber(subscriber));};return RaceOperator;}();var RaceSubscriber=/*@__PURE__*/function(_super){__extends(RaceSubscriber,_super);function RaceSubscriber(destination){var _this=_super.call(this,destination)||this;_this.hasFirst=false;_this.observables=[];_this.subscriptions=[];return _this;}RaceSubscriber.prototype._next=function(observable){this.observables.push(observable);};RaceSubscriber.prototype._complete=function(){var observables=this.observables;var len=observables.length;if(len===0){this.destination.complete();}else{for(var i=0;i<len&&!this.hasFirst;i++){var observable=observables[i];var subscription=subscribeToResult(this,observable,undefined,i);if(this.subscriptions){this.subscriptions.push(subscription);}this.add(subscription);}this.observables=null;}};RaceSubscriber.prototype.notifyNext=function(_outerValue,innerValue,outerIndex){if(!this.hasFirst){this.hasFirst=true;for(var i=0;i<this.subscriptions.length;i++){if(i!==outerIndex){var subscription=this.subscriptions[i];subscription.unsubscribe();this.remove(subscription);}}this.subscriptions=null;}this.destination.next(innerValue);};return RaceSubscriber;}(OuterSubscriber);/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */function range(start,count,scheduler){if(start===void 0){start=0;}return new Observable(function(subscriber){if(count===undefined){count=start;start=0;}var index=0;var current=start;if(scheduler){return scheduler.schedule(dispatch$1,0,{index:index,count:count,start:start,subscriber:subscriber});}else{do{if(index++>=count){subscriber.complete();break;}subscriber.next(current++);if(subscriber.closed){break;}}while(true);}return undefined;});}function dispatch$1(state){var start=state.start,index=state.index,count=state.count,subscriber=state.subscriber;if(index>=count){subscriber.complete();return;}subscriber.next(start);if(subscriber.closed){return;}state.index=index+1;state.start=start+1;this.schedule(state);}/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */function timer(dueTime,periodOrScheduler,scheduler){if(dueTime===void 0){dueTime=0;}var period=-1;if(isNumeric(periodOrScheduler)){period=Number(periodOrScheduler)<1&&1||Number(periodOrScheduler);}else if(isScheduler(periodOrScheduler)){scheduler=periodOrScheduler;}if(!isScheduler(scheduler)){scheduler=async;}return new Observable(function(subscriber){var due=isNumeric(dueTime)?dueTime:+dueTime-scheduler.now();return scheduler.schedule(dispatch,due,{index:0,period:period,subscriber:subscriber});});}function dispatch(state){var index=state.index,period=state.period,subscriber=state.subscriber;subscriber.next(index);if(subscriber.closed){return;}else if(period===-1){return subscriber.complete();}state.index=index+1;this.schedule(state,period);}/** PURE_IMPORTS_START _Observable,_from,_empty PURE_IMPORTS_END */function using(resourceFactory,observableFactory){return new Observable(function(subscriber){var resource;try{resource=resourceFactory();}catch(err){subscriber.error(err);return undefined;}var result;try{result=observableFactory(resource);}catch(err){subscriber.error(err);return undefined;}var source=result?from(result):EMPTY;var subscription=source.subscribe(subscriber);return function(){subscription.unsubscribe();if(resource){resource.unsubscribe();}};});}/** PURE_IMPORTS_START tslib,_fromArray,_util_isArray,_Subscriber,_.._internal_symbol_iterator,_innerSubscribe PURE_IMPORTS_END */function zip(){var observables=[];for(var _i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i];}var resultSelector=observables[observables.length-1];if(typeof resultSelector==='function'){observables.pop();}return fromArray(observables,undefined).lift(new ZipOperator(resultSelector));}var ZipOperator=/*@__PURE__*/function(){function ZipOperator(resultSelector){this.resultSelector=resultSelector;}ZipOperator.prototype.call=function(subscriber,source){return source.subscribe(new ZipSubscriber(subscriber,this.resultSelector));};return ZipOperator;}();var ZipSubscriber=/*@__PURE__*/function(_super){__extends(ZipSubscriber,_super);function ZipSubscriber(destination,resultSelector,values){var _this=_super.call(this,destination)||this;_this.resultSelector=resultSelector;_this.iterators=[];_this.active=0;_this.resultSelector=typeof resultSelector==='function'?resultSelector:undefined;return _this;}ZipSubscriber.prototype._next=function(value){var iterators=this.iterators;if(isArray(value)){iterators.push(new StaticArrayIterator(value));}else if(typeof value[iterator]==='function'){iterators.push(new StaticIterator(value[iterator]()));}else{iterators.push(new ZipBufferIterator(this.destination,this,value));}};ZipSubscriber.prototype._complete=function(){var iterators=this.iterators;var len=iterators.length;this.unsubscribe();if(len===0){this.destination.complete();return;}this.active=len;for(var i=0;i<len;i++){var iterator=iterators[i];if(iterator.stillUnsubscribed){var destination=this.destination;destination.add(iterator.subscribe());}else{this.active--;}}};ZipSubscriber.prototype.notifyInactive=function(){this.active--;if(this.active===0){this.destination.complete();}};ZipSubscriber.prototype.checkIterators=function(){var iterators=this.iterators;var len=iterators.length;var destination=this.destination;for(var i=0;i<len;i++){var iterator=iterators[i];if(typeof iterator.hasValue==='function'&&!iterator.hasValue()){return;}}var shouldComplete=false;var args=[];for(var i=0;i<len;i++){var iterator=iterators[i];var result=iterator.next();if(iterator.hasCompleted()){shouldComplete=true;}if(result.done){destination.complete();return;}args.push(result.value);}if(this.resultSelector){this._tryresultSelector(args);}else{destination.next(args);}if(shouldComplete){destination.complete();}};ZipSubscriber.prototype._tryresultSelector=function(args){var result;try{result=this.resultSelector.apply(this,args);}catch(err){this.destination.error(err);return;}this.destination.next(result);};return ZipSubscriber;}(Subscriber);var StaticIterator=/*@__PURE__*/function(){function StaticIterator(iterator){this.iterator=iterator;this.nextResult=iterator.next();}StaticIterator.prototype.hasValue=function(){return true;};StaticIterator.prototype.next=function(){var result=this.nextResult;this.nextResult=this.iterator.next();return result;};StaticIterator.prototype.hasCompleted=function(){var nextResult=this.nextResult;return Boolean(nextResult&&nextResult.done);};return StaticIterator;}();var StaticArrayIterator=/*@__PURE__*/function(){function StaticArrayIterator(array){this.array=array;this.index=0;this.length=0;this.length=array.length;}StaticArrayIterator.prototype[iterator]=function(){return this;};StaticArrayIterator.prototype.next=function(value){var i=this.index++;var array=this.array;return i<this.length?{value:array[i],done:false}:{value:null,done:true};};StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index;};StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index;};return StaticArrayIterator;}();var ZipBufferIterator=/*@__PURE__*/function(_super){__extends(ZipBufferIterator,_super);function ZipBufferIterator(destination,parent,observable){var _this=_super.call(this,destination)||this;_this.parent=parent;_this.observable=observable;_this.stillUnsubscribed=true;_this.buffer=[];_this.isComplete=false;return _this;}ZipBufferIterator.prototype[iterator]=function(){return this;};ZipBufferIterator.prototype.next=function(){var buffer=this.buffer;if(buffer.length===0&&this.isComplete){return{value:null,done:true};}else{return{value:buffer.shift(),done:false};}};ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0;};ZipBufferIterator.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete;};ZipBufferIterator.prototype.notifyComplete=function(){if(this.buffer.length>0){this.isComplete=true;this.parent.notifyInactive();}else{this.destination.complete();}};ZipBufferIterator.prototype.notifyNext=function(innerValue){this.buffer.push(innerValue);this.parent.checkIterators();};ZipBufferIterator.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this));};return ZipBufferIterator;}(SimpleOuterSubscriber);/** PURE_IMPORTS_START  PURE_IMPORTS_END */var _esm5=/*#__PURE__*/Object.freeze({__proto__:null,Observable:Observable,ConnectableObservable:ConnectableObservable,GroupedObservable:GroupedObservable,observable:observable,Subject:Subject$1,BehaviorSubject:BehaviorSubject,ReplaySubject:ReplaySubject,AsyncSubject:AsyncSubject,asap:asap,asapScheduler:asapScheduler,async:async,asyncScheduler:asyncScheduler,queue:queue,queueScheduler:queueScheduler,animationFrame:animationFrame,animationFrameScheduler:animationFrameScheduler,VirtualTimeScheduler:VirtualTimeScheduler,VirtualAction:VirtualAction,Scheduler:Scheduler,Subscription:Subscription,Subscriber:Subscriber,Notification:Notification,get NotificationKind(){return NotificationKind;},pipe:pipe,noop:noop,identity:identity,isObservable:isObservable$2,ArgumentOutOfRangeError:ArgumentOutOfRangeError,EmptyError:EmptyError,ObjectUnsubscribedError:ObjectUnsubscribedError,UnsubscriptionError:UnsubscriptionError,TimeoutError:TimeoutError,bindCallback:bindCallback,bindNodeCallback:bindNodeCallback,combineLatest:combineLatest,concat:concat,defer:defer,empty:empty$1,forkJoin:forkJoin,from:from,fromEvent:fromEvent,fromEventPattern:fromEventPattern,generate:generate,iif:iif,interval:interval,merge:merge,never:never,of:of,onErrorResumeNext:onErrorResumeNext,pairs:pairs,partition:partition,race:race,range:range,throwError:throwError,timer:timer,using:using,zip:zip,scheduled:scheduled,EMPTY:EMPTY,NEVER:NEVER,config:config});var SilentRenderer=/*#__PURE__*/function(){function SilentRenderer(){_classCallCheck(this,SilentRenderer);}_createClass(SilentRenderer,[{key:"render",value:function render(){}},{key:"end",value:function end(){}}],[{key:"nonTTY",get:function get(){return true;}}]);return SilentRenderer;}();var listrSilentRenderer=SilentRenderer;var matchOperatorsRe=/[|\\{}()[\]^$+*?.]/g;var escapeStringRegexp=function escapeStringRegexp(str){if(typeof str!=='string'){throw new TypeError('Expected a string');}return str.replace(matchOperatorsRe,'\\$&');};var platform$2=process.platform;var main$4={tick:'✔',cross:'✖',star:'★',square:'▇',squareSmall:'◻',squareSmallFilled:'◼',play:'▶',circle:'◯',circleFilled:'◉',circleDotted:'◌',circleDouble:'◎',circleCircle:'ⓞ',circleCross:'ⓧ',circlePipe:'Ⓘ',circleQuestionMark:'?⃝',bullet:'●',dot:'․',line:'─',ellipsis:'…',pointer:'❯',pointerSmall:'›',info:'ℹ',warning:'⚠',hamburger:'☰',smiley:'㋡',mustache:'෴',heart:'♥',arrowUp:'↑',arrowDown:'↓',arrowLeft:'←',arrowRight:'→',radioOn:'◉',radioOff:'◯',checkboxOn:'☒',checkboxOff:'☐',checkboxCircleOn:'ⓧ',checkboxCircleOff:'Ⓘ',questionMarkPrefix:'?⃝',oneHalf:'½',oneThird:'⅓',oneQuarter:'¼',oneFifth:'⅕',oneSixth:'⅙',oneSeventh:'⅐',oneEighth:'⅛',oneNinth:'⅑',oneTenth:'⅒',twoThirds:'⅔',twoFifths:'⅖',threeQuarters:'¾',threeFifths:'⅗',threeEighths:'⅜',fourFifths:'⅘',fiveSixths:'⅚',fiveEighths:'⅝',sevenEighths:'⅞'};var win$2={tick:'√',cross:'×',star:'*',square:'█',squareSmall:'[ ]',squareSmallFilled:'[█]',play:'►',circle:'( )',circleFilled:'(*)',circleDotted:'( )',circleDouble:'( )',circleCircle:'(○)',circleCross:'(×)',circlePipe:'(│)',circleQuestionMark:'(?)',bullet:'*',dot:'.',line:'─',ellipsis:'...',pointer:'>',pointerSmall:'»',info:'i',warning:'‼',hamburger:'≡',smiley:'☺',mustache:'┌─┐',heart:main$4.heart,arrowUp:main$4.arrowUp,arrowDown:main$4.arrowDown,arrowLeft:main$4.arrowLeft,arrowRight:main$4.arrowRight,radioOn:'(*)',radioOff:'( )',checkboxOn:'[×]',checkboxOff:'[ ]',checkboxCircleOn:'(×)',checkboxCircleOff:'( )',questionMarkPrefix:'？',oneHalf:'1/2',oneThird:'1/3',oneQuarter:'1/4',oneFifth:'1/5',oneSixth:'1/6',oneSeventh:'1/7',oneEighth:'1/8',oneNinth:'1/9',oneTenth:'1/10',twoThirds:'2/3',twoFifths:'2/5',threeQuarters:'3/4',threeFifths:'3/5',threeEighths:'3/8',fourFifths:'4/5',fiveSixths:'5/6',fiveEighths:'5/8',sevenEighths:'7/8'};if(platform$2==='linux'){// the main one doesn't look that good on Ubuntu
main$4.questionMarkPrefix='?';}var figures$1=platform$2==='win32'?win$2:main$4;var fn$1=function fn$1(str){if(figures$1===main$4){return str;}Object.keys(main$4).forEach(function(key){if(main$4[key]===figures$1[key]){return;}str=str.replace(new RegExp(escapeStringRegexp(main$4[key]),'g'),figures$1[key]);});return str;};var figures_1$1=Object.assign(fn$1,figures$1);var mimicFn$1=function mimicFn$1(to,from){// TODO: use `Reflect.ownKeys()` when targeting Node.js 6
var _iterator=_createForOfIteratorHelper(Object.getOwnPropertyNames(from).concat(Object.getOwnPropertySymbols(from))),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var prop=_step.value;Object.defineProperty(to,prop,Object.getOwnPropertyDescriptor(from,prop));}}catch(err){_iterator.e(err);}finally{_iterator.f();}return to;};var onetime$1=function onetime$1(fn,opts){// TODO: Remove this in v3
if(opts===true){throw new TypeError('The second argument is now an options object');}if(typeof fn!=='function'){throw new TypeError('Expected a function');}opts=opts||{};var ret;var called=false;var fnName=fn.displayName||fn.name||'<anonymous>';var onetime=function onetime(){if(called){if(opts["throw"]===true){throw new Error("Function `".concat(fnName,"` can only be called once"));}return ret;}called=true;ret=fn.apply(this,arguments);fn=null;return ret;};mimicFn$1(onetime,fn);return onetime;};var signals$1=createCommonjsModule(function(module){// This is not the set of all possible signals.
//
// It IS, however, the set of all signals that trigger
// an exit on either Linux or BSD systems.  Linux is a
// superset of the signal names supported on BSD, and
// the unknown signals just fail to register, so we can
// catch that easily enough.
//
// Don't bother with SIGKILL.  It's uncatchable, which
// means that we can't fire any callbacks anyway.
//
// If a user does happen to register a handler on a non-
// fatal signal like SIGWINCH or something, and then
// exit, it'll end up firing `process.emit('exit')`, so
// the handler will be fired anyway.
//
// SIGBUS, SIGFPE, SIGSEGV and SIGILL, when not raised
// artificially, inherently leave the process in a
// state from which it is not safe to try and enter JS
// listeners.
module.exports=['SIGABRT','SIGALRM','SIGHUP','SIGINT','SIGTERM'];if(process.platform!=='win32'){module.exports.push('SIGVTALRM','SIGXCPU','SIGXFSZ','SIGUSR2','SIGTRAP','SIGSYS','SIGQUIT','SIGIOT'// should detect profiler and enable/disable accordingly.
// see #21
// 'SIGPROF'
);}if(process.platform==='linux'){module.exports.push('SIGIO','SIGPOLL','SIGPWR','SIGSTKFLT','SIGUNUSED');}});var signalExit=createCommonjsModule(function(module){// Note: since nyc uses this module to output coverage, any lines
// that are in the direct sync flow of nyc's outputCoverage are
// ignored, since we can never get coverage for them.
// grab a reference to node's real process object right away
var process=commonjsGlobal.process;// some kind of non-node environment, just no-op
if(_typeof(process)!=='object'||!process){module.exports=function(){};}else{var assert=assert__default["default"];var signals=signals$1;var isWin=/^win/i.test(process.platform);var EE=events__default["default"];/* istanbul ignore if */if(typeof EE!=='function'){EE=EE.EventEmitter;}var emitter;if(process.__signal_exit_emitter__){emitter=process.__signal_exit_emitter__;}else{emitter=process.__signal_exit_emitter__=new EE();emitter.count=0;emitter.emitted={};}// Because this emitter is a global, we have to check to see if a
// previous version of this library failed to enable infinite listeners.
// I know what you're about to say.  But literally everything about
// signal-exit is a compromise with evil.  Get used to it.
if(!emitter.infinite){emitter.setMaxListeners(Infinity);emitter.infinite=true;}module.exports=function(cb,opts){if(commonjsGlobal.process!==process){return;}assert.equal(_typeof(cb),'function','a callback must be provided for exit handler');if(loaded===false){load();}var ev='exit';if(opts&&opts.alwaysLast){ev='afterexit';}var remove=function remove(){emitter.removeListener(ev,cb);if(emitter.listeners('exit').length===0&&emitter.listeners('afterexit').length===0){unload();}};emitter.on(ev,cb);return remove;};var unload=function unload(){if(!loaded||commonjsGlobal.process!==process){return;}loaded=false;signals.forEach(function(sig){try{process.removeListener(sig,sigListeners[sig]);}catch(er){}});process.emit=originalProcessEmit;process.reallyExit=originalProcessReallyExit;emitter.count-=1;};module.exports.unload=unload;var emit=function emit(event,code,signal){if(emitter.emitted[event]){return;}emitter.emitted[event]=true;emitter.emit(event,code,signal);};// { <signal>: <listener fn>, ... }
var sigListeners={};signals.forEach(function(sig){sigListeners[sig]=function listener(){if(process!==commonjsGlobal.process){return;}// If there are no other listeners, an exit is coming!
// Simplest way: remove us and then re-send the signal.
// We know that this will kill the process, so we can
// safely emit now.
var listeners=process.listeners(sig);if(listeners.length===emitter.count){unload();emit('exit',null,sig);/* istanbul ignore next */emit('afterexit',null,sig);/* istanbul ignore next */if(isWin&&sig==='SIGHUP'){// "SIGHUP" throws an `ENOSYS` error on Windows,
// so use a supported signal instead
sig='SIGINT';}process.kill(process.pid,sig);}};});module.exports.signals=function(){return signals;};var loaded=false;var load=function load(){if(loaded||process!==commonjsGlobal.process){return;}loaded=true;// This is the number of onSignalExit's that are in play.
// It's important so that we can count the correct number of
// listeners on signals, and don't wait for the other one to
// handle it instead of us.
emitter.count+=1;signals=signals.filter(function(sig){try{process.on(sig,sigListeners[sig]);return true;}catch(er){return false;}});process.emit=processEmit;process.reallyExit=processReallyExit;};module.exports.load=load;var originalProcessReallyExit=process.reallyExit;var processReallyExit=function processReallyExit(code){if(process!==commonjsGlobal.process){return;}process.exitCode=code||0;emit('exit',process.exitCode,null);/* istanbul ignore next */emit('afterexit',process.exitCode,null);/* istanbul ignore next */originalProcessReallyExit.call(process,process.exitCode);};var originalProcessEmit=process.emit;var processEmit=function processEmit(ev,arg){if(ev==='exit'&&process===commonjsGlobal.process){if(arg!==undefined){process.exitCode=arg;}var ret=originalProcessEmit.apply(this,arguments);emit('exit',process.exitCode,null);/* istanbul ignore next */emit('afterexit',process.exitCode,null);return ret;}else{return originalProcessEmit.apply(this,arguments);}};}});signalExit.unload;signalExit.signals;signalExit.load;var restoreCursor=onetime$1(function(){signalExit(function(){process.stderr.write("\x1B[?25h");},{alwaysLast:true});});var cliCursor=createCommonjsModule(function(module,exports){var hidden=false;exports.show=function(stream){var s=stream||process.stderr;if(!s.isTTY){return;}hidden=false;s.write("\x1B[?25h");};exports.hide=function(stream){var s=stream||process.stderr;if(!s.isTTY){return;}restoreCursor();hidden=true;s.write("\x1B[?25l");};exports.toggle=function(force,stream){if(force!==undefined){hidden=force;}if(hidden){exports.show(stream);}else{exports.hide(stream);}};});cliCursor.show;cliCursor.hide;cliCursor.toggle;var colorName={"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aqua":[0,255,255],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"black":[0,0,0],"blanchedalmond":[255,235,205],"blue":[0,0,255],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"fuchsia":[255,0,255],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"gray":[128,128,128],"green":[0,128,0],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"lime":[0,255,0],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"maroon":[128,0,0],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"navy":[0,0,128],"oldlace":[253,245,230],"olive":[128,128,0],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"purple":[128,0,128],"rebeccapurple":[102,51,153],"red":[255,0,0],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"silver":[192,192,192],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"teal":[0,128,128],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"white":[255,255,255],"whitesmoke":[245,245,245],"yellow":[255,255,0],"yellowgreen":[154,205,50]};var conversions=createCommonjsModule(function(module){/* MIT license */ // NOTE: conversions should only return primitive values (i.e. arrays, or
//       values that give correct `typeof` results).
//       do not use box values types (i.e. Number(), String(), etc.)
var reverseKeywords={};for(var key in colorName){if(colorName.hasOwnProperty(key)){reverseKeywords[colorName[key]]=key;}}var convert=module.exports={rgb:{channels:3,labels:'rgb'},hsl:{channels:3,labels:'hsl'},hsv:{channels:3,labels:'hsv'},hwb:{channels:3,labels:'hwb'},cmyk:{channels:4,labels:'cmyk'},xyz:{channels:3,labels:'xyz'},lab:{channels:3,labels:'lab'},lch:{channels:3,labels:'lch'},hex:{channels:1,labels:['hex']},keyword:{channels:1,labels:['keyword']},ansi16:{channels:1,labels:['ansi16']},ansi256:{channels:1,labels:['ansi256']},hcg:{channels:3,labels:['h','c','g']},apple:{channels:3,labels:['r16','g16','b16']},gray:{channels:1,labels:['gray']}};// hide .channels and .labels properties
for(var model in convert){if(convert.hasOwnProperty(model)){if(!('channels'in convert[model])){throw new Error('missing channels property: '+model);}if(!('labels'in convert[model])){throw new Error('missing channel labels property: '+model);}if(convert[model].labels.length!==convert[model].channels){throw new Error('channel and label counts mismatch: '+model);}var channels=convert[model].channels;var labels=convert[model].labels;delete convert[model].channels;delete convert[model].labels;Object.defineProperty(convert[model],'channels',{value:channels});Object.defineProperty(convert[model],'labels',{value:labels});}}convert.rgb.hsl=function(rgb){var r=rgb[0]/255;var g=rgb[1]/255;var b=rgb[2]/255;var min=Math.min(r,g,b);var max=Math.max(r,g,b);var delta=max-min;var h;var s;var l;if(max===min){h=0;}else if(r===max){h=(g-b)/delta;}else if(g===max){h=2+(b-r)/delta;}else if(b===max){h=4+(r-g)/delta;}h=Math.min(h*60,360);if(h<0){h+=360;}l=(min+max)/2;if(max===min){s=0;}else if(l<=0.5){s=delta/(max+min);}else{s=delta/(2-max-min);}return[h,s*100,l*100];};convert.rgb.hsv=function(rgb){var rdif;var gdif;var bdif;var h;var s;var r=rgb[0]/255;var g=rgb[1]/255;var b=rgb[2]/255;var v=Math.max(r,g,b);var diff=v-Math.min(r,g,b);var diffc=function diffc(c){return(v-c)/6/diff+1/2;};if(diff===0){h=s=0;}else{s=diff/v;rdif=diffc(r);gdif=diffc(g);bdif=diffc(b);if(r===v){h=bdif-gdif;}else if(g===v){h=1/3+rdif-bdif;}else if(b===v){h=2/3+gdif-rdif;}if(h<0){h+=1;}else if(h>1){h-=1;}}return[h*360,s*100,v*100];};convert.rgb.hwb=function(rgb){var r=rgb[0];var g=rgb[1];var b=rgb[2];var h=convert.rgb.hsl(rgb)[0];var w=1/255*Math.min(r,Math.min(g,b));b=1-1/255*Math.max(r,Math.max(g,b));return[h,w*100,b*100];};convert.rgb.cmyk=function(rgb){var r=rgb[0]/255;var g=rgb[1]/255;var b=rgb[2]/255;var c;var m;var y;var k;k=Math.min(1-r,1-g,1-b);c=(1-r-k)/(1-k)||0;m=(1-g-k)/(1-k)||0;y=(1-b-k)/(1-k)||0;return[c*100,m*100,y*100,k*100];};/**
 * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance
 * */function comparativeDistance(x,y){return Math.pow(x[0]-y[0],2)+Math.pow(x[1]-y[1],2)+Math.pow(x[2]-y[2],2);}convert.rgb.keyword=function(rgb){var reversed=reverseKeywords[rgb];if(reversed){return reversed;}var currentClosestDistance=Infinity;var currentClosestKeyword;for(var keyword in colorName){if(colorName.hasOwnProperty(keyword)){var value=colorName[keyword];// Compute comparative distance
var distance=comparativeDistance(rgb,value);// Check if its less, if so set as closest
if(distance<currentClosestDistance){currentClosestDistance=distance;currentClosestKeyword=keyword;}}}return currentClosestKeyword;};convert.keyword.rgb=function(keyword){return colorName[keyword];};convert.rgb.xyz=function(rgb){var r=rgb[0]/255;var g=rgb[1]/255;var b=rgb[2]/255;// assume sRGB
r=r>0.04045?Math.pow((r+0.055)/1.055,2.4):r/12.92;g=g>0.04045?Math.pow((g+0.055)/1.055,2.4):g/12.92;b=b>0.04045?Math.pow((b+0.055)/1.055,2.4):b/12.92;var x=r*0.4124+g*0.3576+b*0.1805;var y=r*0.2126+g*0.7152+b*0.0722;var z=r*0.0193+g*0.1192+b*0.9505;return[x*100,y*100,z*100];};convert.rgb.lab=function(rgb){var xyz=convert.rgb.xyz(rgb);var x=xyz[0];var y=xyz[1];var z=xyz[2];var l;var a;var b;x/=95.047;y/=100;z/=108.883;x=x>0.008856?Math.pow(x,1/3):7.787*x+16/116;y=y>0.008856?Math.pow(y,1/3):7.787*y+16/116;z=z>0.008856?Math.pow(z,1/3):7.787*z+16/116;l=116*y-16;a=500*(x-y);b=200*(y-z);return[l,a,b];};convert.hsl.rgb=function(hsl){var h=hsl[0]/360;var s=hsl[1]/100;var l=hsl[2]/100;var t1;var t2;var t3;var rgb;var val;if(s===0){val=l*255;return[val,val,val];}if(l<0.5){t2=l*(1+s);}else{t2=l+s-l*s;}t1=2*l-t2;rgb=[0,0,0];for(var i=0;i<3;i++){t3=h+1/3*-(i-1);if(t3<0){t3++;}if(t3>1){t3--;}if(6*t3<1){val=t1+(t2-t1)*6*t3;}else if(2*t3<1){val=t2;}else if(3*t3<2){val=t1+(t2-t1)*(2/3-t3)*6;}else{val=t1;}rgb[i]=val*255;}return rgb;};convert.hsl.hsv=function(hsl){var h=hsl[0];var s=hsl[1]/100;var l=hsl[2]/100;var smin=s;var lmin=Math.max(l,0.01);var sv;var v;l*=2;s*=l<=1?l:2-l;smin*=lmin<=1?lmin:2-lmin;v=(l+s)/2;sv=l===0?2*smin/(lmin+smin):2*s/(l+s);return[h,sv*100,v*100];};convert.hsv.rgb=function(hsv){var h=hsv[0]/60;var s=hsv[1]/100;var v=hsv[2]/100;var hi=Math.floor(h)%6;var f=h-Math.floor(h);var p=255*v*(1-s);var q=255*v*(1-s*f);var t=255*v*(1-s*(1-f));v*=255;switch(hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];case 5:return[v,p,q];}};convert.hsv.hsl=function(hsv){var h=hsv[0];var s=hsv[1]/100;var v=hsv[2]/100;var vmin=Math.max(v,0.01);var lmin;var sl;var l;l=(2-s)*v;lmin=(2-s)*vmin;sl=s*vmin;sl/=lmin<=1?lmin:2-lmin;sl=sl||0;l/=2;return[h,sl*100,l*100];};// http://dev.w3.org/csswg/css-color/#hwb-to-rgb
convert.hwb.rgb=function(hwb){var h=hwb[0]/360;var wh=hwb[1]/100;var bl=hwb[2]/100;var ratio=wh+bl;var i;var v;var f;var n;// wh + bl cant be > 1
if(ratio>1){wh/=ratio;bl/=ratio;}i=Math.floor(6*h);v=1-bl;f=6*h-i;if((i&0x01)!==0){f=1-f;}n=wh+f*(v-wh);// linear interpolation
var r;var g;var b;switch(i){default:case 6:case 0:r=v;g=n;b=wh;break;case 1:r=n;g=v;b=wh;break;case 2:r=wh;g=v;b=n;break;case 3:r=wh;g=n;b=v;break;case 4:r=n;g=wh;b=v;break;case 5:r=v;g=wh;b=n;break;}return[r*255,g*255,b*255];};convert.cmyk.rgb=function(cmyk){var c=cmyk[0]/100;var m=cmyk[1]/100;var y=cmyk[2]/100;var k=cmyk[3]/100;var r;var g;var b;r=1-Math.min(1,c*(1-k)+k);g=1-Math.min(1,m*(1-k)+k);b=1-Math.min(1,y*(1-k)+k);return[r*255,g*255,b*255];};convert.xyz.rgb=function(xyz){var x=xyz[0]/100;var y=xyz[1]/100;var z=xyz[2]/100;var r;var g;var b;r=x*3.2406+y*-1.5372+z*-0.4986;g=x*-0.9689+y*1.8758+z*0.0415;b=x*0.0557+y*-0.2040+z*1.0570;// assume sRGB
r=r>0.0031308?1.055*Math.pow(r,1.0/2.4)-0.055:r*12.92;g=g>0.0031308?1.055*Math.pow(g,1.0/2.4)-0.055:g*12.92;b=b>0.0031308?1.055*Math.pow(b,1.0/2.4)-0.055:b*12.92;r=Math.min(Math.max(0,r),1);g=Math.min(Math.max(0,g),1);b=Math.min(Math.max(0,b),1);return[r*255,g*255,b*255];};convert.xyz.lab=function(xyz){var x=xyz[0];var y=xyz[1];var z=xyz[2];var l;var a;var b;x/=95.047;y/=100;z/=108.883;x=x>0.008856?Math.pow(x,1/3):7.787*x+16/116;y=y>0.008856?Math.pow(y,1/3):7.787*y+16/116;z=z>0.008856?Math.pow(z,1/3):7.787*z+16/116;l=116*y-16;a=500*(x-y);b=200*(y-z);return[l,a,b];};convert.lab.xyz=function(lab){var l=lab[0];var a=lab[1];var b=lab[2];var x;var y;var z;y=(l+16)/116;x=a/500+y;z=y-b/200;var y2=Math.pow(y,3);var x2=Math.pow(x,3);var z2=Math.pow(z,3);y=y2>0.008856?y2:(y-16/116)/7.787;x=x2>0.008856?x2:(x-16/116)/7.787;z=z2>0.008856?z2:(z-16/116)/7.787;x*=95.047;y*=100;z*=108.883;return[x,y,z];};convert.lab.lch=function(lab){var l=lab[0];var a=lab[1];var b=lab[2];var hr;var h;var c;hr=Math.atan2(b,a);h=hr*360/2/Math.PI;if(h<0){h+=360;}c=Math.sqrt(a*a+b*b);return[l,c,h];};convert.lch.lab=function(lch){var l=lch[0];var c=lch[1];var h=lch[2];var a;var b;var hr;hr=h/360*2*Math.PI;a=c*Math.cos(hr);b=c*Math.sin(hr);return[l,a,b];};convert.rgb.ansi16=function(args){var r=args[0];var g=args[1];var b=args[2];var value=1 in arguments?arguments[1]:convert.rgb.hsv(args)[2];// hsv -> ansi16 optimization
value=Math.round(value/50);if(value===0){return 30;}var ansi=30+(Math.round(b/255)<<2|Math.round(g/255)<<1|Math.round(r/255));if(value===2){ansi+=60;}return ansi;};convert.hsv.ansi16=function(args){// optimization here; we already know the value and don't need to get
// it converted for us.
return convert.rgb.ansi16(convert.hsv.rgb(args),args[2]);};convert.rgb.ansi256=function(args){var r=args[0];var g=args[1];var b=args[2];// we use the extended greyscale palette here, with the exception of
// black and white. normal palette only has 4 greyscale shades.
if(r===g&&g===b){if(r<8){return 16;}if(r>248){return 231;}return Math.round((r-8)/247*24)+232;}var ansi=16+36*Math.round(r/255*5)+6*Math.round(g/255*5)+Math.round(b/255*5);return ansi;};convert.ansi16.rgb=function(args){var color=args%10;// handle greyscale
if(color===0||color===7){if(args>50){color+=3.5;}color=color/10.5*255;return[color,color,color];}var mult=(~~(args>50)+1)*0.5;var r=(color&1)*mult*255;var g=(color>>1&1)*mult*255;var b=(color>>2&1)*mult*255;return[r,g,b];};convert.ansi256.rgb=function(args){// handle greyscale
if(args>=232){var c=(args-232)*10+8;return[c,c,c];}args-=16;var rem;var r=Math.floor(args/36)/5*255;var g=Math.floor((rem=args%36)/6)/5*255;var b=rem%6/5*255;return[r,g,b];};convert.rgb.hex=function(args){var integer=((Math.round(args[0])&0xFF)<<16)+((Math.round(args[1])&0xFF)<<8)+(Math.round(args[2])&0xFF);var string=integer.toString(16).toUpperCase();return'000000'.substring(string.length)+string;};convert.hex.rgb=function(args){var match=args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!match){return[0,0,0];}var colorString=match[0];if(match[0].length===3){colorString=colorString.split('').map(function(_char){return _char+_char;}).join('');}var integer=parseInt(colorString,16);var r=integer>>16&0xFF;var g=integer>>8&0xFF;var b=integer&0xFF;return[r,g,b];};convert.rgb.hcg=function(rgb){var r=rgb[0]/255;var g=rgb[1]/255;var b=rgb[2]/255;var max=Math.max(Math.max(r,g),b);var min=Math.min(Math.min(r,g),b);var chroma=max-min;var grayscale;var hue;if(chroma<1){grayscale=min/(1-chroma);}else{grayscale=0;}if(chroma<=0){hue=0;}else if(max===r){hue=(g-b)/chroma%6;}else if(max===g){hue=2+(b-r)/chroma;}else{hue=4+(r-g)/chroma+4;}hue/=6;hue%=1;return[hue*360,chroma*100,grayscale*100];};convert.hsl.hcg=function(hsl){var s=hsl[1]/100;var l=hsl[2]/100;var c=1;var f=0;if(l<0.5){c=2.0*s*l;}else{c=2.0*s*(1.0-l);}if(c<1.0){f=(l-0.5*c)/(1.0-c);}return[hsl[0],c*100,f*100];};convert.hsv.hcg=function(hsv){var s=hsv[1]/100;var v=hsv[2]/100;var c=s*v;var f=0;if(c<1.0){f=(v-c)/(1-c);}return[hsv[0],c*100,f*100];};convert.hcg.rgb=function(hcg){var h=hcg[0]/360;var c=hcg[1]/100;var g=hcg[2]/100;if(c===0.0){return[g*255,g*255,g*255];}var pure=[0,0,0];var hi=h%1*6;var v=hi%1;var w=1-v;var mg=0;switch(Math.floor(hi)){case 0:pure[0]=1;pure[1]=v;pure[2]=0;break;case 1:pure[0]=w;pure[1]=1;pure[2]=0;break;case 2:pure[0]=0;pure[1]=1;pure[2]=v;break;case 3:pure[0]=0;pure[1]=w;pure[2]=1;break;case 4:pure[0]=v;pure[1]=0;pure[2]=1;break;default:pure[0]=1;pure[1]=0;pure[2]=w;}mg=(1.0-c)*g;return[(c*pure[0]+mg)*255,(c*pure[1]+mg)*255,(c*pure[2]+mg)*255];};convert.hcg.hsv=function(hcg){var c=hcg[1]/100;var g=hcg[2]/100;var v=c+g*(1.0-c);var f=0;if(v>0.0){f=c/v;}return[hcg[0],f*100,v*100];};convert.hcg.hsl=function(hcg){var c=hcg[1]/100;var g=hcg[2]/100;var l=g*(1.0-c)+0.5*c;var s=0;if(l>0.0&&l<0.5){s=c/(2*l);}else if(l>=0.5&&l<1.0){s=c/(2*(1-l));}return[hcg[0],s*100,l*100];};convert.hcg.hwb=function(hcg){var c=hcg[1]/100;var g=hcg[2]/100;var v=c+g*(1.0-c);return[hcg[0],(v-c)*100,(1-v)*100];};convert.hwb.hcg=function(hwb){var w=hwb[1]/100;var b=hwb[2]/100;var v=1-b;var c=v-w;var g=0;if(c<1){g=(v-c)/(1-c);}return[hwb[0],c*100,g*100];};convert.apple.rgb=function(apple){return[apple[0]/65535*255,apple[1]/65535*255,apple[2]/65535*255];};convert.rgb.apple=function(rgb){return[rgb[0]/255*65535,rgb[1]/255*65535,rgb[2]/255*65535];};convert.gray.rgb=function(args){return[args[0]/100*255,args[0]/100*255,args[0]/100*255];};convert.gray.hsl=convert.gray.hsv=function(args){return[0,0,args[0]];};convert.gray.hwb=function(gray){return[0,100,gray[0]];};convert.gray.cmyk=function(gray){return[0,0,0,gray[0]];};convert.gray.lab=function(gray){return[gray[0],0,0];};convert.gray.hex=function(gray){var val=Math.round(gray[0]/100*255)&0xFF;var integer=(val<<16)+(val<<8)+val;var string=integer.toString(16).toUpperCase();return'000000'.substring(string.length)+string;};convert.rgb.gray=function(rgb){var val=(rgb[0]+rgb[1]+rgb[2])/3;return[val/255*100];};});conversions.rgb;conversions.hsl;conversions.hsv;conversions.hwb;conversions.cmyk;conversions.xyz;conversions.lab;conversions.lch;conversions.hex;conversions.keyword;conversions.ansi16;conversions.ansi256;conversions.hcg;conversions.apple;conversions.gray;/*
	this function routes a model to all other models.

	all functions that are routed have a property `.conversion` attached
	to the returned synthetic function. This property is an array
	of strings, each with the steps in between the 'from' and 'to'
	color models (inclusive).

	conversions that are not possible simply are not included.
*/function buildGraph(){var graph={};// https://jsperf.com/object-keys-vs-for-in-with-closure/3
var models=Object.keys(conversions);for(var len=models.length,i=0;i<len;i++){graph[models[i]]={// http://jsperf.com/1-vs-infinity
// micro-opt, but this is simple.
distance:-1,parent:null};}return graph;}// https://en.wikipedia.org/wiki/Breadth-first_search
function deriveBFS(fromModel){var graph=buildGraph();var queue=[fromModel];// unshift -> queue -> pop
graph[fromModel].distance=0;while(queue.length){var current=queue.pop();var adjacents=Object.keys(conversions[current]);for(var len=adjacents.length,i=0;i<len;i++){var adjacent=adjacents[i];var node=graph[adjacent];if(node.distance===-1){node.distance=graph[current].distance+1;node.parent=current;queue.unshift(adjacent);}}}return graph;}function link$1(from,to){return function(args){return to(from(args));};}function wrapConversion(toModel,graph){var path=[graph[toModel].parent,toModel];var fn=conversions[graph[toModel].parent][toModel];var cur=graph[toModel].parent;while(graph[cur].parent){path.unshift(graph[cur].parent);fn=link$1(conversions[graph[cur].parent][cur],fn);cur=graph[cur].parent;}fn.conversion=path;return fn;}var route=function route(fromModel){var graph=deriveBFS(fromModel);var conversion={};var models=Object.keys(graph);for(var len=models.length,i=0;i<len;i++){var toModel=models[i];var node=graph[toModel];if(node.parent===null){// no possible conversion, or this node is the source model.
continue;}conversion[toModel]=wrapConversion(toModel,graph);}return conversion;};var convert={};var models=Object.keys(conversions);function wrapRaw(fn){var wrappedFn=function wrappedFn(args){if(args===undefined||args===null){return args;}if(arguments.length>1){args=Array.prototype.slice.call(arguments);}return fn(args);};// preserve .conversion property if there is one
if('conversion'in fn){wrappedFn.conversion=fn.conversion;}return wrappedFn;}function wrapRounded(fn){var wrappedFn=function wrappedFn(args){if(args===undefined||args===null){return args;}if(arguments.length>1){args=Array.prototype.slice.call(arguments);}var result=fn(args);// we're assuming the result is an array here.
// see notice in conversions.js; don't use box types
// in conversion functions.
if(_typeof(result)==='object'){for(var len=result.length,i=0;i<len;i++){result[i]=Math.round(result[i]);}}return result;};// preserve .conversion property if there is one
if('conversion'in fn){wrappedFn.conversion=fn.conversion;}return wrappedFn;}models.forEach(function(fromModel){convert[fromModel]={};Object.defineProperty(convert[fromModel],'channels',{value:conversions[fromModel].channels});Object.defineProperty(convert[fromModel],'labels',{value:conversions[fromModel].labels});var routes=route(fromModel);var routeModels=Object.keys(routes);routeModels.forEach(function(toModel){var fn=routes[toModel];convert[fromModel][toModel]=wrapRounded(fn);convert[fromModel][toModel].raw=wrapRaw(fn);});});var colorConvert=convert;var ansiStyles$2=createCommonjsModule(function(module){var wrapAnsi16=function wrapAnsi16(fn,offset){return function(){var code=fn.apply(colorConvert,arguments);return"\x1B[".concat(code+offset,"m");};};var wrapAnsi256=function wrapAnsi256(fn,offset){return function(){var code=fn.apply(colorConvert,arguments);return"\x1B[".concat(38+offset,";5;").concat(code,"m");};};var wrapAnsi16m=function wrapAnsi16m(fn,offset){return function(){var rgb=fn.apply(colorConvert,arguments);return"\x1B[".concat(38+offset,";2;").concat(rgb[0],";").concat(rgb[1],";").concat(rgb[2],"m");};};function assembleStyles(){var codes=new Map();var styles={modifier:{reset:[0,0],// 21 isn't widely supported and 22 does the same thing
bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],// Bright color
redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],// Bright color
bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};// Fix humans
styles.color.grey=styles.color.gray;for(var _i3=0,_Object$keys=Object.keys(styles);_i3<_Object$keys.length;_i3++){var groupName=_Object$keys[_i3];var group=styles[groupName];for(var _i4=0,_Object$keys2=Object.keys(group);_i4<_Object$keys2.length;_i4++){var styleName=_Object$keys2[_i4];var style=group[styleName];styles[styleName]={open:"\x1B[".concat(style[0],"m"),close:"\x1B[".concat(style[1],"m")};group[styleName]=styles[styleName];codes.set(style[0],style[1]);}Object.defineProperty(styles,groupName,{value:group,enumerable:false});Object.defineProperty(styles,'codes',{value:codes,enumerable:false});}var ansi2ansi=function ansi2ansi(n){return n;};var rgb2rgb=function rgb2rgb(r,g,b){return[r,g,b];};styles.color.close="\x1B[39m";styles.bgColor.close="\x1B[49m";styles.color.ansi={ansi:wrapAnsi16(ansi2ansi,0)};styles.color.ansi256={ansi256:wrapAnsi256(ansi2ansi,0)};styles.color.ansi16m={rgb:wrapAnsi16m(rgb2rgb,0)};styles.bgColor.ansi={ansi:wrapAnsi16(ansi2ansi,10)};styles.bgColor.ansi256={ansi256:wrapAnsi256(ansi2ansi,10)};styles.bgColor.ansi16m={rgb:wrapAnsi16m(rgb2rgb,10)};for(var _i5=0,_Object$keys3=Object.keys(colorConvert);_i5<_Object$keys3.length;_i5++){var key=_Object$keys3[_i5];if(_typeof(colorConvert[key])!=='object'){continue;}var suite=colorConvert[key];if(key==='ansi16'){key='ansi';}if('ansi16'in suite){styles.color.ansi[key]=wrapAnsi16(suite.ansi16,0);styles.bgColor.ansi[key]=wrapAnsi16(suite.ansi16,10);}if('ansi256'in suite){styles.color.ansi256[key]=wrapAnsi256(suite.ansi256,0);styles.bgColor.ansi256[key]=wrapAnsi256(suite.ansi256,10);}if('rgb'in suite){styles.color.ansi16m[key]=wrapAnsi16m(suite.rgb,0);styles.bgColor.ansi16m[key]=wrapAnsi16m(suite.rgb,10);}}return styles;}// Make the export immutable
Object.defineProperty(module,'exports',{enumerable:true,get:assembleStyles});});var hasFlag$3=function hasFlag$3(flag,argv){argv=argv||process.argv;var prefix=flag.startsWith('-')?'':flag.length===1?'-':'--';var pos=argv.indexOf(prefix+flag);var terminatorPos=argv.indexOf('--');return pos!==-1&&(terminatorPos===-1?true:pos<terminatorPos);};var env$1=process.env;var forceColor$1;if(hasFlag$3('no-color')||hasFlag$3('no-colors')||hasFlag$3('color=false')){forceColor$1=false;}else if(hasFlag$3('color')||hasFlag$3('colors')||hasFlag$3('color=true')||hasFlag$3('color=always')){forceColor$1=true;}if('FORCE_COLOR'in env$1){forceColor$1=env$1.FORCE_COLOR.length===0||parseInt(env$1.FORCE_COLOR,10)!==0;}function translateLevel$1(level){if(level===0){return false;}return{level:level,hasBasic:true,has256:level>=2,has16m:level>=3};}function supportsColor$3(stream){if(forceColor$1===false){return 0;}if(hasFlag$3('color=16m')||hasFlag$3('color=full')||hasFlag$3('color=truecolor')){return 3;}if(hasFlag$3('color=256')){return 2;}if(stream&&!stream.isTTY&&forceColor$1!==true){return 0;}var min=forceColor$1?1:0;if(process.platform==='win32'){// Node.js 7.5.0 is the first version of Node.js to include a patch to
// libuv that enables 256 color output on Windows. Anything earlier and it
// won't work. However, here we target Node.js 8 at minimum as it is an LTS
// release, and Node.js 7 is not. Windows 10 build 10586 is the first Windows
// release that supports 256 colors. Windows 10 build 14931 is the first release
// that supports 16m/TrueColor.
var osRelease=os__default["default"].release().split('.');if(Number(process.versions.node.split('.')[0])>=8&&Number(osRelease[0])>=10&&Number(osRelease[2])>=10586){return Number(osRelease[2])>=14931?3:2;}return 1;}if('CI'in env$1){if(['TRAVIS','CIRCLECI','APPVEYOR','GITLAB_CI'].some(function(sign){return sign in env$1;})||env$1.CI_NAME==='codeship'){return 1;}return min;}if('TEAMCITY_VERSION'in env$1){return /^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env$1.TEAMCITY_VERSION)?1:0;}if(env$1.COLORTERM==='truecolor'){return 3;}if('TERM_PROGRAM'in env$1){var version=parseInt((env$1.TERM_PROGRAM_VERSION||'').split('.')[0],10);switch(env$1.TERM_PROGRAM){case'iTerm.app':return version>=3?3:2;case'Apple_Terminal':return 2;// No default
}}if(/-256(color)?$/i.test(env$1.TERM)){return 2;}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env$1.TERM)){return 1;}if('COLORTERM'in env$1){return 1;}if(env$1.TERM==='dumb'){return min;}return min;}function getSupportLevel$1(stream){var level=supportsColor$3(stream);return translateLevel$1(level);}var supportsColor_1$3={supportsColor:getSupportLevel$1,stdout:getSupportLevel$1(process.stdout),stderr:getSupportLevel$1(process.stderr)};var TEMPLATE_REGEX=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi;var STYLE_REGEX=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g;var STRING_REGEX=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/;var ESCAPE_REGEX=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi;var ESCAPES$2=new Map([['n','\n'],['r','\r'],['t','\t'],['b','\b'],['f','\f'],['v','\v'],['0','\0'],['\\','\\'],['e',"\x1B"],['a',"\x07"]]);function unescape(c){if(c[0]==='u'&&c.length===5||c[0]==='x'&&c.length===3){return String.fromCharCode(parseInt(c.slice(1),16));}return ESCAPES$2.get(c)||c;}function parseArguments(name,args){var results=[];var chunks=args.trim().split(/\s*,\s*/g);var matches;var _iterator2=_createForOfIteratorHelper(chunks),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var chunk=_step2.value;if(!isNaN(chunk)){results.push(Number(chunk));}else if(matches=chunk.match(STRING_REGEX)){results.push(matches[2].replace(ESCAPE_REGEX,function(m,escape,chr){return escape?unescape(escape):chr;}));}else{throw new Error("Invalid Chalk template style argument: ".concat(chunk," (in style '").concat(name,"')"));}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return results;}function parseStyle(style){STYLE_REGEX.lastIndex=0;var results=[];var matches;while((matches=STYLE_REGEX.exec(style))!==null){var name=matches[1];if(matches[2]){var args=parseArguments(name,matches[2]);results.push([name].concat(args));}else{results.push([name]);}}return results;}function buildStyle(chalk,styles){var enabled={};var _iterator3=_createForOfIteratorHelper(styles),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var layer=_step3.value;var _iterator4=_createForOfIteratorHelper(layer.styles),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var style=_step4.value;enabled[style[0]]=layer.inverse?null:style.slice(1);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var current=chalk;for(var _i6=0,_Object$keys4=Object.keys(enabled);_i6<_Object$keys4.length;_i6++){var styleName=_Object$keys4[_i6];if(Array.isArray(enabled[styleName])){if(!(styleName in current)){throw new Error("Unknown Chalk style: ".concat(styleName));}if(enabled[styleName].length>0){current=current[styleName].apply(current,enabled[styleName]);}else{current=current[styleName];}}}return current;}var templates=function templates(chalk,tmp){var styles=[];var chunks=[];var chunk=[];// eslint-disable-next-line max-params
tmp.replace(TEMPLATE_REGEX,function(m,escapeChar,inverse,style,close,chr){if(escapeChar){chunk.push(unescape(escapeChar));}else if(style){var str=chunk.join('');chunk=[];chunks.push(styles.length===0?str:buildStyle(chalk,styles)(str));styles.push({inverse:inverse,styles:parseStyle(style)});}else if(close){if(styles.length===0){throw new Error('Found extraneous } in Chalk template literal');}chunks.push(buildStyle(chalk,styles)(chunk.join('')));chunk=[];styles.pop();}else{chunk.push(chr);}});chunks.push(chunk.join(''));if(styles.length>0){var _errMsg="Chalk template literal is missing ".concat(styles.length," closing bracket").concat(styles.length===1?'':'s'," (`}`)");throw new Error(_errMsg);}return chunks.join('');};var chalk$2=createCommonjsModule(function(module){var stdoutColor=supportsColor_1$3.stdout;var isSimpleWindowsTerm=process.platform==='win32'&&!(process.env.TERM||'').toLowerCase().startsWith('xterm');// `supportsColor.level` → `ansiStyles.color[name]` mapping
var levelMapping=['ansi','ansi','ansi256','ansi16m'];// `color-convert` models to exclude from the Chalk API due to conflicts and such
var skipModels=new Set(['gray']);var styles=Object.create(null);function applyOptions(obj,options){options=options||{};// Detect level if not set manually
var scLevel=stdoutColor?stdoutColor.level:0;obj.level=options.level===undefined?scLevel:options.level;obj.enabled='enabled'in options?options.enabled:obj.level>0;}function Chalk(options){// We check for this.template here since calling `chalk.constructor()`
// by itself will have a `this` of a previously constructed chalk object
if(!this||!(this instanceof Chalk)||this.template){var _chalk={};applyOptions(_chalk,options);_chalk.template=function(){var args=[].slice.call(arguments);return chalkTag.apply(null,[_chalk.template].concat(args));};Object.setPrototypeOf(_chalk,Chalk.prototype);Object.setPrototypeOf(_chalk.template,_chalk);_chalk.template.constructor=Chalk;return _chalk.template;}applyOptions(this,options);}// Use bright blue on Windows as the normal blue color is illegible
if(isSimpleWindowsTerm){ansiStyles$2.blue.open="\x1B[94m";}var _loop=function _loop(){var key=_Object$keys5[_i7];ansiStyles$2[key].closeRe=new RegExp(escapeStringRegexp(ansiStyles$2[key].close),'g');styles[key]={get:function get(){var codes=ansiStyles$2[key];return build.call(this,this._styles?this._styles.concat(codes):[codes],this._empty,key);}};};for(var _i7=0,_Object$keys5=Object.keys(ansiStyles$2);_i7<_Object$keys5.length;_i7++){_loop();}styles.visible={get:function get(){return build.call(this,this._styles||[],true,'visible');}};ansiStyles$2.color.closeRe=new RegExp(escapeStringRegexp(ansiStyles$2.color.close),'g');var _loop2=function _loop2(){var model=_Object$keys6[_i8];if(skipModels.has(model)){return"continue";}styles[model]={get:function get(){var level=this.level;return function(){var open=ansiStyles$2.color[levelMapping[level]][model].apply(null,arguments);var codes={open:open,close:ansiStyles$2.color.close,closeRe:ansiStyles$2.color.closeRe};return build.call(this,this._styles?this._styles.concat(codes):[codes],this._empty,model);};}};};for(var _i8=0,_Object$keys6=Object.keys(ansiStyles$2.color.ansi);_i8<_Object$keys6.length;_i8++){var _ret=_loop2();if(_ret==="continue")continue;}ansiStyles$2.bgColor.closeRe=new RegExp(escapeStringRegexp(ansiStyles$2.bgColor.close),'g');var _loop3=function _loop3(){var model=_Object$keys7[_i9];if(skipModels.has(model)){return"continue";}var bgModel='bg'+model[0].toUpperCase()+model.slice(1);styles[bgModel]={get:function get(){var level=this.level;return function(){var open=ansiStyles$2.bgColor[levelMapping[level]][model].apply(null,arguments);var codes={open:open,close:ansiStyles$2.bgColor.close,closeRe:ansiStyles$2.bgColor.closeRe};return build.call(this,this._styles?this._styles.concat(codes):[codes],this._empty,model);};}};};for(var _i9=0,_Object$keys7=Object.keys(ansiStyles$2.bgColor.ansi);_i9<_Object$keys7.length;_i9++){var _ret2=_loop3();if(_ret2==="continue")continue;}var proto=Object.defineProperties(function(){},styles);function build(_styles,_empty,key){var builder=function builder(){return applyStyle.apply(builder,arguments);};builder._styles=_styles;builder._empty=_empty;var self=this;Object.defineProperty(builder,'level',{enumerable:true,get:function get(){return self.level;},set:function set(level){self.level=level;}});Object.defineProperty(builder,'enabled',{enumerable:true,get:function get(){return self.enabled;},set:function set(enabled){self.enabled=enabled;}});// See below for fix regarding invisible grey/dim combination on Windows
builder.hasGrey=this.hasGrey||key==='gray'||key==='grey';// `__proto__` is used because we must return a function, but there is
// no way to create a function with a different prototype
builder.__proto__=proto;// eslint-disable-line no-proto
return builder;}function applyStyle(){// Support varags, but simply cast to string in case there's only one arg
var args=arguments;var argsLen=args.length;var str=String(arguments[0]);if(argsLen===0){return'';}if(argsLen>1){// Don't slice `arguments`, it prevents V8 optimizations
for(var a=1;a<argsLen;a++){str+=' '+args[a];}}if(!this.enabled||this.level<=0||!str){return this._empty?'':str;}// Turns out that on Windows dimmed gray text becomes invisible in cmd.exe,
// see https://github.com/chalk/chalk/issues/58
// If we're on Windows and we're dealing with a gray color, temporarily make 'dim' a noop.
var originalDim=ansiStyles$2.dim.open;if(isSimpleWindowsTerm&&this.hasGrey){ansiStyles$2.dim.open='';}var _iterator5=_createForOfIteratorHelper(this._styles.slice().reverse()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var code=_step5.value;// Replace any instances already present with a re-opening code
// otherwise only the part of the string until said closing code
// will be colored, and the rest will simply be 'plain'.
str=code.open+str.replace(code.closeRe,code.open)+code.close;// Close the styling before a linebreak and reopen
// after next line to fix a bleed issue on macOS
// https://github.com/chalk/chalk/pull/92
str=str.replace(/\r?\n/g,"".concat(code.close,"$&").concat(code.open));}// Reset the original `dim` if we changed it to work around the Windows dimmed gray issue
}catch(err){_iterator5.e(err);}finally{_iterator5.f();}ansiStyles$2.dim.open=originalDim;return str;}function chalkTag(chalk,strings){if(!Array.isArray(strings)){// If chalk() was called by itself or with a string,
// return the string itself as a string.
return[].slice.call(arguments,1).join(' ');}var args=[].slice.call(arguments,2);var parts=[strings.raw[0]];for(var i=1;i<strings.length;i++){parts.push(String(args[i-1]).replace(/[{}\\]/g,'\\$&'));parts.push(String(strings.raw[i]));}return templates(chalk,parts.join(''));}Object.defineProperties(Chalk.prototype,styles);module.exports=Chalk();// eslint-disable-line new-cap
module.exports.supportsColor=stdoutColor;module.exports["default"]=module.exports;// For TypeScript
});chalk$2.supportsColor;var MILLISECONDS_IN_MINUTE$2=60000;/**
 * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.
 * They usually appear for dates that denote time before the timezones were introduced
 * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891
 * and GMT+01:00:00 after that date)
 *
 * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,
 * which would lead to incorrect calculations.
 *
 * This function returns the timezone offset in milliseconds that takes seconds in account.
 */var getTimezoneOffsetInMilliseconds=function getTimezoneOffsetInMilliseconds(dirtyDate){var date=new Date(dirtyDate.getTime());var baseTimezoneOffset=date.getTimezoneOffset();date.setSeconds(0,0);var millisecondsPartOfTimezoneOffset=date.getTime()%MILLISECONDS_IN_MINUTE$2;return baseTimezoneOffset*MILLISECONDS_IN_MINUTE$2+millisecondsPartOfTimezoneOffset;};/**
 * @category Common Helpers
 * @summary Is the given argument an instance of Date?
 *
 * @description
 * Is the given argument an instance of Date?
 *
 * @param {*} argument - the argument to check
 * @returns {Boolean} the given argument is an instance of Date
 *
 * @example
 * // Is 'mayonnaise' a Date?
 * var result = isDate('mayonnaise')
 * //=> false
 */function isDate(argument){return argument instanceof Date;}var is_date=isDate;var MILLISECONDS_IN_HOUR=3600000;var MILLISECONDS_IN_MINUTE$1=60000;var DEFAULT_ADDITIONAL_DIGITS=2;var parseTokenDateTimeDelimeter=/[T ]/;var parseTokenPlainTime=/:/;// year tokens
var parseTokenYY=/^(\d{2})$/;var parseTokensYYY=[/^([+-]\d{2})$/,// 0 additional digits
/^([+-]\d{3})$/,// 1 additional digit
/^([+-]\d{4})$/ // 2 additional digits
];var parseTokenYYYY=/^(\d{4})/;var parseTokensYYYYY=[/^([+-]\d{4})/,// 0 additional digits
/^([+-]\d{5})/,// 1 additional digit
/^([+-]\d{6})/ // 2 additional digits
];// date tokens
var parseTokenMM=/^-(\d{2})$/;var parseTokenDDD=/^-?(\d{3})$/;var parseTokenMMDD=/^-?(\d{2})-?(\d{2})$/;var parseTokenWww=/^-?W(\d{2})$/;var parseTokenWwwD=/^-?W(\d{2})-?(\d{1})$/;// time tokens
var parseTokenHH=/^(\d{2}([.,]\d*)?)$/;var parseTokenHHMM=/^(\d{2}):?(\d{2}([.,]\d*)?)$/;var parseTokenHHMMSS=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/;// timezone tokens
var parseTokenTimezone=/([Z+-].*)$/;var parseTokenTimezoneZ=/^(Z)$/;var parseTokenTimezoneHH=/^([+-])(\d{2})$/;var parseTokenTimezoneHHMM=/^([+-])(\d{2}):?(\d{2})$/;/**
 * @category Common Helpers
 * @summary Convert the given argument to an instance of Date.
 *
 * @description
 * Convert the given argument to an instance of Date.
 *
 * If the argument is an instance of Date, the function returns its clone.
 *
 * If the argument is a number, it is treated as a timestamp.
 *
 * If an argument is a string, the function tries to parse it.
 * Function accepts complete ISO 8601 formats as well as partial implementations.
 * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601
 *
 * If all above fails, the function passes the given argument to Date constructor.
 *
 * @param {Date|String|Number} argument - the value to convert
 * @param {Object} [options] - the object with options
 * @param {0 | 1 | 2} [options.additionalDigits=2] - the additional number of digits in the extended year format
 * @returns {Date} the parsed date in the local time zone
 *
 * @example
 * // Convert string '2014-02-11T11:30:30' to date:
 * var result = parse('2014-02-11T11:30:30')
 * //=> Tue Feb 11 2014 11:30:30
 *
 * @example
 * // Parse string '+02014101',
 * // if the additional number of digits in the extended year format is 1:
 * var result = parse('+02014101', {additionalDigits: 1})
 * //=> Fri Apr 11 2014 00:00:00
 */function parse$2(argument,dirtyOptions){if(is_date(argument)){// Prevent the date to lose the milliseconds when passed to new Date() in IE10
return new Date(argument.getTime());}else if(typeof argument!=='string'){return new Date(argument);}var options=dirtyOptions||{};var additionalDigits=options.additionalDigits;if(additionalDigits==null){additionalDigits=DEFAULT_ADDITIONAL_DIGITS;}else{additionalDigits=Number(additionalDigits);}var dateStrings=splitDateString(argument);var parseYearResult=parseYear(dateStrings.date,additionalDigits);var year=parseYearResult.year;var restDateString=parseYearResult.restDateString;var date=parseDate(restDateString,year);if(date){var timestamp=date.getTime();var time=0;var offset;if(dateStrings.time){time=parseTime(dateStrings.time);}if(dateStrings.timezone){offset=parseTimezone(dateStrings.timezone)*MILLISECONDS_IN_MINUTE$1;}else{var fullTime=timestamp+time;var fullTimeDate=new Date(fullTime);offset=getTimezoneOffsetInMilliseconds(fullTimeDate);// Adjust time when it's coming from DST
var fullTimeDateNextDay=new Date(fullTime);fullTimeDateNextDay.setDate(fullTimeDate.getDate()+1);var offsetDiff=getTimezoneOffsetInMilliseconds(fullTimeDateNextDay)-getTimezoneOffsetInMilliseconds(fullTimeDate);if(offsetDiff>0){offset+=offsetDiff;}}return new Date(timestamp+time+offset);}else{return new Date(argument);}}function splitDateString(dateString){var dateStrings={};var array=dateString.split(parseTokenDateTimeDelimeter);var timeString;if(parseTokenPlainTime.test(array[0])){dateStrings.date=null;timeString=array[0];}else{dateStrings.date=array[0];timeString=array[1];}if(timeString){var token=parseTokenTimezone.exec(timeString);if(token){dateStrings.time=timeString.replace(token[1],'');dateStrings.timezone=token[1];}else{dateStrings.time=timeString;}}return dateStrings;}function parseYear(dateString,additionalDigits){var parseTokenYYY=parseTokensYYY[additionalDigits];var parseTokenYYYYY=parseTokensYYYYY[additionalDigits];var token;// YYYY or ±YYYYY
token=parseTokenYYYY.exec(dateString)||parseTokenYYYYY.exec(dateString);if(token){var yearString=token[1];return{year:parseInt(yearString,10),restDateString:dateString.slice(yearString.length)};}// YY or ±YYY
token=parseTokenYY.exec(dateString)||parseTokenYYY.exec(dateString);if(token){var centuryString=token[1];return{year:parseInt(centuryString,10)*100,restDateString:dateString.slice(centuryString.length)};}// Invalid ISO-formatted year
return{year:null};}function parseDate(dateString,year){// Invalid ISO-formatted year
if(year===null){return null;}var token;var date;var month;var week;// YYYY
if(dateString.length===0){date=new Date(0);date.setUTCFullYear(year);return date;}// YYYY-MM
token=parseTokenMM.exec(dateString);if(token){date=new Date(0);month=parseInt(token[1],10)-1;date.setUTCFullYear(year,month);return date;}// YYYY-DDD or YYYYDDD
token=parseTokenDDD.exec(dateString);if(token){date=new Date(0);var dayOfYear=parseInt(token[1],10);date.setUTCFullYear(year,0,dayOfYear);return date;}// YYYY-MM-DD or YYYYMMDD
token=parseTokenMMDD.exec(dateString);if(token){date=new Date(0);month=parseInt(token[1],10)-1;var day=parseInt(token[2],10);date.setUTCFullYear(year,month,day);return date;}// YYYY-Www or YYYYWww
token=parseTokenWww.exec(dateString);if(token){week=parseInt(token[1],10)-1;return dayOfISOYear(year,week);}// YYYY-Www-D or YYYYWwwD
token=parseTokenWwwD.exec(dateString);if(token){week=parseInt(token[1],10)-1;var dayOfWeek=parseInt(token[2],10)-1;return dayOfISOYear(year,week,dayOfWeek);}// Invalid ISO-formatted date
return null;}function parseTime(timeString){var token;var hours;var minutes;// hh
token=parseTokenHH.exec(timeString);if(token){hours=parseFloat(token[1].replace(',','.'));return hours%24*MILLISECONDS_IN_HOUR;}// hh:mm or hhmm
token=parseTokenHHMM.exec(timeString);if(token){hours=parseInt(token[1],10);minutes=parseFloat(token[2].replace(',','.'));return hours%24*MILLISECONDS_IN_HOUR+minutes*MILLISECONDS_IN_MINUTE$1;}// hh:mm:ss or hhmmss
token=parseTokenHHMMSS.exec(timeString);if(token){hours=parseInt(token[1],10);minutes=parseInt(token[2],10);var seconds=parseFloat(token[3].replace(',','.'));return hours%24*MILLISECONDS_IN_HOUR+minutes*MILLISECONDS_IN_MINUTE$1+seconds*1000;}// Invalid ISO-formatted time
return null;}function parseTimezone(timezoneString){var token;var absoluteOffset;// Z
token=parseTokenTimezoneZ.exec(timezoneString);if(token){return 0;}// ±hh
token=parseTokenTimezoneHH.exec(timezoneString);if(token){absoluteOffset=parseInt(token[2],10)*60;return token[1]==='+'?-absoluteOffset:absoluteOffset;}// ±hh:mm or ±hhmm
token=parseTokenTimezoneHHMM.exec(timezoneString);if(token){absoluteOffset=parseInt(token[2],10)*60+parseInt(token[3],10);return token[1]==='+'?-absoluteOffset:absoluteOffset;}return 0;}function dayOfISOYear(isoYear,week,day){week=week||0;day=day||0;var date=new Date(0);date.setUTCFullYear(isoYear,0,4);var fourthOfJanuaryDay=date.getUTCDay()||7;var diff=week*7+day+1-fourthOfJanuaryDay;date.setUTCDate(date.getUTCDate()+diff);return date;}var parse_1$1=parse$2;/**
 * @category Year Helpers
 * @summary Return the start of a year for the given date.
 *
 * @description
 * Return the start of a year for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of a year
 *
 * @example
 * // The start of a year for 2 September 2014 11:55:00:
 * var result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))
 * //=> Wed Jan 01 2014 00:00:00
 */function startOfYear(dirtyDate){var cleanDate=parse_1$1(dirtyDate);var date=new Date(0);date.setFullYear(cleanDate.getFullYear(),0,1);date.setHours(0,0,0,0);return date;}var start_of_year=startOfYear;/**
 * @category Day Helpers
 * @summary Return the start of a day for the given date.
 *
 * @description
 * Return the start of a day for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of a day
 *
 * @example
 * // The start of a day for 2 September 2014 11:55:00:
 * var result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 02 2014 00:00:00
 */function startOfDay(dirtyDate){var date=parse_1$1(dirtyDate);date.setHours(0,0,0,0);return date;}var start_of_day=startOfDay;var MILLISECONDS_IN_MINUTE=60000;var MILLISECONDS_IN_DAY=86400000;/**
 * @category Day Helpers
 * @summary Get the number of calendar days between the given dates.
 *
 * @description
 * Get the number of calendar days between the given dates.
 *
 * @param {Date|String|Number} dateLeft - the later date
 * @param {Date|String|Number} dateRight - the earlier date
 * @returns {Number} the number of calendar days
 *
 * @example
 * // How many calendar days are between
 * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?
 * var result = differenceInCalendarDays(
 *   new Date(2012, 6, 2, 0, 0),
 *   new Date(2011, 6, 2, 23, 0)
 * )
 * //=> 366
 */function differenceInCalendarDays(dirtyDateLeft,dirtyDateRight){var startOfDayLeft=start_of_day(dirtyDateLeft);var startOfDayRight=start_of_day(dirtyDateRight);var timestampLeft=startOfDayLeft.getTime()-startOfDayLeft.getTimezoneOffset()*MILLISECONDS_IN_MINUTE;var timestampRight=startOfDayRight.getTime()-startOfDayRight.getTimezoneOffset()*MILLISECONDS_IN_MINUTE;// Round the number of days to the nearest integer
// because the number of milliseconds in a day is not constant
// (e.g. it's different in the day of the daylight saving time clock shift)
return Math.round((timestampLeft-timestampRight)/MILLISECONDS_IN_DAY);}var difference_in_calendar_days=differenceInCalendarDays;/**
 * @category Day Helpers
 * @summary Get the day of the year of the given date.
 *
 * @description
 * Get the day of the year of the given date.
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the day of year
 *
 * @example
 * // Which day of the year is 2 July 2014?
 * var result = getDayOfYear(new Date(2014, 6, 2))
 * //=> 183
 */function getDayOfYear(dirtyDate){var date=parse_1$1(dirtyDate);var diff=difference_in_calendar_days(date,start_of_year(date));var dayOfYear=diff+1;return dayOfYear;}var get_day_of_year=getDayOfYear;/**
 * @category Week Helpers
 * @summary Return the start of a week for the given date.
 *
 * @description
 * Return the start of a week for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|String|Number} date - the original date
 * @param {Object} [options] - the object with options
 * @param {Number} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Date} the start of a week
 *
 * @example
 * // The start of a week for 2 September 2014 11:55:00:
 * var result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Sun Aug 31 2014 00:00:00
 *
 * @example
 * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:
 * var result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), {weekStartsOn: 1})
 * //=> Mon Sep 01 2014 00:00:00
 */function startOfWeek(dirtyDate,dirtyOptions){var weekStartsOn=dirtyOptions?Number(dirtyOptions.weekStartsOn)||0:0;var date=parse_1$1(dirtyDate);var day=date.getDay();var diff=(day<weekStartsOn?7:0)+day-weekStartsOn;date.setDate(date.getDate()-diff);date.setHours(0,0,0,0);return date;}var start_of_week=startOfWeek;/**
 * @category ISO Week Helpers
 * @summary Return the start of an ISO week for the given date.
 *
 * @description
 * Return the start of an ISO week for the given date.
 * The result will be in the local timezone.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of an ISO week
 *
 * @example
 * // The start of an ISO week for 2 September 2014 11:55:00:
 * var result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Mon Sep 01 2014 00:00:00
 */function startOfISOWeek(dirtyDate){return start_of_week(dirtyDate,{weekStartsOn:1});}var start_of_iso_week=startOfISOWeek;/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Get the ISO week-numbering year of the given date.
 *
 * @description
 * Get the ISO week-numbering year of the given date,
 * which always starts 3 days before the year's first Thursday.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the ISO week-numbering year
 *
 * @example
 * // Which ISO-week numbering year is 2 January 2005?
 * var result = getISOYear(new Date(2005, 0, 2))
 * //=> 2004
 */function getISOYear(dirtyDate){var date=parse_1$1(dirtyDate);var year=date.getFullYear();var fourthOfJanuaryOfNextYear=new Date(0);fourthOfJanuaryOfNextYear.setFullYear(year+1,0,4);fourthOfJanuaryOfNextYear.setHours(0,0,0,0);var startOfNextYear=start_of_iso_week(fourthOfJanuaryOfNextYear);var fourthOfJanuaryOfThisYear=new Date(0);fourthOfJanuaryOfThisYear.setFullYear(year,0,4);fourthOfJanuaryOfThisYear.setHours(0,0,0,0);var startOfThisYear=start_of_iso_week(fourthOfJanuaryOfThisYear);if(date.getTime()>=startOfNextYear.getTime()){return year+1;}else if(date.getTime()>=startOfThisYear.getTime()){return year;}else{return year-1;}}var get_iso_year=getISOYear;/**
 * @category ISO Week-Numbering Year Helpers
 * @summary Return the start of an ISO week-numbering year for the given date.
 *
 * @description
 * Return the start of an ISO week-numbering year,
 * which always starts 3 days before the year's first Thursday.
 * The result will be in the local timezone.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the original date
 * @returns {Date} the start of an ISO year
 *
 * @example
 * // The start of an ISO week-numbering year for 2 July 2005:
 * var result = startOfISOYear(new Date(2005, 6, 2))
 * //=> Mon Jan 03 2005 00:00:00
 */function startOfISOYear(dirtyDate){var year=get_iso_year(dirtyDate);var fourthOfJanuary=new Date(0);fourthOfJanuary.setFullYear(year,0,4);fourthOfJanuary.setHours(0,0,0,0);var date=start_of_iso_week(fourthOfJanuary);return date;}var start_of_iso_year=startOfISOYear;var MILLISECONDS_IN_WEEK=604800000;/**
 * @category ISO Week Helpers
 * @summary Get the ISO week of the given date.
 *
 * @description
 * Get the ISO week of the given date.
 *
 * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date
 *
 * @param {Date|String|Number} date - the given date
 * @returns {Number} the ISO week
 *
 * @example
 * // Which week of the ISO-week numbering year is 2 January 2005?
 * var result = getISOWeek(new Date(2005, 0, 2))
 * //=> 53
 */function getISOWeek(dirtyDate){var date=parse_1$1(dirtyDate);var diff=start_of_iso_week(date).getTime()-start_of_iso_year(date).getTime();// Round the number of days to the nearest integer
// because the number of milliseconds in a week is not constant
// (e.g. it's different in the week of the daylight saving time clock shift)
return Math.round(diff/MILLISECONDS_IN_WEEK)+1;}var get_iso_week=getISOWeek;/**
 * @category Common Helpers
 * @summary Is the given date valid?
 *
 * @description
 * Returns false if argument is Invalid Date and true otherwise.
 * Invalid Date is a Date, whose time value is NaN.
 *
 * Time value of Date: http://es5.github.io/#x15.9.1.1
 *
 * @param {Date} date - the date to check
 * @returns {Boolean} the date is valid
 * @throws {TypeError} argument must be an instance of Date
 *
 * @example
 * // For the valid date:
 * var result = isValid(new Date(2014, 1, 31))
 * //=> true
 *
 * @example
 * // For the invalid date:
 * var result = isValid(new Date(''))
 * //=> false
 */function isValid(dirtyDate){if(is_date(dirtyDate)){return!isNaN(dirtyDate);}else{throw new TypeError(toString.call(dirtyDate)+' is not an instance of Date');}}var is_valid=isValid;function buildDistanceInWordsLocale(){var distanceInWordsLocale={lessThanXSeconds:{one:'less than a second',other:'less than {{count}} seconds'},xSeconds:{one:'1 second',other:'{{count}} seconds'},halfAMinute:'half a minute',lessThanXMinutes:{one:'less than a minute',other:'less than {{count}} minutes'},xMinutes:{one:'1 minute',other:'{{count}} minutes'},aboutXHours:{one:'about 1 hour',other:'about {{count}} hours'},xHours:{one:'1 hour',other:'{{count}} hours'},xDays:{one:'1 day',other:'{{count}} days'},aboutXMonths:{one:'about 1 month',other:'about {{count}} months'},xMonths:{one:'1 month',other:'{{count}} months'},aboutXYears:{one:'about 1 year',other:'about {{count}} years'},xYears:{one:'1 year',other:'{{count}} years'},overXYears:{one:'over 1 year',other:'over {{count}} years'},almostXYears:{one:'almost 1 year',other:'almost {{count}} years'}};function localize(token,count,options){options=options||{};var result;if(typeof distanceInWordsLocale[token]==='string'){result=distanceInWordsLocale[token];}else if(count===1){result=distanceInWordsLocale[token].one;}else{result=distanceInWordsLocale[token].other.replace('{{count}}',count);}if(options.addSuffix){if(options.comparison>0){return'in '+result;}else{return result+' ago';}}return result;}return{localize:localize};}var build_distance_in_words_locale=buildDistanceInWordsLocale;var commonFormatterKeys=['M','MM','Q','D','DD','DDD','DDDD','d','E','W','WW','YY','YYYY','GG','GGGG','H','HH','h','hh','m','mm','s','ss','S','SS','SSS','Z','ZZ','X','x'];function buildFormattingTokensRegExp(formatters){var formatterKeys=[];for(var key in formatters){if(formatters.hasOwnProperty(key)){formatterKeys.push(key);}}var formattingTokens=commonFormatterKeys.concat(formatterKeys).sort().reverse();var formattingTokensRegExp=new RegExp('(\\[[^\\[]*\\])|(\\\\)?'+'('+formattingTokens.join('|')+'|.)','g');return formattingTokensRegExp;}var build_formatting_tokens_reg_exp=buildFormattingTokensRegExp;function buildFormatLocale(){// Note: in English, the names of days of the week and months are capitalized.
// If you are making a new locale based on this one, check if the same is true for the language you're working on.
// Generally, formatted dates should look like they are in the middle of a sentence,
// e.g. in Spanish language the weekdays and months should be in the lowercase.
var months3char=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var monthsFull=['January','February','March','April','May','June','July','August','September','October','November','December'];var weekdays2char=['Su','Mo','Tu','We','Th','Fr','Sa'];var weekdays3char=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];var weekdaysFull=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];var meridiemUppercase=['AM','PM'];var meridiemLowercase=['am','pm'];var meridiemFull=['a.m.','p.m.'];var formatters={// Month: Jan, Feb, ..., Dec
'MMM':function MMM(date){return months3char[date.getMonth()];},// Month: January, February, ..., December
'MMMM':function MMMM(date){return monthsFull[date.getMonth()];},// Day of week: Su, Mo, ..., Sa
'dd':function dd(date){return weekdays2char[date.getDay()];},// Day of week: Sun, Mon, ..., Sat
'ddd':function ddd(date){return weekdays3char[date.getDay()];},// Day of week: Sunday, Monday, ..., Saturday
'dddd':function dddd(date){return weekdaysFull[date.getDay()];},// AM, PM
'A':function A(date){return date.getHours()/12>=1?meridiemUppercase[1]:meridiemUppercase[0];},// am, pm
'a':function a(date){return date.getHours()/12>=1?meridiemLowercase[1]:meridiemLowercase[0];},// a.m., p.m.
'aa':function aa(date){return date.getHours()/12>=1?meridiemFull[1]:meridiemFull[0];}};// Generate ordinal version of formatters: M -> Mo, D -> Do, etc.
var ordinalFormatters=['M','D','DDD','d','Q','W'];ordinalFormatters.forEach(function(formatterToken){formatters[formatterToken+'o']=function(date,formatters){return ordinal(formatters[formatterToken](date));};});return{formatters:formatters,formattingTokensRegExp:build_formatting_tokens_reg_exp(formatters)};}function ordinal(number){var rem100=number%100;if(rem100>20||rem100<10){switch(rem100%10){case 1:return number+'st';case 2:return number+'nd';case 3:return number+'rd';}}return number+'th';}var build_format_locale=buildFormatLocale;/**
 * @category Locales
 * @summary English locale.
 */var en={distanceInWords:build_distance_in_words_locale(),format:build_format_locale()};/**
 * @category Common Helpers
 * @summary Format the date.
 *
 * @description
 * Return the formatted date string in the given format.
 *
 * Accepted tokens:
 * | Unit                    | Token | Result examples                  |
 * |-------------------------|-------|----------------------------------|
 * | Month                   | M     | 1, 2, ..., 12                    |
 * |                         | Mo    | 1st, 2nd, ..., 12th              |
 * |                         | MM    | 01, 02, ..., 12                  |
 * |                         | MMM   | Jan, Feb, ..., Dec               |
 * |                         | MMMM  | January, February, ..., December |
 * | Quarter                 | Q     | 1, 2, 3, 4                       |
 * |                         | Qo    | 1st, 2nd, 3rd, 4th               |
 * | Day of month            | D     | 1, 2, ..., 31                    |
 * |                         | Do    | 1st, 2nd, ..., 31st              |
 * |                         | DD    | 01, 02, ..., 31                  |
 * | Day of year             | DDD   | 1, 2, ..., 366                   |
 * |                         | DDDo  | 1st, 2nd, ..., 366th             |
 * |                         | DDDD  | 001, 002, ..., 366               |
 * | Day of week             | d     | 0, 1, ..., 6                     |
 * |                         | do    | 0th, 1st, ..., 6th               |
 * |                         | dd    | Su, Mo, ..., Sa                  |
 * |                         | ddd   | Sun, Mon, ..., Sat               |
 * |                         | dddd  | Sunday, Monday, ..., Saturday    |
 * | Day of ISO week         | E     | 1, 2, ..., 7                     |
 * | ISO week                | W     | 1, 2, ..., 53                    |
 * |                         | Wo    | 1st, 2nd, ..., 53rd              |
 * |                         | WW    | 01, 02, ..., 53                  |
 * | Year                    | YY    | 00, 01, ..., 99                  |
 * |                         | YYYY  | 1900, 1901, ..., 2099            |
 * | ISO week-numbering year | GG    | 00, 01, ..., 99                  |
 * |                         | GGGG  | 1900, 1901, ..., 2099            |
 * | AM/PM                   | A     | AM, PM                           |
 * |                         | a     | am, pm                           |
 * |                         | aa    | a.m., p.m.                       |
 * | Hour                    | H     | 0, 1, ... 23                     |
 * |                         | HH    | 00, 01, ... 23                   |
 * |                         | h     | 1, 2, ..., 12                    |
 * |                         | hh    | 01, 02, ..., 12                  |
 * | Minute                  | m     | 0, 1, ..., 59                    |
 * |                         | mm    | 00, 01, ..., 59                  |
 * | Second                  | s     | 0, 1, ..., 59                    |
 * |                         | ss    | 00, 01, ..., 59                  |
 * | 1/10 of second          | S     | 0, 1, ..., 9                     |
 * | 1/100 of second         | SS    | 00, 01, ..., 99                  |
 * | Millisecond             | SSS   | 000, 001, ..., 999               |
 * | Timezone                | Z     | -01:00, +00:00, ... +12:00       |
 * |                         | ZZ    | -0100, +0000, ..., +1200         |
 * | Seconds timestamp       | X     | 512969520                        |
 * | Milliseconds timestamp  | x     | 512969520900                     |
 *
 * The characters wrapped in square brackets are escaped.
 *
 * The result may vary by locale.
 *
 * @param {Date|String|Number} date - the original date
 * @param {String} [format='YYYY-MM-DDTHH:mm:ss.SSSZ'] - the string of tokens
 * @param {Object} [options] - the object with options
 * @param {Object} [options.locale=enLocale] - the locale object
 * @returns {String} the formatted date string
 *
 * @example
 * // Represent 11 February 2014 in middle-endian format:
 * var result = format(
 *   new Date(2014, 1, 11),
 *   'MM/DD/YYYY'
 * )
 * //=> '02/11/2014'
 *
 * @example
 * // Represent 2 July 2014 in Esperanto:
 * var eoLocale = require('date-fns/locale/eo')
 * var result = format(
 *   new Date(2014, 6, 2),
 *   'Do [de] MMMM YYYY',
 *   {locale: eoLocale}
 * )
 * //=> '2-a de julio 2014'
 */function format$1(dirtyDate,dirtyFormatStr,dirtyOptions){var formatStr=dirtyFormatStr?String(dirtyFormatStr):'YYYY-MM-DDTHH:mm:ss.SSSZ';var options=dirtyOptions||{};var locale=options.locale;var localeFormatters=en.format.formatters;var formattingTokensRegExp=en.format.formattingTokensRegExp;if(locale&&locale.format&&locale.format.formatters){localeFormatters=locale.format.formatters;if(locale.format.formattingTokensRegExp){formattingTokensRegExp=locale.format.formattingTokensRegExp;}}var date=parse_1$1(dirtyDate);if(!is_valid(date)){return'Invalid Date';}var formatFn=buildFormatFn(formatStr,localeFormatters,formattingTokensRegExp);return formatFn(date);}var formatters={// Month: 1, 2, ..., 12
'M':function M(date){return date.getMonth()+1;},// Month: 01, 02, ..., 12
'MM':function MM(date){return addLeadingZeros(date.getMonth()+1,2);},// Quarter: 1, 2, 3, 4
'Q':function Q(date){return Math.ceil((date.getMonth()+1)/3);},// Day of month: 1, 2, ..., 31
'D':function D(date){return date.getDate();},// Day of month: 01, 02, ..., 31
'DD':function DD(date){return addLeadingZeros(date.getDate(),2);},// Day of year: 1, 2, ..., 366
'DDD':function DDD(date){return get_day_of_year(date);},// Day of year: 001, 002, ..., 366
'DDDD':function DDDD(date){return addLeadingZeros(get_day_of_year(date),3);},// Day of week: 0, 1, ..., 6
'd':function d(date){return date.getDay();},// Day of ISO week: 1, 2, ..., 7
'E':function E(date){return date.getDay()||7;},// ISO week: 1, 2, ..., 53
'W':function W(date){return get_iso_week(date);},// ISO week: 01, 02, ..., 53
'WW':function WW(date){return addLeadingZeros(get_iso_week(date),2);},// Year: 00, 01, ..., 99
'YY':function YY(date){return addLeadingZeros(date.getFullYear(),4).substr(2);},// Year: 1900, 1901, ..., 2099
'YYYY':function YYYY(date){return addLeadingZeros(date.getFullYear(),4);},// ISO week-numbering year: 00, 01, ..., 99
'GG':function GG(date){return String(get_iso_year(date)).substr(2);},// ISO week-numbering year: 1900, 1901, ..., 2099
'GGGG':function GGGG(date){return get_iso_year(date);},// Hour: 0, 1, ... 23
'H':function H(date){return date.getHours();},// Hour: 00, 01, ..., 23
'HH':function HH(date){return addLeadingZeros(date.getHours(),2);},// Hour: 1, 2, ..., 12
'h':function h(date){var hours=date.getHours();if(hours===0){return 12;}else if(hours>12){return hours%12;}else{return hours;}},// Hour: 01, 02, ..., 12
'hh':function hh(date){return addLeadingZeros(formatters['h'](date),2);},// Minute: 0, 1, ..., 59
'm':function m(date){return date.getMinutes();},// Minute: 00, 01, ..., 59
'mm':function mm(date){return addLeadingZeros(date.getMinutes(),2);},// Second: 0, 1, ..., 59
's':function s(date){return date.getSeconds();},// Second: 00, 01, ..., 59
'ss':function ss(date){return addLeadingZeros(date.getSeconds(),2);},// 1/10 of second: 0, 1, ..., 9
'S':function S(date){return Math.floor(date.getMilliseconds()/100);},// 1/100 of second: 00, 01, ..., 99
'SS':function SS(date){return addLeadingZeros(Math.floor(date.getMilliseconds()/10),2);},// Millisecond: 000, 001, ..., 999
'SSS':function SSS(date){return addLeadingZeros(date.getMilliseconds(),3);},// Timezone: -01:00, +00:00, ... +12:00
'Z':function Z(date){return formatTimezone(date.getTimezoneOffset(),':');},// Timezone: -0100, +0000, ... +1200
'ZZ':function ZZ(date){return formatTimezone(date.getTimezoneOffset());},// Seconds timestamp: 512969520
'X':function X(date){return Math.floor(date.getTime()/1000);},// Milliseconds timestamp: 512969520900
'x':function x(date){return date.getTime();}};function buildFormatFn(formatStr,localeFormatters,formattingTokensRegExp){var array=formatStr.match(formattingTokensRegExp);var length=array.length;var i;var formatter;for(i=0;i<length;i++){formatter=localeFormatters[array[i]]||formatters[array[i]];if(formatter){array[i]=formatter;}else{array[i]=removeFormattingTokens(array[i]);}}return function(date){var output='';for(var i=0;i<length;i++){if(array[i]instanceof Function){output+=array[i](date,formatters);}else{output+=array[i];}}return output;};}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|]$/g,'');}return input.replace(/\\/g,'');}function formatTimezone(offset,delimeter){delimeter=delimeter||'';var sign=offset>0?'-':'+';var absOffset=Math.abs(offset);var hours=Math.floor(absOffset/60);var minutes=absOffset%60;return sign+addLeadingZeros(hours,2)+delimeter+addLeadingZeros(minutes,2);}function addLeadingZeros(number,targetLength){var output=Math.abs(number).toString();while(output.length<targetLength){output='0'+output;}return output;}var format_1=format$1;var log=function log(options,output){if(options.dateFormat===false){console.log(output);return;}var timestamp=format_1(new Date(),options.dateFormat);console.log(chalk$2.dim("[".concat(timestamp,"]"))+" ".concat(output));};var utils$2={log:log};var renderHelper$1=function renderHelper$1(task,event,options){var log=utils$2.log.bind(undefined,options);if(event.type==='STATE'){var message=task.isPending()?'started':task.state;log("".concat(task.title," [").concat(message,"]"));if(task.isSkipped()&&task.output){log("".concat(figures_1$1.arrowRight," ").concat(task.output));}}else if(event.type==='DATA'){log("".concat(figures_1$1.arrowRight," ").concat(event.data));}else if(event.type==='TITLE'){log("".concat(task.title," [title changed]"));}};var render$1=function render$1(tasks,options){var _iterator6=_createForOfIteratorHelper(tasks),_step6;try{var _loop4=function _loop4(){var task=_step6.value;task.subscribe(function(event){if(event.type==='SUBTASKS'){render$1(task.subtasks,options);return;}renderHelper$1(task,event,options);},function(err){console.log(err);});};for(_iterator6.s();!(_step6=_iterator6.n()).done;){_loop4();}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}};var VerboseRenderer=/*#__PURE__*/function(){function VerboseRenderer(tasks,options){_classCallCheck(this,VerboseRenderer);this._tasks=tasks;this._options=Object.assign({dateFormat:'HH:mm:ss'},options);}_createClass(VerboseRenderer,[{key:"render",value:function render(){cliCursor.hide();render$1(this._tasks,this._options);}},{key:"end",value:function end(){cliCursor.show();}}],[{key:"nonTTY",get:function get(){return true;}}]);return VerboseRenderer;}();var listrVerboseRenderer=VerboseRenderer;var ansiEscapes=createCommonjsModule(function(module){var x=module.exports;var ESC="\x1B[";var OSC="\x1B]";var BEL="\x07";var SEP=';';var isTerminalApp=process.env.TERM_PROGRAM==='Apple_Terminal';x.cursorTo=function(x,y){if(typeof x!=='number'){throw new TypeError('The `x` argument is required');}if(typeof y!=='number'){return ESC+(x+1)+'G';}return ESC+(y+1)+';'+(x+1)+'H';};x.cursorMove=function(x,y){if(typeof x!=='number'){throw new TypeError('The `x` argument is required');}var ret='';if(x<0){ret+=ESC+-x+'D';}else if(x>0){ret+=ESC+x+'C';}if(y<0){ret+=ESC+-y+'A';}else if(y>0){ret+=ESC+y+'B';}return ret;};x.cursorUp=function(count){return ESC+(typeof count==='number'?count:1)+'A';};x.cursorDown=function(count){return ESC+(typeof count==='number'?count:1)+'B';};x.cursorForward=function(count){return ESC+(typeof count==='number'?count:1)+'C';};x.cursorBackward=function(count){return ESC+(typeof count==='number'?count:1)+'D';};x.cursorLeft=ESC+'G';x.cursorSavePosition=ESC+(isTerminalApp?'7':'s');x.cursorRestorePosition=ESC+(isTerminalApp?'8':'u');x.cursorGetPosition=ESC+'6n';x.cursorNextLine=ESC+'E';x.cursorPrevLine=ESC+'F';x.cursorHide=ESC+'?25l';x.cursorShow=ESC+'?25h';x.eraseLines=function(count){var clear='';for(var i=0;i<count;i++){clear+=x.eraseLine+(i<count-1?x.cursorUp():'');}if(count){clear+=x.cursorLeft;}return clear;};x.eraseEndLine=ESC+'K';x.eraseStartLine=ESC+'1K';x.eraseLine=ESC+'2K';x.eraseDown=ESC+'J';x.eraseUp=ESC+'1J';x.eraseScreen=ESC+'2J';x.scrollUp=ESC+'S';x.scrollDown=ESC+'T';x.clearScreen="\x1Bc";x.clearTerminal=process.platform==='win32'?"".concat(x.eraseScreen).concat(ESC,"0f"):// 1. Erases the screen (Only done in case `2` is not supported)
// 2. Erases the whole screen including scrollback buffer
// 3. Moves cursor to the top-left position
// More info: https://www.real-world-systems.com/docs/ANSIcode.html
"".concat(x.eraseScreen).concat(ESC,"3J").concat(ESC,"H");x.beep=BEL;x.link=function(text,url){return[OSC,'8',SEP,SEP,url,BEL,text,OSC,'8',SEP,SEP,BEL].join('');};x.image=function(buf,opts){opts=opts||{};var ret=OSC+'1337;File=inline=1';if(opts.width){ret+=";width=".concat(opts.width);}if(opts.height){ret+=";height=".concat(opts.height);}if(opts.preserveAspectRatio===false){ret+=';preserveAspectRatio=0';}return ret+':'+buf.toString('base64')+BEL;};x.iTerm={};x.iTerm.setCwd=function(cwd){return OSC+'50;CurrentDir='+(cwd||process.cwd())+BEL;};});var ansiRegex$2=function ansiRegex$2(){var pattern=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)",'(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))'].join('|');return new RegExp(pattern,'g');};var stripAnsi$1=function stripAnsi$1(input){return typeof input==='string'?input.replace(ansiRegex$2(),''):input;};/* eslint-disable yoda */var isFullwidthCodePoint$1=function isFullwidthCodePoint$1(x){if(Number.isNaN(x)){return false;}// code points are derived from:
// http://www.unix.org/Public/UNIDATA/EastAsianWidth.txt
if(x>=0x1100&&(x<=0x115f||// Hangul Jamo
x===0x2329||// LEFT-POINTING ANGLE BRACKET
x===0x232a||// RIGHT-POINTING ANGLE BRACKET
// CJK Radicals Supplement .. Enclosed CJK Letters and Months
0x2e80<=x&&x<=0x3247&&x!==0x303f||// Enclosed CJK Letters and Months .. CJK Unified Ideographs Extension A
0x3250<=x&&x<=0x4dbf||// CJK Unified Ideographs .. Yi Radicals
0x4e00<=x&&x<=0xa4c6||// Hangul Jamo Extended-A
0xa960<=x&&x<=0xa97c||// Hangul Syllables
0xac00<=x&&x<=0xd7a3||// CJK Compatibility Ideographs
0xf900<=x&&x<=0xfaff||// Vertical Forms
0xfe10<=x&&x<=0xfe19||// CJK Compatibility Forms .. Small Form Variants
0xfe30<=x&&x<=0xfe6b||// Halfwidth and Fullwidth Forms
0xff01<=x&&x<=0xff60||0xffe0<=x&&x<=0xffe6||// Kana Supplement
0x1b000<=x&&x<=0x1b001||// Enclosed Ideographic Supplement
0x1f200<=x&&x<=0x1f251||// CJK Unified Ideographs Extension B .. Tertiary Ideographic Plane
0x20000<=x&&x<=0x3fffd)){return true;}return false;};var stringWidth$1=function stringWidth$1(str){if(typeof str!=='string'||str.length===0){return 0;}str=stripAnsi$1(str);var width=0;for(var i=0;i<str.length;i++){var code=str.codePointAt(i);// Ignore control characters
if(code<=0x1F||code>=0x7F&&code<=0x9F){continue;}// Ignore combining characters
if(code>=0x300&&code<=0x36F){continue;}// Surrogates
if(code>0xFFFF){i++;}width+=isFullwidthCodePoint$1(code)?2:1;}return width;};var ESCAPES$1=new Set(["\x1B","\x9B"]);var END_CODE$1=39;var ESCAPE_CODES$1=new Map([[0,0],[1,22],[2,22],[3,23],[4,24],[7,27],[8,28],[9,29],[30,39],[31,39],[32,39],[33,39],[34,39],[35,39],[36,39],[37,39],[90,39],[40,49],[41,49],[42,49],[43,49],[44,49],[45,49],[46,49],[47,49]]);var wrapAnsi$1=function wrapAnsi$1(code){return"".concat(ESCAPES$1.values().next().value,"[").concat(code,"m");};// Calculate the length of words split on ' ', ignoring
// the extra characters added by ansi escape codes
var wordLengths=function wordLengths(str){return str.split(' ').map(function(s){return stringWidth$1(s);});};// Wrap a long word across multiple rows
// Ansi escape codes do not count towards length
var wrapWord=function wrapWord(rows,word,cols){var arr=Array.from(word);var insideEscape=false;var visible=stringWidth$1(stripAnsi$1(rows[rows.length-1]));var _iterator7=_createForOfIteratorHelper(arr.entries()),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var item=_step7.value;var i=item[0];var _char2=item[1];var charLength=stringWidth$1(_char2);if(visible+charLength<=cols){rows[rows.length-1]+=_char2;}else{rows.push(_char2);visible=0;}if(ESCAPES$1.has(_char2)){insideEscape=true;}else if(insideEscape&&_char2==='m'){insideEscape=false;continue;}if(insideEscape){continue;}visible+=charLength;if(visible===cols&&i<arr.length-1){rows.push('');visible=0;}}// It's possible that the last row we copy over is only
// ansi escape characters, handle this edge-case
}catch(err){_iterator7.e(err);}finally{_iterator7.f();}if(!visible&&rows[rows.length-1].length>0&&rows.length>1){rows[rows.length-2]+=rows.pop();}};// The wrap-ansi module can be invoked
// in either 'hard' or 'soft' wrap mode
//
// 'hard' will never allow a string to take up more
// than cols characters
//
// 'soft' allows long words to expand past the column length
var exec=function exec(str,cols,opts){var options=opts||{};if(str.trim()===''){return options.trim===false?str:str.trim();}var pre='';var ret='';var escapeCode;var lengths=wordLengths(str);var words=str.split(' ');var rows=[''];var _iterator8=_createForOfIteratorHelper(Array.from(words).entries()),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var item=_step8.value;var i=item[0];var word=item[1];rows[rows.length-1]=options.trim===false?rows[rows.length-1]:rows[rows.length-1].trim();var rowLength=stringWidth$1(rows[rows.length-1]);if(rowLength||word===''){if(rowLength===cols&&options.wordWrap===false){// If we start with a new word but the current row length equals the length of the columns, add a new row
rows.push('');rowLength=0;}rows[rows.length-1]+=' ';rowLength++;}// In 'hard' wrap mode, the length of a line is
// never allowed to extend past 'cols'
if(lengths[i]>cols&&options.hard){if(rowLength){rows.push('');}wrapWord(rows,word,cols);continue;}if(rowLength+lengths[i]>cols&&rowLength>0){if(options.wordWrap===false&&rowLength<cols){wrapWord(rows,word,cols);continue;}rows.push('');}if(rowLength+lengths[i]>cols&&options.wordWrap===false){wrapWord(rows,word,cols);continue;}rows[rows.length-1]+=word;}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}pre=rows.map(function(r){return options.trim===false?r:r.trim();}).join('\n');var _iterator9=_createForOfIteratorHelper(Array.from(pre).entries()),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _item=_step9.value;var _i10=_item[0];var _char3=_item[1];ret+=_char3;if(ESCAPES$1.has(_char3)){var _code=parseFloat(/\d[^m]*/.exec(pre.slice(_i10,_i10+4)));escapeCode=_code===END_CODE$1?null:_code;}var code=ESCAPE_CODES$1.get(Number(escapeCode));if(escapeCode&&code){if(pre[_i10+1]==='\n'){ret+=wrapAnsi$1(code);}else if(_char3==='\n'){ret+=wrapAnsi$1(escapeCode);}}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return ret;};// For each newline, invoke the method separately
var wrapAnsi_1=function wrapAnsi_1(str,cols,opts){return String(str).normalize().split('\n').map(function(line){return exec(line,cols,opts);}).join('\n');};var getWidth=function getWidth(stream){var columns=stream.columns;if(!columns){return 80;}// Windows appears to wrap a character early
// I hate Windows so much
if(process.platform==='win32'){return columns-1;}return columns;};var main$3=function main$3(stream,options){options=Object.assign({showCursor:false},options);var prevLineCount=0;var render=function render(){if(!options.showCursor){cliCursor.hide();}var out=[].join.call(arguments,' ')+'\n';out=wrapAnsi_1(out,getWidth(stream),{trim:false,hard:true,wordWrap:false});stream.write(ansiEscapes.eraseLines(prevLineCount)+out);prevLineCount=out.split('\n').length;};render.clear=function(){stream.write(ansiEscapes.eraseLines(prevLineCount));prevLineCount=0;};render.done=function(){prevLineCount=0;if(!options.showCursor){cliCursor.show();}};return render;};var logUpdate=main$3(process.stdout);var stderr$1=main$3(process.stderr);var create=main$3;logUpdate.stderr=stderr$1;logUpdate.create=create;var ansiStyles$1=createCommonjsModule(function(module){function assembleStyles(){var styles={modifiers:{reset:[0,0],bold:[1,22],// 21 isn't widely supported and 22 does the same thing
dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};// fix humans
styles.colors.grey=styles.colors.gray;Object.keys(styles).forEach(function(groupName){var group=styles[groupName];Object.keys(group).forEach(function(styleName){var style=group[styleName];styles[styleName]=group[styleName]={open:"\x1B["+style[0]+'m',close:"\x1B["+style[1]+'m'};});Object.defineProperty(styles,groupName,{value:group,enumerable:false});});return styles;}Object.defineProperty(module,'exports',{enumerable:true,get:assembleStyles});});var ansiRegex$1=function ansiRegex$1(){return /[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g;};var ansiRegex=ansiRegex$1();var stripAnsi=function stripAnsi(str){return typeof str==='string'?str.replace(ansiRegex,''):str;};var re=new RegExp(ansiRegex$1().source);// remove the `g` flag
var hasAnsi=re.test.bind(re);var argv$1=process.argv;var terminator$1=argv$1.indexOf('--');var hasFlag$2=function hasFlag$2(flag){flag='--'+flag;var pos=argv$1.indexOf(flag);return pos!==-1&&(terminator$1!==-1?pos<terminator$1:true);};var supportsColor$2=function(){if('FORCE_COLOR'in process.env){return true;}if(hasFlag$2('no-color')||hasFlag$2('no-colors')||hasFlag$2('color=false')){return false;}if(hasFlag$2('color')||hasFlag$2('colors')||hasFlag$2('color=true')||hasFlag$2('color=always')){return true;}if(process.stdout&&!process.stdout.isTTY){return false;}if(process.platform==='win32'){return true;}if('COLORTERM'in process.env){return true;}if(process.env.TERM==='dumb'){return false;}if(/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)){return true;}return false;}();var defineProps$1=Object.defineProperties;var isSimpleWindowsTerm$1=process.platform==='win32'&&!/^xterm/i.test(process.env.TERM);function Chalk$1(options){// detect mode if not set manually
this.enabled=!options||options.enabled===undefined?supportsColor$2:options.enabled;}// use bright blue on Windows as the normal blue color is illegible
if(isSimpleWindowsTerm$1){ansiStyles$1.blue.open="\x1B[94m";}var styles$2=function(){var ret={};Object.keys(ansiStyles$1).forEach(function(key){ansiStyles$1[key].closeRe=new RegExp(escapeStringRegexp(ansiStyles$1[key].close),'g');ret[key]={get:function get(){return build$1.call(this,this._styles.concat(key));}};});return ret;}();var proto$1=defineProps$1(function chalk(){},styles$2);function build$1(_styles){var builder=function builder(){return applyStyle$1.apply(builder,arguments);};builder._styles=_styles;builder.enabled=this.enabled;// __proto__ is used because we must return a function, but there is
// no way to create a function with a different prototype.
/* eslint-disable no-proto */builder.__proto__=proto$1;return builder;}function applyStyle$1(){// support varags, but simply cast to string in case there's only one arg
var args=arguments;var argsLen=args.length;var str=argsLen!==0&&String(arguments[0]);if(argsLen>1){// don't slice `arguments`, it prevents v8 optimizations
for(var a=1;a<argsLen;a++){str+=' '+args[a];}}if(!this.enabled||!str){return str;}var nestedStyles=this._styles;var i=nestedStyles.length;// Turns out that on Windows dimmed gray text becomes invisible in cmd.exe,
// see https://github.com/chalk/chalk/issues/58
// If we're on Windows and we're dealing with a gray color, temporarily make 'dim' a noop.
var originalDim=ansiStyles$1.dim.open;if(isSimpleWindowsTerm$1&&(nestedStyles.indexOf('gray')!==-1||nestedStyles.indexOf('grey')!==-1)){ansiStyles$1.dim.open='';}while(i--){var code=ansiStyles$1[nestedStyles[i]];// Replace any instances already present with a re-opening code
// otherwise only the part of the string until said closing code
// will be colored, and the rest will simply be 'plain'.
str=code.open+str.replace(code.closeRe,code.open)+code.close;}// Reset the original 'dim' if we changed it to work around the Windows dimmed gray issue.
ansiStyles$1.dim.open=originalDim;return str;}function init$1(){var ret={};Object.keys(styles$2).forEach(function(name){ret[name]={get:function get(){return build$1.call(this,[name]);}};});return ret;}defineProps$1(Chalk$1.prototype,init$1());var chalk$1=new Chalk$1();var styles_1$1=ansiStyles$1;var hasColor$1=hasAnsi;var stripColor$1=stripAnsi;var supportsColor_1$2=supportsColor$2;chalk$1.styles=styles_1$1;chalk$1.hasColor=hasColor$1;chalk$1.stripColor=stripColor$1;chalk$1.supportsColor=supportsColor_1$2;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/ /* eslint-disable no-unused-vars */var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError('Object.assign cannot be called with null or undefined');}return Object(val);}function shouldUseNative(){try{if(!Object.assign){return false;}// Detect buggy property enumeration order in older V8 versions.
// https://bugs.chromium.org/p/v8/issues/detail?id=4118
var test1=new String('abc');// eslint-disable-line no-new-wrappers
test1[5]='de';if(Object.getOwnPropertyNames(test1)[0]==='5'){return false;}// https://bugs.chromium.org/p/v8/issues/detail?id=3056
var test2={};for(var i=0;i<10;i++){test2['_'+String.fromCharCode(i)]=i;}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n];});if(order2.join('')!=='0123456789'){return false;}// https://bugs.chromium.org/p/v8/issues/detail?id=3056
var test3={};'abcdefghijklmnopqrst'.split('').forEach(function(letter){test3[letter]=letter;});if(Object.keys(Object.assign({},test3)).join('')!=='abcdefghijklmnopqrst'){return false;}return true;}catch(err){// We don't expect any of the above to throw, but better to be safe.
return false;}}var objectAssign=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key];}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]];}}}}return to;};var platform$1=process.platform;var main$2={tick:'✔',cross:'✖',star:'★',square:'▇',squareSmall:'◻',squareSmallFilled:'◼',play:'▶',circle:'◯',circleFilled:'◉',circleDotted:'◌',circleDouble:'◎',circleCircle:'ⓞ',circleCross:'ⓧ',circlePipe:'Ⓘ',circleQuestionMark:'?⃝',bullet:'●',dot:'․',line:'─',ellipsis:'…',pointer:'❯',pointerSmall:'›',info:'ℹ',warning:'⚠',hamburger:'☰',smiley:'㋡',mustache:'෴',heart:'♥',arrowUp:'↑',arrowDown:'↓',arrowLeft:'←',arrowRight:'→',radioOn:'◉',radioOff:'◯',checkboxOn:'☒',checkboxOff:'☐',checkboxCircleOn:'ⓧ',checkboxCircleOff:'Ⓘ',questionMarkPrefix:'?⃝',oneHalf:'½',oneThird:'⅓',oneQuarter:'¼',oneFifth:'⅕',oneSixth:'⅙',oneSeventh:'⅐',oneEighth:'⅛',oneNinth:'⅑',oneTenth:'⅒',twoThirds:'⅔',twoFifths:'⅖',threeQuarters:'¾',threeFifths:'⅗',threeEighths:'⅜',fourFifths:'⅘',fiveSixths:'⅚',fiveEighths:'⅝',sevenEighths:'⅞'};var win$1={tick:'√',cross:'×',star:'*',square:'█',squareSmall:'[ ]',squareSmallFilled:'[█]',play:'►',circle:'( )',circleFilled:'(*)',circleDotted:'( )',circleDouble:'( )',circleCircle:'(○)',circleCross:'(×)',circlePipe:'(│)',circleQuestionMark:'(?)',bullet:'*',dot:'.',line:'─',ellipsis:'...',pointer:'>',pointerSmall:'»',info:'i',warning:'‼',hamburger:'≡',smiley:'☺',mustache:'┌─┐',heart:main$2.heart,arrowUp:main$2.arrowUp,arrowDown:main$2.arrowDown,arrowLeft:main$2.arrowLeft,arrowRight:main$2.arrowRight,radioOn:'(*)',radioOff:'( )',checkboxOn:'[×]',checkboxOff:'[ ]',checkboxCircleOn:'(×)',checkboxCircleOff:'( )',questionMarkPrefix:'？',oneHalf:'1/2',oneThird:'1/3',oneQuarter:'1/4',oneFifth:'1/5',oneSixth:'1/6',oneSeventh:'1/7',oneEighth:'1/8',oneNinth:'1/9',oneTenth:'1/10',twoThirds:'2/3',twoFifths:'2/5',threeQuarters:'3/4',threeFifths:'3/5',threeEighths:'3/8',fourFifths:'4/5',fiveSixths:'5/6',fiveEighths:'5/8',sevenEighths:'7/8'};if(platform$1==='linux'){// the main one doesn't look that good on Ubuntu
main$2.questionMarkPrefix='?';}var figures=platform$1==='win32'?win$1:main$2;var fn=function fn(str){if(figures===main$2){return str;}Object.keys(main$2).forEach(function(key){if(main$2[key]===figures[key]){return;}str=str.replace(new RegExp(escapeStringRegexp(main$2[key]),'g'),figures[key]);});return str;};var figures_1=objectAssign(fn,figures);var indentString=function indentString(str,count,opts){// Support older versions: use the third parameter as options.indent
// TODO: Remove the workaround in the next major version
var options=_typeof(opts)==='object'?Object.assign({indent:' '},opts):{indent:opts||' '};count=count===undefined?1:count;if(typeof str!=='string'){throw new TypeError("Expected `input` to be a `string`, got `".concat(_typeof(str),"`"));}if(typeof count!=='number'){throw new TypeError("Expected `count` to be a `number`, got `".concat(_typeof(count),"`"));}if(typeof options.indent!=='string'){throw new TypeError("Expected `options.indent` to be a `string`, got `".concat(_typeof(options.indent),"`"));}if(count===0){return str;}var regex=options.includeEmptyLines?/^/mg:/^(?!\s*$)/mg;return str.replace(regex,options.indent.repeat(count));};var ESCAPES=["\x1B","\x9B"];var END_CODE=39;var ESCAPE_CODES={0:0,1:22,2:22,3:23,4:24,7:27,8:28,9:29,30:39,31:39,32:39,33:39,34:39,35:39,36:39,37:39,90:39,40:49,41:49,42:49,43:49,44:49,45:49,46:49,47:49};function wrapAnsi(code){return ESCAPES[0]+'['+code+'m';}var sliceAnsi=function sliceAnsi(str,begin,end){end=end||str.length;var insideEscape=false;var escapeCode;var visible=0;var output='';for(var i=0;i<str.length;i++){var leftEscape=false;var x=str[i];if(ESCAPES.indexOf(x)!==-1){insideEscape=true;var code=/[0-9][^m]*/.exec(str.slice(i,i+4));escapeCode=code===END_CODE?null:code;}else if(insideEscape&&x==='m'){insideEscape=false;leftEscape=true;}if(!insideEscape&&!leftEscape){++visible;}if(visible>begin&&visible<=end){output+=x;}else if(visible===begin&&escapeCode!==undefined&&escapeCode!==END_CODE){output+=wrapAnsi(escapeCode);}else if(visible>=end){if(escapeCode!==undefined){output+=wrapAnsi(ESCAPE_CODES[escapeCode]||END_CODE);}break;}}return output;};/* eslint-disable babel/new-cap, xo/throw-new-error */var codePointAt=function codePointAt(str,pos){if(str===null||str===undefined){throw TypeError();}str=String(str);var size=str.length;var i=pos?Number(pos):0;if(Number.isNaN(i)){i=0;}if(i<0||i>=size){return undefined;}var first=str.charCodeAt(i);if(first>=0xD800&&first<=0xDBFF&&size>i+1){var second=str.charCodeAt(i+1);if(second>=0xDC00&&second<=0xDFFF){return(first-0xD800)*0x400+second-0xDC00+0x10000;}}return first;};var numberIsNan=Number.isNaN||function(x){return x!==x;};var isFullwidthCodePoint=function isFullwidthCodePoint(x){if(numberIsNan(x)){return false;}// https://github.com/nodejs/io.js/blob/cff7300a578be1b10001f2d967aaedc88aee6402/lib/readline.js#L1369
// code points are derived from:
// http://www.unix.org/Public/UNIDATA/EastAsianWidth.txt
if(x>=0x1100&&(x<=0x115f||// Hangul Jamo
0x2329===x||// LEFT-POINTING ANGLE BRACKET
0x232a===x||// RIGHT-POINTING ANGLE BRACKET
// CJK Radicals Supplement .. Enclosed CJK Letters and Months
0x2e80<=x&&x<=0x3247&&x!==0x303f||// Enclosed CJK Letters and Months .. CJK Unified Ideographs Extension A
0x3250<=x&&x<=0x4dbf||// CJK Unified Ideographs .. Yi Radicals
0x4e00<=x&&x<=0xa4c6||// Hangul Jamo Extended-A
0xa960<=x&&x<=0xa97c||// Hangul Syllables
0xac00<=x&&x<=0xd7a3||// CJK Compatibility Ideographs
0xf900<=x&&x<=0xfaff||// Vertical Forms
0xfe10<=x&&x<=0xfe19||// CJK Compatibility Forms .. Small Form Variants
0xfe30<=x&&x<=0xfe6b||// Halfwidth and Fullwidth Forms
0xff01<=x&&x<=0xff60||0xffe0<=x&&x<=0xffe6||// Kana Supplement
0x1b000<=x&&x<=0x1b001||// Enclosed Ideographic Supplement
0x1f200<=x&&x<=0x1f251||// CJK Unified Ideographs Extension B .. Tertiary Ideographic Plane
0x20000<=x&&x<=0x3fffd)){return true;}return false;};// https://github.com/nodejs/io.js/blob/cff7300a578be1b10001f2d967aaedc88aee6402/lib/readline.js#L1345
var stringWidth=function stringWidth(str){if(typeof str!=='string'||str.length===0){return 0;}var width=0;str=stripAnsi(str);for(var i=0;i<str.length;i++){var code=codePointAt(str,i);// ignore control characters
if(code<=0x1f||code>=0x7f&&code<=0x9f){continue;}// surrogates
if(code>=0x10000){i++;}if(isFullwidthCodePoint(code)){width+=2;}else{width++;}}return width;};var cliTruncate=function cliTruncate(input,columns,options){options=options||{};var position=options.position||'end';var ellipsis='…';if(typeof input!=='string'){throw new TypeError('Expected `input` to be a string, got '+_typeof(input));}if(typeof columns!=='number'){throw new TypeError('Expected `columns` to be a number, got '+_typeof(columns));}if(columns<1){return'';}if(columns===1){return ellipsis;}var length=stringWidth(input);if(length<=columns){return input;}if(position==='start'){return ellipsis+sliceAnsi(input,length-columns+1,length);}else if(position==='middle'){var half=Math.floor(columns/2);return sliceAnsi(input,0,half)+ellipsis+sliceAnsi(input,length-(columns-half)+1,length);}else if(position==='end'){return sliceAnsi(input,0,columns-1)+ellipsis;}throw new Error('Expected `options.position` to be either `start`, `middle` or `end`, got '+position);};var ansiStyles=createCommonjsModule(function(module){function assembleStyles(){var styles={modifiers:{reset:[0,0],bold:[1,22],// 21 isn't widely supported and 22 does the same thing
dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};// fix humans
styles.colors.grey=styles.colors.gray;Object.keys(styles).forEach(function(groupName){var group=styles[groupName];Object.keys(group).forEach(function(styleName){var style=group[styleName];styles[styleName]=group[styleName]={open:"\x1B["+style[0]+'m',close:"\x1B["+style[1]+'m'};});Object.defineProperty(styles,groupName,{value:group,enumerable:false});});return styles;}Object.defineProperty(module,'exports',{enumerable:true,get:assembleStyles});});var argv=process.argv;var terminator=argv.indexOf('--');var hasFlag$1=function hasFlag$1(flag){flag='--'+flag;var pos=argv.indexOf(flag);return pos!==-1&&(terminator!==-1?pos<terminator:true);};var supportsColor$1=function(){if('FORCE_COLOR'in process.env){return true;}if(hasFlag$1('no-color')||hasFlag$1('no-colors')||hasFlag$1('color=false')){return false;}if(hasFlag$1('color')||hasFlag$1('colors')||hasFlag$1('color=true')||hasFlag$1('color=always')){return true;}if(process.stdout&&!process.stdout.isTTY){return false;}if(process.platform==='win32'){return true;}if('COLORTERM'in process.env){return true;}if(process.env.TERM==='dumb'){return false;}if(/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)){return true;}return false;}();var defineProps=Object.defineProperties;var isSimpleWindowsTerm=process.platform==='win32'&&!/^xterm/i.test(process.env.TERM);function Chalk(options){// detect mode if not set manually
this.enabled=!options||options.enabled===undefined?supportsColor$1:options.enabled;}// use bright blue on Windows as the normal blue color is illegible
if(isSimpleWindowsTerm){ansiStyles.blue.open="\x1B[94m";}var styles$1=function(){var ret={};Object.keys(ansiStyles).forEach(function(key){ansiStyles[key].closeRe=new RegExp(escapeStringRegexp(ansiStyles[key].close),'g');ret[key]={get:function get(){return build.call(this,this._styles.concat(key));}};});return ret;}();var proto=defineProps(function chalk(){},styles$1);function build(_styles){var builder=function builder(){return applyStyle.apply(builder,arguments);};builder._styles=_styles;builder.enabled=this.enabled;// __proto__ is used because we must return a function, but there is
// no way to create a function with a different prototype.
/* eslint-disable no-proto */builder.__proto__=proto;return builder;}function applyStyle(){// support varags, but simply cast to string in case there's only one arg
var args=arguments;var argsLen=args.length;var str=argsLen!==0&&String(arguments[0]);if(argsLen>1){// don't slice `arguments`, it prevents v8 optimizations
for(var a=1;a<argsLen;a++){str+=' '+args[a];}}if(!this.enabled||!str){return str;}var nestedStyles=this._styles;var i=nestedStyles.length;// Turns out that on Windows dimmed gray text becomes invisible in cmd.exe,
// see https://github.com/chalk/chalk/issues/58
// If we're on Windows and we're dealing with a gray color, temporarily make 'dim' a noop.
var originalDim=ansiStyles.dim.open;if(isSimpleWindowsTerm&&(nestedStyles.indexOf('gray')!==-1||nestedStyles.indexOf('grey')!==-1)){ansiStyles.dim.open='';}while(i--){var code=ansiStyles[nestedStyles[i]];// Replace any instances already present with a re-opening code
// otherwise only the part of the string until said closing code
// will be colored, and the rest will simply be 'plain'.
str=code.open+str.replace(code.closeRe,code.open)+code.close;}// Reset the original 'dim' if we changed it to work around the Windows dimmed gray issue.
ansiStyles.dim.open=originalDim;return str;}function init(){var ret={};Object.keys(styles$1).forEach(function(name){ret[name]={get:function get(){return build.call(this,[name]);}};});return ret;}defineProps(Chalk.prototype,init());var chalk=new Chalk();var styles_1=ansiStyles;var hasColor=hasAnsi;var stripColor=stripAnsi;var supportsColor_1$1=supportsColor$1;chalk.styles=styles_1;chalk.hasColor=hasColor;chalk.stripColor=stripColor;chalk.supportsColor=supportsColor_1$1;var main$1={info:chalk.blue('ℹ'),success:chalk.green('✔'),warning:chalk.yellow('⚠'),error:chalk.red('✖')};var win={info:chalk.blue('i'),success:chalk.green('√'),warning:chalk.yellow('‼'),error:chalk.red('×')};var logSymbols=process.platform==='win32'?win:main$1;var frames=process.platform==='win32'?['-','\\','|','/']:['⠋','⠙','⠹','⠸','⠼','⠴','⠦','⠧','⠇','⠏'];var elegantSpinner=function elegantSpinner(){var i=0;return function(){return frames[i=++i%frames.length];};};var frames_1=frames;elegantSpinner.frames=frames_1;var pointer=chalk$1.yellow(figures_1.pointer);var skipped=chalk$1.yellow(figures_1.arrowDown);var isDefined=function isDefined(x){return x!==null&&x!==undefined;};var getSymbol=function getSymbol(task,options){if(!task.spinner){task.spinner=elegantSpinner();}if(task.isPending()){return options.showSubtasks!==false&&task.subtasks.length>0?pointer:chalk$1.yellow(task.spinner());}if(task.isCompleted()){return logSymbols.success;}if(task.hasFailed()){return task.subtasks.length>0?pointer:logSymbols.error;}if(task.isSkipped()){return skipped;}return' ';};var utils$1={isDefined:isDefined,getSymbol:getSymbol};var renderHelper=function renderHelper(tasks,options,level){level=level||0;var output=[];var _iterator10=_createForOfIteratorHelper(tasks),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _task=_step10.value;if(_task.isEnabled()){var _skipped=_task.isSkipped()?" ".concat(chalk$1.dim('[skipped]')):'';output.push(indentString(" ".concat(utils$1.getSymbol(_task,options)," ").concat(_task.title).concat(_skipped),level,'  '));if((_task.isPending()||_task.isSkipped()||_task.hasFailed())&&utils$1.isDefined(_task.output)){var data=_task.output;if(typeof data==='string'){data=stripAnsi(data.trim().split('\n').filter(Boolean).pop());if(data===''){data=undefined;}}if(utils$1.isDefined(data)){var out=indentString("".concat(figures_1.arrowRight," ").concat(data),level,'  ');output.push("   ".concat(chalk$1.gray(cliTruncate(out,process.stdout.columns-3))));}}if((_task.isPending()||_task.hasFailed()||options.collapse===false)&&(_task.hasFailed()||options.showSubtasks!==false)&&_task.subtasks.length>0){output=output.concat(renderHelper(_task.subtasks,options,level+1));}}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}return output.join('\n');};var _render=function render(tasks,options){logUpdate(renderHelper(tasks,options));};var UpdateRenderer=/*#__PURE__*/function(){function UpdateRenderer(tasks,options){_classCallCheck(this,UpdateRenderer);this._tasks=tasks;this._options=Object.assign({showSubtasks:true,collapse:true,clearOutput:false},options);}_createClass(UpdateRenderer,[{key:"render",value:function render(){var _this2=this;if(this._id){// Do not render if we are already rendering
return;}this._id=setInterval(function(){_render(_this2._tasks,_this2._options);},100);}},{key:"end",value:function end(err){if(this._id){clearInterval(this._id);this._id=undefined;}_render(this._tasks,this._options);if(this._options.clearOutput&&err===undefined){logUpdate.clear();}else{logUpdate.done();}}}]);return UpdateRenderer;}();var listrUpdateRenderer=UpdateRenderer;var renderers={silent:listrSilentRenderer,verbose:listrVerboseRenderer,"default":listrUpdateRenderer};var isRendererSupported=function isRendererSupported(renderer){return process.stdout.isTTY===true||renderer.nonTTY===true;};var getRendererClass=function getRendererClass(renderer){if(typeof renderer==='string'){return renderers[renderer]||renderers["default"];}return typeof renderer==='function'?renderer:renderers["default"];};var getRenderer=function getRenderer(renderer,fallbackRenderer){var ret=getRendererClass(renderer);if(!isRendererSupported(ret)){ret=getRendererClass(fallbackRenderer);if(!ret||!isRendererSupported(ret)){ret=renderers.verbose;}}return ret;};var renderer={getRenderer:getRenderer};var state={PENDING:0,COMPLETED:1,FAILED:2,SKIPPED:3};state.toString=function(input){switch(input){case state.PENDING:return'pending';case state.COMPLETED:return'completed';case state.FAILED:return'failed';case state.SKIPPED:return'skipped';default:return'unknown';}};var state_1=state;var isStream_1$2=createCommonjsModule(function(module){var isStream=module.exports=function(stream){return stream!==null&&_typeof(stream)==='object'&&typeof stream.pipe==='function';};isStream.writable=function(stream){return isStream(stream)&&stream.writable!==false&&typeof stream._write==='function'&&_typeof(stream._writableState)==='object';};isStream.readable=function(stream){return isStream(stream)&&stream.readable!==false&&typeof stream._read==='function'&&_typeof(stream._readableState)==='object';};isStream.duplex=function(stream){return isStream.writable(stream)&&isStream.readable(stream);};isStream.transform=function(stream){return isStream.duplex(stream)&&typeof stream._transform==='function'&&_typeof(stream._transformState)==='object';};});function symbolObservablePonyfill(root){var result;var _Symbol=root.Symbol;if(typeof _Symbol==='function'){if(_Symbol.observable){result=_Symbol.observable;}else{result=_Symbol('observable');_Symbol.observable=result;}}else{result='@@observable';}return result;}/* global window */var root;if(typeof self!=='undefined'){root=self;}else if(typeof window!=='undefined'){root=window;}else if(typeof global!=='undefined'){root=global;}else if(typeof module!=='undefined'){root=module;}else{root=Function('return this')();}var result=symbolObservablePonyfill(root);var symbolObservable$1=result["default"];var isObservable$1=function isObservable$1(value){return Boolean(value&&value[symbolObservable$1]&&value===value[symbolObservable$1]());};// RxJS@6 symbol (https://github.com/sindresorhus/is-observable/issues/1#issuecomment-387843191)
var symbolObservable=typeof Symbol==='function'&&Symbol.observable||'@@observable';// eslint-disable-line no-mixed-operators
var isObservable=function isObservable(obj){return Boolean(obj&&obj[symbolObservable]&&obj===obj[symbolObservable]())||isObservable$1(obj);};var isListr=function isListr(obj){return Boolean(obj&&obj.setRenderer&&obj.add&&obj.run);};var isObservable_1=function isObservable_1(obj){return isObservable(obj);};var isStream_1$1=function isStream_1$1(obj){return isStream_1$2(obj)&&!isObservable(obj);};var utils={isListr:isListr,isObservable:isObservable_1,isStream:isStream_1$1};var ListrError=/*#__PURE__*/function(_Error){_inherits(ListrError,_Error);var _super2=_createSuper(ListrError);function ListrError(message){var _this3;_classCallCheck(this,ListrError);_this3=_super2.call(this,message);_this3.name='ListrError';return _this3;}return ListrError;}(/*#__PURE__*/_wrapNativeSuper(Error));var listrError=ListrError;var Subject=_esm5.Subject;var defaultSkipFn=function defaultSkipFn(){return false;};var Task=/*#__PURE__*/function(_Subject){_inherits(Task,_Subject);var _super3=_createSuper(Task);function Task(listr,task,options){var _this4;_classCallCheck(this,Task);_this4=_super3.call(this);if(!task){throw new TypeError('Expected a task');}if(typeof task.title!=='string'){throw new TypeError("Expected property `title` to be of type `string`, got `".concat(_typeof(task.title),"`"));}if(typeof task.task!=='function'){throw new TypeError("Expected property `task` to be of type `function`, got `".concat(_typeof(task.task),"`"));}if(task.skip&&typeof task.skip!=='function'){throw new TypeError("Expected property `skip` to be of type `function`, got `".concat(_typeof(task.skip),"`"));}if(task.enabled&&typeof task.enabled!=='function'){throw new TypeError("Expected property `enabled` to be of type `function`, got `".concat(_typeof(task.enabled),"`"));}_this4._listr=listr;_this4._options=options||{};_this4._subtasks=[];_this4._enabledFn=task.enabled;_this4._isEnabled=true;_this4.output=undefined;_this4.title=task.title;_this4.skip=task.skip||defaultSkipFn;_this4.task=task.task;return _this4;}_createClass(Task,[{key:"subtasks",get:function get(){return this._subtasks;}},{key:"state",get:function get(){return state_1.toString(this._state);},set:function set(state){this._state=state;this.next({type:'STATE'});}},{key:"check",value:function check(ctx){// Check if a task is enabled or disabled
if(this._state===undefined&&this._enabledFn){var isEnabled=this._enabledFn(ctx);if(this._isEnabled!==isEnabled){this._isEnabled=isEnabled;this.next({type:'ENABLED',data:isEnabled});}}}},{key:"hasSubtasks",value:function hasSubtasks(){return this._subtasks.length>0;}},{key:"isPending",value:function isPending(){return this._state===state_1.PENDING;}},{key:"isSkipped",value:function isSkipped(){return this._state===state_1.SKIPPED;}},{key:"isCompleted",value:function isCompleted(){return this._state===state_1.COMPLETED;}},{key:"isEnabled",value:function isEnabled(){return this._isEnabled;}},{key:"hasFailed",value:function hasFailed(){return this._state===state_1.FAILED;}},{key:"run",value:function run(context,wrapper){var _this5=this;var handleResult=function handleResult(result){// Detect the subtask
if(utils.isListr(result)){result._options=Object.assign(_this5._options,result._options);result.exitOnError=result._options.exitOnError;result.setRenderer(renderer.getRenderer('silent'));_this5._subtasks=result.tasks;_this5.next({type:'SUBTASKS'});return result.run(context);}// Detect stream
if(utils.isStream(result)){result=streamToObservable(result);}// Detect Observable
if(utils.isObservable(result)){result=new Promise(function(resolve,reject){result.subscribe({next:function next(data){_this5.output=data;_this5.next({type:'DATA',data:data});},error:reject,complete:resolve});});}// Detect promise
if(isPromise_1(result)){return result.then(handleResult);}return result;};return Promise.resolve().then(function(){_this5.state=state_1.PENDING;return _this5.skip(context);}).then(function(skipped){if(skipped){if(typeof skipped==='string'){_this5.output=skipped;}_this5.state=state_1.SKIPPED;return;}return handleResult(_this5.task(context,wrapper));}).then(function(){if(_this5.isPending()){_this5.state=state_1.COMPLETED;}})["catch"](function(error){_this5.state=state_1.FAILED;if(error instanceof listrError){wrapper.report(error);return;}if(!_this5.hasSubtasks()){// Do not show the message if we have subtasks as the error is already shown in the subtask
_this5.output=error.message;}_this5.next({type:'DATA',data:error.message});wrapper.report(error);if(_this5._listr.exitOnError!==false){// Do not exit when explicitely set to `false`
throw error;}}).then(function(){// Mark the Observable as completed
_this5.complete();});}}]);return Task;}(Subject);var task=Task;var TaskWrapper=/*#__PURE__*/function(){function TaskWrapper(task,errors){_classCallCheck(this,TaskWrapper);this._task=task;this._errors=errors;}_createClass(TaskWrapper,[{key:"title",get:function get(){return this._task.title;},set:function set(title){this._task.title=title;this._task.next({type:'TITLE',data:title});}},{key:"output",set:function set(data){this._task.output=data;this._task.next({type:'DATA',data:data});}},{key:"report",value:function report(error){if(error instanceof listrError){var _iterator11=_createForOfIteratorHelper(error.errors),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var err=_step11.value;this._errors.push(err);}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}else{this._errors.push(error);}}},{key:"skip",value:function skip(message){if(message&&typeof message!=='string'){throw new TypeError("Expected `message` to be of type `string`, got `".concat(_typeof(message),"`"));}if(message){this._task.output=message;}this._task.state=state_1.SKIPPED;}},{key:"run",value:function run(ctx){return this._task.run(ctx,this);}}]);return TaskWrapper;}();var taskWrapper=TaskWrapper;var runTask=function runTask(task,context,errors){if(!task.isEnabled()){return Promise.resolve();}return new taskWrapper(task,errors).run(context);};var Listr=/*#__PURE__*/function(){function Listr(tasks,opts){_classCallCheck(this,Listr);if(tasks&&!Array.isArray(tasks)&&_typeof(tasks)==='object'){if(typeof tasks.title==='string'&&typeof tasks.task==='function'){throw new TypeError('Expected an array of tasks or an options object, got a task object');}opts=tasks;tasks=[];}if(tasks&&!Array.isArray(tasks)){throw new TypeError('Expected an array of tasks');}this._options=Object.assign({showSubtasks:true,concurrent:false,renderer:'default',nonTTYRenderer:'verbose'},opts);this._tasks=[];this.concurrency=1;if(this._options.concurrent===true){this.concurrency=Infinity;}else if(typeof this._options.concurrent==='number'){this.concurrency=this._options.concurrent;}this._RendererClass=renderer.getRenderer(this._options.renderer,this._options.nonTTYRenderer);this.exitOnError=this._options.exitOnError;this.add(tasks||[]);}_createClass(Listr,[{key:"_checkAll",value:function _checkAll(context){var _iterator12=_createForOfIteratorHelper(this._tasks),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _task2=_step12.value;_task2.check(context);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}},{key:"tasks",get:function get(){return this._tasks;}},{key:"setRenderer",value:function setRenderer(value){this._RendererClass=renderer.getRenderer(value);}},{key:"add",value:function add(task$1){var tasks=Array.isArray(task$1)?task$1:[task$1];var _iterator13=_createForOfIteratorHelper(tasks),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _task$=_step13.value;this._tasks.push(new task(this,_task$,this._options));}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}return this;}},{key:"render",value:function render(){if(!this._renderer){this._renderer=new this._RendererClass(this._tasks,this._options);}return this._renderer.render();}},{key:"run",value:function run(context){var _this6=this;this.render();context=context||Object.create(null);var errors=[];this._checkAll(context);var tasks=pMap_1(this._tasks,function(task){_this6._checkAll(context);return runTask(task,context,errors);},{concurrency:this.concurrency});return tasks.then(function(){if(errors.length>0){var err=new listrError('Something went wrong');err.errors=errors;throw err;}_this6._renderer.end();return context;})["catch"](function(error){error.context=context;_this6._renderer.end(error);throw error;});}}]);return Listr;}();var listr=Listr;/**
 * Helpers.
 */var s=1000;var m=s*60;var h=m*60;var d=h*24;var w=d*7;var y=d*365.25;/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */var ms=function ms(val,options){options=options||{};var type=_typeof(val);if(type==='string'&&val.length>0){return parse$1(val);}else if(type==='number'&&isFinite(val)){return options["long"]?fmtLong(val):fmtShort(val);}throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(val));};/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */function parse$1(str){str=String(str);if(str.length>100){return;}var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(!match){return;}var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case'years':case'year':case'yrs':case'yr':case'y':return n*y;case'weeks':case'week':case'w':return n*w;case'days':case'day':case'd':return n*d;case'hours':case'hour':case'hrs':case'hr':case'h':return n*h;case'minutes':case'minute':case'mins':case'min':case'm':return n*m;case'seconds':case'second':case'secs':case'sec':case's':return n*s;case'milliseconds':case'millisecond':case'msecs':case'msec':case'ms':return n;default:return undefined;}}/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */function fmtShort(ms){var msAbs=Math.abs(ms);if(msAbs>=d){return Math.round(ms/d)+'d';}if(msAbs>=h){return Math.round(ms/h)+'h';}if(msAbs>=m){return Math.round(ms/m)+'m';}if(msAbs>=s){return Math.round(ms/s)+'s';}return ms+'ms';}/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */function fmtLong(ms){var msAbs=Math.abs(ms);if(msAbs>=d){return plural(ms,msAbs,d,'day');}if(msAbs>=h){return plural(ms,msAbs,h,'hour');}if(msAbs>=m){return plural(ms,msAbs,m,'minute');}if(msAbs>=s){return plural(ms,msAbs,s,'second');}return ms+' ms';}/**
 * Pluralization helper.
 */function plural(ms,msAbs,n,name){var isPlural=msAbs>=n*1.5;return Math.round(ms/n)+' '+name+(isPlural?'s':'');}/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */function setup$2(env){createDebug.debug=createDebug;createDebug["default"]=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=ms;createDebug.destroy=destroy;Object.keys(env).forEach(function(key){createDebug[key]=env[key];});/**
	* The currently active debug mode names, and names to skip.
	*/createDebug.names=[];createDebug.skips=[];/**
	* Map of special "%n" handling functions, for the debug "format" argument.
	*
	* Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
	*/createDebug.formatters={};/**
	* Selects a color for a debug namespace
	* @param {String} namespace The namespace string for the for the debug instance to be colored
	* @return {Number|String} An ANSI color code for the given namespace
	* @api private
	*/function selectColor(namespace){var hash=0;for(var i=0;i<namespace.length;i++){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;// Convert to 32bit integer
}return createDebug.colors[Math.abs(hash)%createDebug.colors.length];}createDebug.selectColor=selectColor;/**
	* Create a debugger with the given `namespace`.
	*
	* @param {String} namespace
	* @return {Function}
	* @api public
	*/function createDebug(namespace){var prevTime;var enableOverride=null;var namespacesCache;var enabledCache;function debug(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}// Disabled?
if(!debug.enabled){return;}var self=debug;// Set `diff` timestamp
var curr=Number(new Date());var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;args[0]=createDebug.coerce(args[0]);if(typeof args[0]!=='string'){// Anything else let's inspect with %O
args.unshift('%O');}// Apply any `formatters` transformations
var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){// If we encounter an escaped % then don't increase the array index
if(match==='%%'){return'%';}index++;var formatter=createDebug.formatters[format];if(typeof formatter==='function'){var val=args[index];match=formatter.call(self,val);// Now we need to remove `args[index]` since it's inlined in the `format`
args.splice(index,1);index--;}return match;});// Apply env-specific formatting (colors, etc.)
createDebug.formatArgs.call(self,args);var logFn=self.log||createDebug.log;logFn.apply(self,args);}debug.namespace=namespace;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(namespace);debug.extend=extend;debug.destroy=createDebug.destroy;// XXX Temporary. Will be removed in the next major release.
Object.defineProperty(debug,'enabled',{enumerable:true,configurable:false,get:function get(){if(enableOverride!==null){return enableOverride;}if(namespacesCache!==createDebug.namespaces){namespacesCache=createDebug.namespaces;enabledCache=createDebug.enabled(namespace);}return enabledCache;},set:function set(v){enableOverride=v;}});// Env-specific initialization logic for debug instances
if(typeof createDebug.init==='function'){createDebug.init(debug);}return debug;}function extend(namespace,delimiter){var newDebug=createDebug(this.namespace+(typeof delimiter==='undefined'?':':delimiter)+namespace);newDebug.log=this.log;return newDebug;}/**
	* Enables a debug mode by namespaces. This can include modes
	* separated by a colon and wildcards.
	*
	* @param {String} namespaces
	* @api public
	*/function enable(namespaces){createDebug.save(namespaces);createDebug.namespaces=namespaces;createDebug.names=[];createDebug.skips=[];var i;var split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i]){// ignore empty strings
continue;}namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){createDebug.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{createDebug.names.push(new RegExp('^'+namespaces+'$'));}}}/**
	* Disable debug output.
	*
	* @return {String} namespaces
	* @api public
	*/function disable(){var namespaces=[].concat(_toConsumableArray(createDebug.names.map(toNamespace)),_toConsumableArray(createDebug.skips.map(toNamespace).map(function(namespace){return'-'+namespace;}))).join(',');createDebug.enable('');return namespaces;}/**
	* Returns true if the given mode name is enabled, false otherwise.
	*
	* @param {String} name
	* @return {Boolean}
	* @api public
	*/function enabled(name){if(name[name.length-1]==='*'){return true;}var i;var len;for(i=0,len=createDebug.skips.length;i<len;i++){if(createDebug.skips[i].test(name)){return false;}}for(i=0,len=createDebug.names.length;i<len;i++){if(createDebug.names[i].test(name)){return true;}}return false;}/**
	* Convert regexp to namespace
	*
	* @param {RegExp} regxep
	* @return {String} namespace
	* @api private
	*/function toNamespace(regexp){return regexp.toString().substring(2,regexp.toString().length-2).replace(/\.\*\?$/,'*');}/**
	* Coerce `val`.
	*
	* @param {Mixed} val
	* @return {Mixed}
	* @api private
	*/function coerce(val){if(val instanceof Error){return val.stack||val.message;}return val;}/**
	* XXX DO NOT USE. This is a temporary stub function.
	* XXX It WILL be removed in the next major release.
	*/function destroy(){console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');}createDebug.enable(createDebug.load());return createDebug;}var common=setup$2;var browser=createCommonjsModule(function(module,exports){/* eslint-env browser */ /**
 * This is the web browser implementation of `debug()`.
 */exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage=localstorage();exports.destroy=function(){var warned=false;return function(){if(!warned){warned=true;console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');}};}();/**
 * Colors.
 */exports.colors=['#0000CC','#0000FF','#0033CC','#0033FF','#0066CC','#0066FF','#0099CC','#0099FF','#00CC00','#00CC33','#00CC66','#00CC99','#00CCCC','#00CCFF','#3300CC','#3300FF','#3333CC','#3333FF','#3366CC','#3366FF','#3399CC','#3399FF','#33CC00','#33CC33','#33CC66','#33CC99','#33CCCC','#33CCFF','#6600CC','#6600FF','#6633CC','#6633FF','#66CC00','#66CC33','#9900CC','#9900FF','#9933CC','#9933FF','#99CC00','#99CC33','#CC0000','#CC0033','#CC0066','#CC0099','#CC00CC','#CC00FF','#CC3300','#CC3333','#CC3366','#CC3399','#CC33CC','#CC33FF','#CC6600','#CC6633','#CC9900','#CC9933','#CCCC00','#CCCC33','#FF0000','#FF0033','#FF0066','#FF0099','#FF00CC','#FF00FF','#FF3300','#FF3333','#FF3366','#FF3399','#FF33CC','#FF33FF','#FF6600','#FF6633','#FF9900','#FF9933','#FFCC00','#FFCC33'];/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */ // eslint-disable-next-line complexity
function useColors(){// NB: In an Electron preload script, document will be defined but not fully
// initialized. Since we know we're in Chrome, we'll just detect this case
// explicitly
if(typeof window!=='undefined'&&window.process&&(window.process.type==='renderer'||window.process.__nwjs)){return true;}// Internet Explorer and Edge do not support colors.
if(typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false;}// Is webkit? http://stackoverflow.com/a/16459606/376773
// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||// Is firebug? http://stackoverflow.com/a/398120/376773
typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||// Is firefox >= v31?
// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||// Double check webkit in userAgent just in case we are in a worker
typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */function formatArgs(args){args[0]=(this.useColors?'%c':'')+this.namespace+(this.useColors?' %c':' ')+args[0]+(this.useColors?'%c ':' ')+'+'+module.exports.humanize(this.diff);if(!this.useColors){return;}var c='color: '+this.color;args.splice(1,0,c,'color: inherit');// The final "%c" is somewhat tricky, because there could be other
// arguments passed either before or after the %c, so we need to
// figure out the correct index to insert the CSS into
var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if(match==='%%'){return;}index++;if(match==='%c'){// We only are interested in the *last* %c
// (the user may have provided their own)
lastC=index;}});args.splice(lastC,0,c);}/**
 * Invokes `console.debug()` when available.
 * No-op when `console.debug` is not a "function".
 * If `console.debug` is not available, falls back
 * to `console.log`.
 *
 * @api public
 */exports.log=console.debug||console.log||function(){};/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */function save(namespaces){try{if(namespaces){exports.storage.setItem('debug',namespaces);}else{exports.storage.removeItem('debug');}}catch(error){// Swallow
// XXX (@Qix-) should we be logging these?
}}/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */function load(){var r;try{r=exports.storage.getItem('debug');}catch(error){// Swallow
// XXX (@Qix-) should we be logging these?
}// If debug isn't set in LS, and we're in Electron, try to load $DEBUG
if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */function localstorage(){try{// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
// The Browser also has localStorage in the global context.
return localStorage;}catch(error){// Swallow
// XXX (@Qix-) should we be logging these?
}}module.exports=common(exports);var formatters=module.exports.formatters;/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */formatters.j=function(v){try{return JSON.stringify(v);}catch(error){return'[UnexpectedJSONParseError]: '+error.message;}};});browser.formatArgs;browser.save;browser.load;browser.useColors;browser.storage;browser.destroy;browser.colors;browser.log;var hasFlag=function hasFlag(flag){var argv=arguments.length>1&&arguments[1]!==undefined?arguments[1]:process.argv;var prefix=flag.startsWith('-')?'':flag.length===1?'-':'--';var position=argv.indexOf(prefix+flag);var terminatorPosition=argv.indexOf('--');return position!==-1&&(terminatorPosition===-1||position<terminatorPosition);};var _process=process,env=_process.env;var forceColor;if(hasFlag('no-color')||hasFlag('no-colors')||hasFlag('color=false')||hasFlag('color=never')){forceColor=0;}else if(hasFlag('color')||hasFlag('colors')||hasFlag('color=true')||hasFlag('color=always')){forceColor=1;}if('FORCE_COLOR'in env){if(env.FORCE_COLOR==='true'){forceColor=1;}else if(env.FORCE_COLOR==='false'){forceColor=0;}else{forceColor=env.FORCE_COLOR.length===0?1:Math.min(parseInt(env.FORCE_COLOR,10),3);}}function translateLevel(level){if(level===0){return false;}return{level:level,hasBasic:true,has256:level>=2,has16m:level>=3};}function supportsColor(haveStream,streamIsTTY){if(forceColor===0){return 0;}if(hasFlag('color=16m')||hasFlag('color=full')||hasFlag('color=truecolor')){return 3;}if(hasFlag('color=256')){return 2;}if(haveStream&&!streamIsTTY&&forceColor===undefined){return 0;}var min=forceColor||0;if(env.TERM==='dumb'){return min;}if(process.platform==='win32'){// Windows 10 build 10586 is the first Windows release that supports 256 colors.
// Windows 10 build 14931 is the first release that supports 16m/TrueColor.
var osRelease=os__default["default"].release().split('.');if(Number(osRelease[0])>=10&&Number(osRelease[2])>=10586){return Number(osRelease[2])>=14931?3:2;}return 1;}if('CI'in env){if(['TRAVIS','CIRCLECI','APPVEYOR','GITLAB_CI','GITHUB_ACTIONS','BUILDKITE'].some(function(sign){return sign in env;})||env.CI_NAME==='codeship'){return 1;}return min;}if('TEAMCITY_VERSION'in env){return /^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;}if(env.COLORTERM==='truecolor'){return 3;}if('TERM_PROGRAM'in env){var version=parseInt((env.TERM_PROGRAM_VERSION||'').split('.')[0],10);switch(env.TERM_PROGRAM){case'iTerm.app':return version>=3?3:2;case'Apple_Terminal':return 2;// No default
}}if(/-256(color)?$/i.test(env.TERM)){return 2;}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)){return 1;}if('COLORTERM'in env){return 1;}return min;}function getSupportLevel(stream){var level=supportsColor(stream,stream&&stream.isTTY);return translateLevel(level);}var supportsColor_1={supportsColor:getSupportLevel,stdout:translateLevel(supportsColor(true,tty__default["default"].isatty(1))),stderr:translateLevel(supportsColor(true,tty__default["default"].isatty(2)))};supportsColor_1.supportsColor;supportsColor_1.stdout;supportsColor_1.stderr;var node$2=createCommonjsModule(function(module,exports){/**
 * Module dependencies.
 */ /**
 * This is the Node.js implementation of `debug()`.
 */exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.destroy=util__default["default"].deprecate(function(){},'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');/**
 * Colors.
 */exports.colors=[6,2,3,4,5,1];try{// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)
// eslint-disable-next-line import/no-extraneous-dependencies
var _supportsColor=supportsColor_1;if(_supportsColor&&(_supportsColor.stderr||_supportsColor).level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];}}catch(error){// Swallow - we only care if `supports-color` is available; it doesn't have to be.
}/**
 * Build up the default `inspectOpts` object from the environment variables.
 *
 *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js
 */exports.inspectOpts=Object.keys(process.env).filter(function(key){return /^debug_/i.test(key);}).reduce(function(obj,key){// Camel-case
var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase();});// Coerce string value into JS value
var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val)){val=true;}else if(/^(no|off|false|disabled)$/i.test(val)){val=false;}else if(val==='null'){val=null;}else{val=Number(val);}obj[prop]=val;return obj;},{});/**
 * Is stdout a TTY? Colored output is enabled when `true`.
 */function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty__default["default"].isatty(process.stderr.fd);}/**
 * Adds ANSI color escape codes if enabled.
 *
 * @api public
 */function formatArgs(args){var name=this.namespace,useColors=this.useColors;if(useColors){var c=this.color;var colorCode="\x1B[3"+(c<8?c:'8;5;'+c);var prefix="  ".concat(colorCode,";1m").concat(name," \x1B[0m");args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push(colorCode+'m+'+module.exports.humanize(this.diff)+"\x1B[0m");}else{args[0]=getDate()+name+' '+args[0];}}function getDate(){if(exports.inspectOpts.hideDate){return'';}return new Date().toISOString()+' ';}/**
 * Invokes `util.format()` with the specified arguments and writes to stderr.
 */function log(){var _util__default$defaul;return process.stderr.write((_util__default$defaul=util__default["default"]).format.apply(_util__default$defaul,arguments)+'\n');}/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */function save(namespaces){if(namespaces){process.env.DEBUG=namespaces;}else{// If you set a process.env field to null or undefined, it gets cast to the
// string 'null' or 'undefined'. Just delete instead.
delete process.env.DEBUG;}}/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */function load(){return process.env.DEBUG;}/**
 * Init logic for `debug` instances.
 *
 * Create a new `inspectOpts` object in case `useColors` is set
 * differently for a particular `debug` instance.
 */function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}module.exports=common(exports);var formatters=module.exports.formatters;/**
 * Map %o to `util.inspect()`, all on a single line.
 */formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util__default["default"].inspect(v,this.inspectOpts).split('\n').map(function(str){return str.trim();}).join(' ');};/**
 * Map %O to `util.inspect()`, allowing multiple lines if needed.
 */formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util__default["default"].inspect(v,this.inspectOpts);};});node$2.init;node$2.log;node$2.formatArgs;node$2.save;node$2.load;node$2.useColors;node$2.destroy;node$2.colors;node$2.inspectOpts;var src=createCommonjsModule(function(module){/**
 * Detect Electron renderer / nwjs process, which is node, but we should
 * treat as a browser.
 */if(typeof process==='undefined'||process.type==='renderer'||process.browser===true||process.__nwjs){module.exports=browser;}else{module.exports=node$2;}});var rfdc_1=rfdc;function copyBuffer(cur){if(cur instanceof Buffer){return Buffer.from(cur);}return new cur.constructor(cur.buffer.slice(),cur.byteOffset,cur.length);}function rfdc(opts){opts=opts||{};if(opts.circles)return rfdcCircles(opts);return opts.proto?cloneProto:clone;function cloneArray(a,fn){var keys=Object.keys(a);var a2=new Array(keys.length);for(var i=0;i<keys.length;i++){var k=keys[i];var cur=a[k];if(_typeof(cur)!=='object'||cur===null){a2[k]=cur;}else if(cur instanceof Date){a2[k]=new Date(cur);}else if(ArrayBuffer.isView(cur)){a2[k]=copyBuffer(cur);}else{a2[k]=fn(cur);}}return a2;}function clone(o){if(_typeof(o)!=='object'||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return cloneArray(o,clone);if(o instanceof Map)return new Map(cloneArray(Array.from(o),clone));if(o instanceof Set)return new Set(cloneArray(Array.from(o),clone));var o2={};for(var k in o){if(Object.hasOwnProperty.call(o,k)===false)continue;var cur=o[k];if(_typeof(cur)!=='object'||cur===null){o2[k]=cur;}else if(cur instanceof Date){o2[k]=new Date(cur);}else if(cur instanceof Map){o2[k]=new Map(cloneArray(Array.from(cur),clone));}else if(cur instanceof Set){o2[k]=new Set(cloneArray(Array.from(cur),clone));}else if(ArrayBuffer.isView(cur)){o2[k]=copyBuffer(cur);}else{o2[k]=clone(cur);}}return o2;}function cloneProto(o){if(_typeof(o)!=='object'||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return cloneArray(o,cloneProto);if(o instanceof Map)return new Map(cloneArray(Array.from(o),cloneProto));if(o instanceof Set)return new Set(cloneArray(Array.from(o),cloneProto));var o2={};for(var k in o){var cur=o[k];if(_typeof(cur)!=='object'||cur===null){o2[k]=cur;}else if(cur instanceof Date){o2[k]=new Date(cur);}else if(cur instanceof Map){o2[k]=new Map(cloneArray(Array.from(cur),cloneProto));}else if(cur instanceof Set){o2[k]=new Set(cloneArray(Array.from(cur),cloneProto));}else if(ArrayBuffer.isView(cur)){o2[k]=copyBuffer(cur);}else{o2[k]=cloneProto(cur);}}return o2;}}function rfdcCircles(opts){var refs=[];var refsNew=[];return opts.proto?cloneProto:clone;function cloneArray(a,fn){var keys=Object.keys(a);var a2=new Array(keys.length);for(var i=0;i<keys.length;i++){var k=keys[i];var cur=a[k];if(_typeof(cur)!=='object'||cur===null){a2[k]=cur;}else if(cur instanceof Date){a2[k]=new Date(cur);}else if(ArrayBuffer.isView(cur)){a2[k]=copyBuffer(cur);}else{var index=refs.indexOf(cur);if(index!==-1){a2[k]=refsNew[index];}else{a2[k]=fn(cur);}}}return a2;}function clone(o){if(_typeof(o)!=='object'||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return cloneArray(o,clone);if(o instanceof Map)return new Map(cloneArray(Array.from(o),clone));if(o instanceof Set)return new Set(cloneArray(Array.from(o),clone));var o2={};refs.push(o);refsNew.push(o2);for(var k in o){if(Object.hasOwnProperty.call(o,k)===false)continue;var cur=o[k];if(_typeof(cur)!=='object'||cur===null){o2[k]=cur;}else if(cur instanceof Date){o2[k]=new Date(cur);}else if(cur instanceof Map){o2[k]=new Map(cloneArray(Array.from(cur),clone));}else if(cur instanceof Set){o2[k]=new Set(cloneArray(Array.from(cur),clone));}else if(ArrayBuffer.isView(cur)){o2[k]=copyBuffer(cur);}else{var i=refs.indexOf(cur);if(i!==-1){o2[k]=refsNew[i];}else{o2[k]=clone(cur);}}}refs.pop();refsNew.pop();return o2;}function cloneProto(o){if(_typeof(o)!=='object'||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return cloneArray(o,cloneProto);if(o instanceof Map)return new Map(cloneArray(Array.from(o),cloneProto));if(o instanceof Set)return new Set(cloneArray(Array.from(o),cloneProto));var o2={};refs.push(o);refsNew.push(o2);for(var k in o){var cur=o[k];if(_typeof(cur)!=='object'||cur===null){o2[k]=cur;}else if(cur instanceof Date){o2[k]=new Date(cur);}else if(cur instanceof Map){o2[k]=new Map(cloneArray(Array.from(cur),cloneProto));}else if(cur instanceof Set){o2[k]=new Set(cloneArray(Array.from(cur),cloneProto));}else if(ArrayBuffer.isView(cur)){o2[k]=copyBuffer(cur);}else{var i=refs.indexOf(cur);if(i!==-1){o2[k]=refsNew[i];}else{o2[k]=cloneProto(cur);}}}refs.pop();refsNew.pop();return o2;}}var debug$d=src('log4js:configuration');var preProcessingListeners=[];var listeners$1=[];var not=function not(thing){return!thing;};var anObject=function anObject(thing){return thing&&_typeof(thing)==='object'&&!Array.isArray(thing);};var validIdentifier=function validIdentifier(thing){return /^[A-Za-z][A-Za-z0-9_]*$/g.test(thing);};var anInteger=function anInteger(thing){return thing&&typeof thing==='number'&&Number.isInteger(thing);};var addListener=function addListener(fn){listeners$1.push(fn);debug$d("Added listener, now ".concat(listeners$1.length," listeners"));};var addPreProcessingListener=function addPreProcessingListener(fn){preProcessingListeners.push(fn);debug$d("Added pre-processing listener, now ".concat(preProcessingListeners.length," listeners"));};var throwExceptionIf=function throwExceptionIf(config,checks,message){var tests=Array.isArray(checks)?checks:[checks];tests.forEach(function(test){if(test){throw new Error("Problem with log4js configuration: (".concat(util__default["default"].inspect(config,{depth:5}),")")+" - ".concat(message));}});};var configure$a=function configure$a(candidate){debug$d('New configuration to be validated: ',candidate);throwExceptionIf(candidate,not(anObject(candidate)),'must be an object.');debug$d("Calling pre-processing listeners (".concat(preProcessingListeners.length,")"));preProcessingListeners.forEach(function(listener){return listener(candidate);});debug$d('Configuration pre-processing finished.');debug$d("Calling configuration listeners (".concat(listeners$1.length,")"));listeners$1.forEach(function(listener){return listener(candidate);});debug$d('Configuration finished.');};var configuration={configure:configure$a,addListener:addListener,addPreProcessingListener:addPreProcessingListener,throwExceptionIf:throwExceptionIf,anObject:anObject,anInteger:anInteger,validIdentifier:validIdentifier,not:not};var lib$3=createCommonjsModule(function(module){function padWithZeros(vNumber,width){var numAsString=vNumber.toString();while(numAsString.length<width){numAsString="0"+numAsString;}return numAsString;}function addZero(vNumber){return padWithZeros(vNumber,2);}/**
 * Formats the TimeOffset
 * Thanks to http://www.svendtofte.com/code/date_format/
 * @private
 */function offset(timezoneOffset){var os=Math.abs(timezoneOffset);var h=String(Math.floor(os/60));var m=String(os%60);if(h.length===1){h="0"+h;}if(m.length===1){m="0"+m;}return timezoneOffset<0?"+"+h+m:"-"+h+m;}function asString(format,date){if(typeof format!=="string"){date=format;format=module.exports.ISO8601_FORMAT;}if(!date){date=module.exports.now();}// Issue # 14 - Per ISO8601 standard, the time string should be local time
// with timezone info.
// See https://en.wikipedia.org/wiki/ISO_8601 section "Time offsets from UTC"
var vDay=addZero(date.getDate());var vMonth=addZero(date.getMonth()+1);var vYearLong=addZero(date.getFullYear());var vYearShort=addZero(vYearLong.substring(2,4));var vYear=format.indexOf("yyyy")>-1?vYearLong:vYearShort;var vHour=addZero(date.getHours());var vMinute=addZero(date.getMinutes());var vSecond=addZero(date.getSeconds());var vMillisecond=padWithZeros(date.getMilliseconds(),3);var vTimeZone=offset(date.getTimezoneOffset());var formatted=format.replace(/dd/g,vDay).replace(/MM/g,vMonth).replace(/y{1,4}/g,vYear).replace(/hh/g,vHour).replace(/mm/g,vMinute).replace(/ss/g,vSecond).replace(/SSS/g,vMillisecond).replace(/O/g,vTimeZone);return formatted;}function setDatePart(date,part,value,local){date['set'+(local?'':'UTC')+part](value);}function extractDateParts(pattern,str,missingValuesDate){// Javascript Date object doesn't support custom timezone.  Sets all felds as
// GMT based to begin with.  If the timezone offset is provided, then adjust
// it using provided timezone, otherwise, adjust it with the system timezone.
var local=pattern.indexOf('O')<0;var matchers=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function fn(date,value){setDatePart(date,'FullYear',value,local);}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function fn(date,value){setDatePart(date,'Month',value-1,local);}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function fn(date,value){setDatePart(date,'Date',value,local);}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function fn(date,value){setDatePart(date,'Hours',value,local);}},{pattern:/mm/,regexp:"\\d\\d",fn:function fn(date,value){setDatePart(date,'Minutes',value,local);}},{pattern:/ss/,regexp:"\\d\\d",fn:function fn(date,value){setDatePart(date,'Seconds',value,local);}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function fn(date,value){setDatePart(date,'Milliseconds',value,local);}},{pattern:/O/,regexp:"[+-]\\d{3,4}|Z",fn:function fn(date,value){if(value==="Z"){value=0;}var offset=Math.abs(value);var timezoneOffset=(value>0?-1:1)*(offset%100+Math.floor(offset/100)*60);// Per ISO8601 standard: UTC = local time - offset
//
// For example, 2000-01-01T01:00:00-0700
//   local time: 2000-01-01T01:00:00
//   ==> UTC   : 2000-01-01T08:00:00 ( 01 - (-7) = 8 )
//
// To make it even more confusing, the date.getTimezoneOffset() is
// opposite sign of offset string in the ISO8601 standard.  So if offset
// is '-0700' the getTimezoneOffset() would be (+)420. The line above
// calculates timezoneOffset to matche Javascript's behavior.
//
// The date/time of the input is actually the local time, so the date
// object that was constructed is actually local time even thought the
// UTC setters are used.  This means the date object's internal UTC
// representation was wrong.  It needs to be fixed by substracting the
// offset (or adding the offset minutes as they are opposite sign).
//
// Note: the time zone has to be processed after all other fileds are
// set.  The result would be incorrect if the offset was calculated
// first then overriden by the other filed setters.
date.setUTCMinutes(date.getUTCMinutes()+timezoneOffset);}}];var parsedPattern=matchers.reduce(function(p,m){if(m.pattern.test(p.regexp)){m.index=p.regexp.match(m.pattern).index;p.regexp=p.regexp.replace(m.pattern,"("+m.regexp+")");}else{m.index=-1;}return p;},{regexp:pattern,index:[]});var dateFns=matchers.filter(function(m){return m.index>-1;});dateFns.sort(function(a,b){return a.index-b.index;});var matcher=new RegExp(parsedPattern.regexp);var matches=matcher.exec(str);if(matches){var date=missingValuesDate||module.exports.now();dateFns.forEach(function(f,i){f.fn(date,matches[i+1]);});return date;}throw new Error("String '"+str+"' could not be parsed as '"+pattern+"'");}function parse(pattern,str,missingValuesDate){if(!pattern){throw new Error("pattern must be supplied");}return extractDateParts(pattern,str,missingValuesDate);}/**
 * Used for testing - replace this function with a fixed date.
 */function now(){return new Date();}module.exports=asString;module.exports.asString=asString;module.exports.parse=parse;module.exports.now=now;module.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";module.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";module.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";module.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS";});lib$3.asString;lib$3.parse;lib$3.now;lib$3.ISO8601_FORMAT;lib$3.ISO8601_WITH_TZ_OFFSET_FORMAT;lib$3.DATETIME_FORMAT;lib$3.ABSOLUTETIME_FORMAT;var styles={// styles
bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],// grayscale
white:[37,39],grey:[90,39],black:[90,39],// colors
blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function colorizeStart(style){return style?"\x1B[".concat(styles[style][0],"m"):'';}function colorizeEnd(style){return style?"\x1B[".concat(styles[style][1],"m"):'';}/**
 * Taken from masylum's fork (https://github.com/masylum/log4js-node)
 */function colorize(str,style){return colorizeStart(style)+str+colorizeEnd(style);}function timestampLevelAndCategory(loggingEvent,colour){return colorize(util__default["default"].format('[%s] [%s] %s - ',lib$3.asString(loggingEvent.startTime),loggingEvent.level.toString(),loggingEvent.categoryName),colour);}/**
 * BasicLayout is a simple layout for storing the logs. The logs are stored
 * in following format:
 * <pre>
 * [startTime] [logLevel] categoryName - message\n
 * </pre>
 *
 * @author Stephan Strittmatter
 */function basicLayout(loggingEvent){var _util__default$defaul2;return timestampLevelAndCategory(loggingEvent)+(_util__default$defaul2=util__default["default"]).format.apply(_util__default$defaul2,_toConsumableArray(loggingEvent.data));}/**
 * colouredLayout - taken from masylum's fork.
 * same as basicLayout, but with colours.
 */function colouredLayout(loggingEvent){var _util__default$defaul3;return timestampLevelAndCategory(loggingEvent,loggingEvent.level.colour)+(_util__default$defaul3=util__default["default"]).format.apply(_util__default$defaul3,_toConsumableArray(loggingEvent.data));}function messagePassThroughLayout(loggingEvent){var _util__default$defaul4;return(_util__default$defaul4=util__default["default"]).format.apply(_util__default$defaul4,_toConsumableArray(loggingEvent.data));}function dummyLayout(loggingEvent){return loggingEvent.data[0];}/**
 * PatternLayout
 * Format for specifiers is %[padding].[truncation][field]{[format]}
 * e.g. %5.10p - left pad the log level by 5 characters, up to a max of 10
 * both padding and truncation can be negative.
 * Negative truncation = trunc from end of string
 * Positive truncation = trunc from start of string
 * Negative padding = pad right
 * Positive padding = pad left
 *
 * Fields can be any of:
 *  - %r time in toLocaleTimeString format
 *  - %p log level
 *  - %c log category
 *  - %h hostname
 *  - %m log data
 *  - %d date in constious formats
 *  - %% %
 *  - %n newline
 *  - %z pid
 *  - %f filename
 *  - %l line number
 *  - %o column postion
 *  - %s call stack
 *  - %x{<tokenname>} add dynamic tokens to your log. Tokens are specified in the tokens parameter
 *  - %X{<tokenname>} add dynamic tokens to your log. Tokens are specified in logger context
 * You can use %[ and %] to define a colored block.
 *
 * Tokens are specified as simple key:value objects.
 * The key represents the token name whereas the value can be a string or function
 * which is called to extract the value to put in the log message. If token is not
 * found, it doesn't replace the field.
 *
 * A sample token would be: { 'pid' : function() { return process.pid; } }
 *
 * Takes a pattern string, array of tokens and returns a layout function.
 * @return {Function}
 * @param pattern
 * @param tokens
 * @param timezoneOffset
 *
 * @authors ['Stephan Strittmatter', 'Jan Schmidle']
 */function patternLayout(pattern,tokens){var TTCC_CONVERSION_PATTERN='%r %p %c - %m%n';var regex=/%(-?[0-9]+)?(\.?-?[0-9]+)?([[\]cdhmnprzxXyflos%])(\{([^}]+)\})?|([^%]+)/;pattern=pattern||TTCC_CONVERSION_PATTERN;function categoryName(loggingEvent,specifier){var loggerName=loggingEvent.categoryName;if(specifier){var precision=parseInt(specifier,10);var loggerNameBits=loggerName.split('.');if(precision<loggerNameBits.length){loggerName=loggerNameBits.slice(loggerNameBits.length-precision).join('.');}}return loggerName;}function formatAsDate(loggingEvent,specifier){var format=lib$3.ISO8601_FORMAT;if(specifier){format=specifier;// Pick up special cases
if(format==='ISO8601'){format=lib$3.ISO8601_FORMAT;}else if(format==='ISO8601_WITH_TZ_OFFSET'){format=lib$3.ISO8601_WITH_TZ_OFFSET_FORMAT;}else if(format==='ABSOLUTE'){format=lib$3.ABSOLUTETIME_FORMAT;}else if(format==='DATE'){format=lib$3.DATETIME_FORMAT;}}// Format the date
return lib$3.asString(format,loggingEvent.startTime);}function hostname(){return os__default["default"].hostname().toString();}function formatMessage(loggingEvent){var _util__default$defaul5;return(_util__default$defaul5=util__default["default"]).format.apply(_util__default$defaul5,_toConsumableArray(loggingEvent.data));}function endOfLine(){return os__default["default"].EOL;}function logLevel(loggingEvent){return loggingEvent.level.toString();}function startTime(loggingEvent){return lib$3.asString('hh:mm:ss',loggingEvent.startTime);}function startColour(loggingEvent){return colorizeStart(loggingEvent.level.colour);}function endColour(loggingEvent){return colorizeEnd(loggingEvent.level.colour);}function percent(){return'%';}function pid(loggingEvent){return loggingEvent&&loggingEvent.pid?loggingEvent.pid.toString():process.pid.toString();}function clusterInfo(){// this used to try to return the master and worker pids,
// but it would never have worked because master pid is not available to workers
// leaving this here to maintain compatibility for patterns
return pid();}function userDefined(loggingEvent,specifier){if(typeof tokens[specifier]!=='undefined'){return typeof tokens[specifier]==='function'?tokens[specifier](loggingEvent):tokens[specifier];}return null;}function contextDefined(loggingEvent,specifier){var resolver=loggingEvent.context[specifier];if(typeof resolver!=='undefined'){return typeof resolver==='function'?resolver(loggingEvent):resolver;}return null;}function fileName(loggingEvent,specifier){var filename=loggingEvent.fileName||'';if(specifier){var fileDepth=parseInt(specifier,10);var fileList=filename.split(path__default["default"].sep);if(fileList.length>fileDepth){filename=fileList.slice(-fileDepth).join(path__default["default"].sep);}}return filename;}function lineNumber(loggingEvent){return loggingEvent.lineNumber?"".concat(loggingEvent.lineNumber):'';}function columnNumber(loggingEvent){return loggingEvent.columnNumber?"".concat(loggingEvent.columnNumber):'';}function callStack(loggingEvent){return loggingEvent.callStack||'';}/* eslint quote-props:0 */var replacers={c:categoryName,d:formatAsDate,h:hostname,m:formatMessage,n:endOfLine,p:logLevel,r:startTime,'[':startColour,']':endColour,y:clusterInfo,z:pid,'%':percent,x:userDefined,X:contextDefined,f:fileName,l:lineNumber,o:columnNumber,s:callStack};function replaceToken(conversionCharacter,loggingEvent,specifier){return replacers[conversionCharacter](loggingEvent,specifier);}function truncate(truncation,toTruncate){var len;if(truncation){len=parseInt(truncation.substr(1),10);// negative truncate length means truncate from end of string
return len>0?toTruncate.slice(0,len):toTruncate.slice(len);}return toTruncate;}function pad(padding,toPad){var len;if(padding){if(padding.charAt(0)==='-'){len=parseInt(padding.substr(1),10);// Right pad with spaces
while(toPad.length<len){toPad+=' ';}}else{len=parseInt(padding,10);// Left pad with spaces
while(toPad.length<len){toPad=" ".concat(toPad);}}}return toPad;}function truncateAndPad(toTruncAndPad,truncation,padding){var replacement=toTruncAndPad;replacement=truncate(truncation,replacement);replacement=pad(padding,replacement);return replacement;}return function(loggingEvent){var formattedString='';var result;var searchString=pattern;/* eslint no-cond-assign:0 */while((result=regex.exec(searchString))!==null){// const matchedString = result[0];
var padding=result[1];var truncation=result[2];var conversionCharacter=result[3];var specifier=result[5];var text=result[6];// Check if the pattern matched was just normal text
if(text){formattedString+=text.toString();}else{// Create a raw replacement string based on the conversion
// character and specifier
var replacement=replaceToken(conversionCharacter,loggingEvent,specifier);formattedString+=truncateAndPad(replacement,truncation,padding);}searchString=searchString.substr(result.index+result[0].length);}return formattedString;};}var layoutMakers={messagePassThrough:function messagePassThrough(){return messagePassThroughLayout;},basic:function basic(){return basicLayout;},colored:function colored(){return colouredLayout;},coloured:function coloured(){return colouredLayout;},pattern:function pattern(config){return patternLayout(config&&config.pattern,config&&config.tokens);},dummy:function dummy(){return dummyLayout;}};var layouts={basicLayout:basicLayout,messagePassThroughLayout:messagePassThroughLayout,patternLayout:patternLayout,colouredLayout:colouredLayout,coloredLayout:colouredLayout,dummyLayout:dummyLayout,addLayout:function addLayout(name,serializerGenerator){layoutMakers[name]=serializerGenerator;},layout:function layout(name,config){return layoutMakers[name]&&layoutMakers[name](config);}};layouts.basicLayout;layouts.messagePassThroughLayout;layouts.patternLayout;layouts.colouredLayout;layouts.coloredLayout;layouts.dummyLayout;layouts.addLayout;layouts.layout;var validColours=['white','grey','black','blue','cyan','green','magenta','red','yellow'];var Level=/*#__PURE__*/function(){function Level(level,levelStr,colour){_classCallCheck(this,Level);this.level=level;this.levelStr=levelStr;this.colour=colour;}_createClass(Level,[{key:"toString",value:function toString(){return this.levelStr;}/**
   * converts given String to corresponding Level
   * @param {(Level|string)} sArg -- String value of Level OR Log4js.Level
   * @param {Level} [defaultLevel] -- default Level, if no String representation
   * @return {Level}
   */},{key:"isLessThanOrEqualTo",value:function isLessThanOrEqualTo(otherLevel){if(typeof otherLevel==='string'){otherLevel=Level.getLevel(otherLevel);}return this.level<=otherLevel.level;}},{key:"isGreaterThanOrEqualTo",value:function isGreaterThanOrEqualTo(otherLevel){if(typeof otherLevel==='string'){otherLevel=Level.getLevel(otherLevel);}return this.level>=otherLevel.level;}},{key:"isEqualTo",value:function isEqualTo(otherLevel){if(typeof otherLevel==='string'){otherLevel=Level.getLevel(otherLevel);}return this.level===otherLevel.level;}}],[{key:"getLevel",value:function getLevel(sArg,defaultLevel){if(!sArg){return defaultLevel;}if(sArg instanceof Level){return sArg;}// a json-serialised level won't be an instance of Level (see issue #768)
if(sArg instanceof Object&&sArg.levelStr){sArg=sArg.levelStr;}return Level[sArg.toString().toUpperCase()]||defaultLevel;}},{key:"addLevels",value:function addLevels(customLevels){if(customLevels){var _levels=Object.keys(customLevels);_levels.forEach(function(l){var levelStr=l.toUpperCase();Level[levelStr]=new Level(customLevels[l].value,levelStr,customLevels[l].colour);var existingLevelIndex=Level.levels.findIndex(function(lvl){return lvl.levelStr===levelStr;});if(existingLevelIndex>-1){Level.levels[existingLevelIndex]=Level[levelStr];}else{Level.levels.push(Level[levelStr]);}});Level.levels.sort(function(a,b){return a.level-b.level;});}}}]);return Level;}();Level.levels=[];Level.addLevels({ALL:{value:Number.MIN_VALUE,colour:'grey'},TRACE:{value:5000,colour:'blue'},DEBUG:{value:10000,colour:'cyan'},INFO:{value:20000,colour:'green'},WARN:{value:30000,colour:'yellow'},ERROR:{value:40000,colour:'red'},FATAL:{value:50000,colour:'magenta'},MARK:{value:9007199254740992,colour:'grey'},// 2^53
OFF:{value:Number.MAX_VALUE,colour:'grey'}});configuration.addListener(function(config){var levelConfig=config.levels;if(levelConfig){configuration.throwExceptionIf(config,configuration.not(configuration.anObject(levelConfig)),'levels must be an object');var newLevels=Object.keys(levelConfig);newLevels.forEach(function(l){configuration.throwExceptionIf(config,configuration.not(configuration.validIdentifier(l)),"level name \"".concat(l,"\" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)"));configuration.throwExceptionIf(config,configuration.not(configuration.anObject(levelConfig[l])),"level \"".concat(l,"\" must be an object"));configuration.throwExceptionIf(config,configuration.not(levelConfig[l].value),"level \"".concat(l,"\" must have a 'value' property"));configuration.throwExceptionIf(config,configuration.not(configuration.anInteger(levelConfig[l].value)),"level \"".concat(l,"\".value must have an integer value"));configuration.throwExceptionIf(config,configuration.not(levelConfig[l].colour),"level \"".concat(l,"\" must have a 'colour' property"));configuration.throwExceptionIf(config,configuration.not(validColours.indexOf(levelConfig[l].colour)>-1),"level \"".concat(l,"\".colour must be one of ").concat(validColours.join(', ')));});}});configuration.addListener(function(config){Level.addLevels(config.levels);});var levels=Level;var Flatted=function(Primitive,primitive){/*!
   * ISC License
   *
   * Copyright (c) 2018, Andrea Giammarchi, @WebReflection
   *
   * Permission to use, copy, modify, and/or distribute this software for any
   * purpose with or without fee is hereby granted, provided that the above
   * copyright notice and this permission notice appear in all copies.
   *
   * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
   * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
   * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
   * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
   * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
   * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
   * PERFORMANCE OF THIS SOFTWARE.
   */var Flatted={parse:function parse(text,reviver){var input=JSON.parse(text,Primitives).map(primitives);var value=input[0];var $=reviver||noop;var tmp=_typeof(value)==='object'&&value?revive(input,new Set(),value,$):value;return $.call({'':tmp},'',tmp);},stringify:function stringify(value,replacer,space){for(var firstRun,known=new Map(),input=[],output=[],$=replacer&&_typeof(replacer)===_typeof(input)?function(k,v){if(k===''||-1<replacer.indexOf(k))return v;}:replacer||noop,i=+set(known,input,$.call({'':value},'',value)),replace=function replace(key,value){if(firstRun){firstRun=!firstRun;return value;}var after=$.call(this,key,value);switch(_typeof(after)){case'object':if(after===null)return after;case primitive:return known.get(after)||set(known,input,after);}return after;};i<input.length;i++){firstRun=true;output[i]=JSON.stringify(input[i],replace,space);}return'['+output.join(',')+']';}};return Flatted;function noop(key,value){return value;}function revive(input,parsed,output,$){return Object.keys(output).reduce(function(output,key){var value=output[key];if(value instanceof Primitive){var tmp=input[value];if(_typeof(tmp)==='object'&&!parsed.has(tmp)){parsed.add(tmp);output[key]=$.call(output,key,revive(input,parsed,tmp,$));}else{output[key]=$.call(output,key,tmp);}}else output[key]=$.call(output,key,value);return output;},output);}function set(known,input,value){var index=Primitive(input.push(value)-1);known.set(value,index);return index;}// the two kinds of primitives
//  1. the real one
//  2. the wrapped one
function primitives(value){return value instanceof Primitive?Primitive(value):value;}function Primitives(key,value){return _typeof(value)===primitive?new Primitive(value):value;}}(String,'string');Flatted.parse;Flatted.stringify;/**
 * @name LoggingEvent
 * @namespace Log4js
 */var LoggingEvent=/*#__PURE__*/function(){/**
   * Models a logging event.
   * @constructor
   * @param {string} categoryName name of category
   * @param {Log4js.Level} level level of message
   * @param {Array} data objects to log
   * @author Seth Chisamore
   */function LoggingEvent(categoryName,level,data,context,location){_classCallCheck(this,LoggingEvent);this.startTime=new Date();this.categoryName=categoryName;this.data=data;this.level=level;this.context=Object.assign({},context);this.pid=process.pid;if(location){this.functionName=location.functionName;this.fileName=location.fileName;this.lineNumber=location.lineNumber;this.columnNumber=location.columnNumber;this.callStack=location.callStack;}}_createClass(LoggingEvent,[{key:"serialise",value:function serialise(){var logData=this.data.map(function(e){// JSON.stringify(new Error('test')) returns {}, which is not really useful for us.
// The following allows us to serialize errors correctly.
if(e&&e.message&&e.stack){e=Object.assign({message:e.message,stack:e.stack},e);}return e;});this.data=logData;return Flatted.stringify(this);}}],[{key:"deserialise",value:function deserialise(serialised){var event;try{var rehydratedEvent=Flatted.parse(serialised);rehydratedEvent.data=rehydratedEvent.data.map(function(e){if(e&&e.message&&e.stack){var fakeError=new Error(e);Object.keys(e).forEach(function(key){fakeError[key]=e[key];});e=fakeError;}return e;});event=new LoggingEvent(rehydratedEvent.categoryName,levels.getLevel(rehydratedEvent.level.levelStr),rehydratedEvent.data,rehydratedEvent.context);event.startTime=new Date(rehydratedEvent.startTime);event.pid=rehydratedEvent.pid;event.cluster=rehydratedEvent.cluster;}catch(e){event=new LoggingEvent('log4js',levels.ERROR,['Unable to parse log:',serialised,'because: ',e]);}return event;}}]);return LoggingEvent;}();var LoggingEvent_1=LoggingEvent;var debug$c=src("log4js:clustering");var disabled=false;var cluster=null;try{cluster=cluster__default["default"];//eslint-disable-line
}catch(e){debug$c("cluster module not present");disabled=true;}var listeners=[];var pm2=false;var pm2InstanceVar="NODE_APP_INSTANCE";var isPM2Master=function isPM2Master(){return pm2&&process.env[pm2InstanceVar]==="0";};var isMaster=function isMaster(){return disabled||cluster.isMaster||isPM2Master();};var sendToListeners=function sendToListeners(logEvent){listeners.forEach(function(l){return l(logEvent);});};// in a multi-process node environment, worker loggers will use
// process.send
var receiver=function receiver(worker,message){// prior to node v6, the worker parameter was not passed (args were message, handle)
debug$c("cluster message received from worker ",worker,": ",message);if(worker.topic&&worker.data){message=worker;worker=undefined;}if(message&&message.topic&&message.topic==="log4js:message"){debug$c("received message: ",message.data);var logEvent=LoggingEvent_1.deserialise(message.data);sendToListeners(logEvent);}};if(!disabled){configuration.addListener(function(config){// clear out the listeners, because configure has been called.
listeners.length=0;pm2=config.pm2;disabled=config.disableClustering;var _config$pm2InstanceVa=config.pm2InstanceVar;pm2InstanceVar=_config$pm2InstanceVa===void 0?"NODE_APP_INSTANCE":_config$pm2InstanceVa;debug$c("clustering disabled ? ".concat(disabled));debug$c("cluster.isMaster ? ".concat(cluster&&cluster.isMaster));debug$c("pm2 enabled ? ".concat(pm2));debug$c("pm2InstanceVar = ".concat(pm2InstanceVar));debug$c("process.env[".concat(pm2InstanceVar,"] = ").concat(process.env[pm2InstanceVar]));// just in case configure is called after shutdown
if(pm2){process.removeListener("message",receiver);}if(cluster&&cluster.removeListener){cluster.removeListener("message",receiver);}if(disabled||config.disableClustering){debug$c("Not listening for cluster messages, because clustering disabled.");}else if(isPM2Master()){// PM2 cluster support
// PM2 runs everything as workers - install pm2-intercom for this to work.
// we only want one of the app instances to write logs
debug$c("listening for PM2 broadcast messages");process.on("message",receiver);}else if(cluster.isMaster){debug$c("listening for cluster messages");cluster.on("message",receiver);}else{debug$c("not listening for messages, because we are not a master process");}});}var clustering={onlyOnMaster:function onlyOnMaster(fn,notMaster){return isMaster()?fn():notMaster;},isMaster:isMaster,send:function send(msg){if(isMaster()){sendToListeners(msg);}else{if(!pm2){msg.cluster={workerId:cluster.worker.id,worker:process.pid};}process.send({topic:"log4js:message",data:msg.serialise()});}},onMessage:function onMessage(listener){listeners.push(listener);}};function maxFileSizeUnitTransform(maxLogSize){if(typeof maxLogSize==='number'&&Number.isInteger(maxLogSize)){return maxLogSize;}var units={K:1024,M:1024*1024,G:1024*1024*1024};var validUnit=Object.keys(units);var unit=maxLogSize.substr(maxLogSize.length-1).toLocaleUpperCase();var value=maxLogSize.substring(0,maxLogSize.length-1).trim();if(validUnit.indexOf(unit)<0||!Number.isInteger(Number(value))){throw Error("maxLogSize: \"".concat(maxLogSize,"\" is invalid"));}else{return value*units[unit];}}function adapter(configAdapter,config){var newConfig=Object.assign({},config);Object.keys(configAdapter).forEach(function(key){if(newConfig[key]){newConfig[key]=configAdapter[key](config[key]);}});return newConfig;}function fileAppenderAdapter(config){var configAdapter={maxLogSize:maxFileSizeUnitTransform};return adapter(configAdapter,config);}var adapters={file:fileAppenderAdapter,fileSync:fileAppenderAdapter};var modifyConfig=function modifyConfig(config){return adapters[config.type]?adapters[config.type](config):config;};var adapters_1={modifyConfig:modifyConfig};// eslint-disable-next-line no-console
var consoleLog=console.log.bind(console);function consoleAppender(layout,timezoneOffset){return function(loggingEvent){consoleLog(layout(loggingEvent,timezoneOffset));};}function configure$9(config,layouts){var layout=layouts.colouredLayout;if(config.layout){layout=layouts.layout(config.layout.type,config.layout);}return consoleAppender(layout,config.timezoneOffset);}var configure_1$8=configure$9;var console_1={configure:configure_1$8};function stdoutAppender(layout,timezoneOffset){return function(loggingEvent){process.stdout.write("".concat(layout(loggingEvent,timezoneOffset),"\n"));};}function configure$8(config,layouts){var layout=layouts.colouredLayout;if(config.layout){layout=layouts.layout(config.layout.type,config.layout);}return stdoutAppender(layout,config.timezoneOffset);}var configure_1$7=configure$8;var stdout={configure:configure_1$7};function stderrAppender(layout,timezoneOffset){return function(loggingEvent){process.stderr.write("".concat(layout(loggingEvent,timezoneOffset),"\n"));};}function configure$7(config,layouts){var layout=layouts.colouredLayout;if(config.layout){layout=layouts.layout(config.layout.type,config.layout);}return stderrAppender(layout,config.timezoneOffset);}var configure_1$6=configure$7;var stderr={configure:configure_1$6};function logLevelFilter(minLevelString,maxLevelString,appender,levels){var minLevel=levels.getLevel(minLevelString);var maxLevel=levels.getLevel(maxLevelString,levels.FATAL);return function(logEvent){var eventLevel=logEvent.level;if(eventLevel.isGreaterThanOrEqualTo(minLevel)&&eventLevel.isLessThanOrEqualTo(maxLevel)){appender(logEvent);}};}function configure$6(config,layouts,findAppender,levels){var appender=findAppender(config.appender);return logLevelFilter(config.level,config.maxLevel,appender,levels);}var configure_1$5=configure$6;var logLevelFilter_1={configure:configure_1$5};var debug$b=src('log4js:categoryFilter');function categoryFilter(excludes,appender){if(typeof excludes==='string')excludes=[excludes];return function(logEvent){debug$b("Checking ".concat(logEvent.categoryName," against ").concat(excludes));if(excludes.indexOf(logEvent.categoryName)===-1){debug$b('Not excluded, sending to appender');appender(logEvent);}};}function configure$5(config,layouts,findAppender){var appender=findAppender(config.appender);return categoryFilter(config.exclude,appender);}var configure_1$4=configure$5;var categoryFilter_1={configure:configure_1$4};var debug$a=src('log4js:noLogFilter');/**
 * The function removes empty or null regexp from the array
 * @param {string[]} regexp
 * @returns {string[]} a filtered string array with not empty or null regexp
 */function removeNullOrEmptyRegexp(regexp){var filtered=regexp.filter(function(el){return el!=null&&el!=='';});return filtered;}/**
 * Returns a function that will exclude the events in case they match
 * with the regular expressions provided
 * @param {(string|string[])} filters contains the regexp that will be used for the evaluation
 * @param {*} appender
 * @returns {function}
 */function noLogFilter(filters,appender){return function(logEvent){debug$a("Checking data: ".concat(logEvent.data," against filters: ").concat(filters));if(typeof filters==='string'){filters=[filters];}filters=removeNullOrEmptyRegexp(filters);var regex=new RegExp(filters.join('|'),'i');if(filters.length===0||logEvent.data.findIndex(function(value){return regex.test(value);})<0){debug$a('Not excluded, sending to appender');appender(logEvent);}};}function configure$4(config,layouts,findAppender){var appender=findAppender(config.appender);return noLogFilter(config.exclude,appender);}var configure_1$3=configure$4;var noLogFilter_1={configure:configure_1$3};var fromCallback=function fromCallback(fn){return Object.defineProperty(function(){var _arguments=arguments,_this7=this;if(typeof arguments[arguments.length-1]==='function')fn.apply(this,arguments);else{return new Promise(function(resolve,reject){_arguments[_arguments.length]=function(err,res){if(err)return reject(err);resolve(res);};_arguments.length++;fn.apply(_this7,_arguments);});}},'name',{value:fn.name});};var fromPromise=function fromPromise(fn){return Object.defineProperty(function(){var cb=arguments[arguments.length-1];if(typeof cb!=='function')return fn.apply(this,arguments);else fn.apply(this,arguments).then(function(r){return cb(null,r);},cb);},'name',{value:fn.name});};var universalify={fromCallback:fromCallback,fromPromise:fromPromise};var origCwd=process.cwd;var cwd=null;var platform=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!cwd)cwd=origCwd.call(process);return cwd;};try{process.cwd();}catch(er){}// This check is needed until node.js 12 is required
if(typeof process.chdir==='function'){var chdir=process.chdir;process.chdir=function(d){cwd=null;chdir.call(process,d);};if(Object.setPrototypeOf)Object.setPrototypeOf(process.chdir,chdir);}var polyfills=patch;function patch(fs){// (re-)implement some things that are known busted or missing.
// lchmod, broken prior to 0.6.2
// back-port the fix here.
if(constants__default["default"].hasOwnProperty('O_SYMLINK')&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)){patchLchmod(fs);}// lutimes implementation, or no-op
if(!fs.lutimes){patchLutimes(fs);}// https://github.com/isaacs/node-graceful-fs/issues/4
// Chown should not fail on einval or eperm if non-root.
// It should not fail on enosys ever, as this just indicates
// that a fs doesn't support the intended operation.
fs.chown=chownFix(fs.chown);fs.fchown=chownFix(fs.fchown);fs.lchown=chownFix(fs.lchown);fs.chmod=chmodFix(fs.chmod);fs.fchmod=chmodFix(fs.fchmod);fs.lchmod=chmodFix(fs.lchmod);fs.chownSync=chownFixSync(fs.chownSync);fs.fchownSync=chownFixSync(fs.fchownSync);fs.lchownSync=chownFixSync(fs.lchownSync);fs.chmodSync=chmodFixSync(fs.chmodSync);fs.fchmodSync=chmodFixSync(fs.fchmodSync);fs.lchmodSync=chmodFixSync(fs.lchmodSync);fs.stat=statFix(fs.stat);fs.fstat=statFix(fs.fstat);fs.lstat=statFix(fs.lstat);fs.statSync=statFixSync(fs.statSync);fs.fstatSync=statFixSync(fs.fstatSync);fs.lstatSync=statFixSync(fs.lstatSync);// if lchmod/lchown do not exist, then make them no-ops
if(!fs.lchmod){fs.lchmod=function(path,mode,cb){if(cb)process.nextTick(cb);};fs.lchmodSync=function(){};}if(!fs.lchown){fs.lchown=function(path,uid,gid,cb){if(cb)process.nextTick(cb);};fs.lchownSync=function(){};}// on Windows, A/V software can lock the directory, causing this
// to fail with an EACCES or EPERM if the directory contains newly
// created files.  Try again on failure, for up to 60 seconds.
// Set the timeout this long because some Windows Anti-Virus, such as Parity
// bit9, may lock files for up to a minute, causing npm package install
// failures. Also, take care to yield the scheduler. Windows scheduling gives
// CPU to a busy looping process, which can cause the program causing the lock
// contention to be starved of CPU by node, so the contention doesn't resolve.
if(platform==="win32"){fs.rename=function(fs$rename){return function(from,to,cb){var start=Date.now();var backoff=0;fs$rename(from,to,function CB(er){if(er&&(er.code==="EACCES"||er.code==="EPERM")&&Date.now()-start<60000){setTimeout(function(){fs.stat(to,function(stater,st){if(stater&&stater.code==="ENOENT")fs$rename(from,to,CB);else cb(er);});},backoff);if(backoff<100)backoff+=10;return;}if(cb)cb(er);});};}(fs.rename);}// if read() returns EAGAIN, then just try it again.
fs.read=function(fs$read){function read(fd,buffer,offset,length,position,callback_){var _callback;if(callback_&&typeof callback_==='function'){var eagCounter=0;_callback=function callback(er,_,__){if(er&&er.code==='EAGAIN'&&eagCounter<10){eagCounter++;return fs$read.call(fs,fd,buffer,offset,length,position,_callback);}callback_.apply(this,arguments);};}return fs$read.call(fs,fd,buffer,offset,length,position,_callback);}// This ensures `util.promisify` works as it does for native `fs.read`.
if(Object.setPrototypeOf)Object.setPrototypeOf(read,fs$read);return read;}(fs.read);fs.readSync=function(fs$readSync){return function(fd,buffer,offset,length,position){var eagCounter=0;while(true){try{return fs$readSync.call(fs,fd,buffer,offset,length,position);}catch(er){if(er.code==='EAGAIN'&&eagCounter<10){eagCounter++;continue;}throw er;}}};}(fs.readSync);function patchLchmod(fs){fs.lchmod=function(path,mode,callback){fs.open(path,constants__default["default"].O_WRONLY|constants__default["default"].O_SYMLINK,mode,function(err,fd){if(err){if(callback)callback(err);return;}// prefer to return the chmod error, if one occurs,
// but still try to close, and report closing errors if they occur.
fs.fchmod(fd,mode,function(err){fs.close(fd,function(err2){if(callback)callback(err||err2);});});});};fs.lchmodSync=function(path,mode){var fd=fs.openSync(path,constants__default["default"].O_WRONLY|constants__default["default"].O_SYMLINK,mode);// prefer to return the chmod error, if one occurs,
// but still try to close, and report closing errors if they occur.
var threw=true;var ret;try{ret=fs.fchmodSync(fd,mode);threw=false;}finally{if(threw){try{fs.closeSync(fd);}catch(er){}}else{fs.closeSync(fd);}}return ret;};}function patchLutimes(fs){if(constants__default["default"].hasOwnProperty("O_SYMLINK")){fs.lutimes=function(path,at,mt,cb){fs.open(path,constants__default["default"].O_SYMLINK,function(er,fd){if(er){if(cb)cb(er);return;}fs.futimes(fd,at,mt,function(er){fs.close(fd,function(er2){if(cb)cb(er||er2);});});});};fs.lutimesSync=function(path,at,mt){var fd=fs.openSync(path,constants__default["default"].O_SYMLINK);var ret;var threw=true;try{ret=fs.futimesSync(fd,at,mt);threw=false;}finally{if(threw){try{fs.closeSync(fd);}catch(er){}}else{fs.closeSync(fd);}}return ret;};}else{fs.lutimes=function(_a,_b,_c,cb){if(cb)process.nextTick(cb);};fs.lutimesSync=function(){};}}function chmodFix(orig){if(!orig)return orig;return function(target,mode,cb){return orig.call(fs,target,mode,function(er){if(chownErOk(er))er=null;if(cb)cb.apply(this,arguments);});};}function chmodFixSync(orig){if(!orig)return orig;return function(target,mode){try{return orig.call(fs,target,mode);}catch(er){if(!chownErOk(er))throw er;}};}function chownFix(orig){if(!orig)return orig;return function(target,uid,gid,cb){return orig.call(fs,target,uid,gid,function(er){if(chownErOk(er))er=null;if(cb)cb.apply(this,arguments);});};}function chownFixSync(orig){if(!orig)return orig;return function(target,uid,gid){try{return orig.call(fs,target,uid,gid);}catch(er){if(!chownErOk(er))throw er;}};}function statFix(orig){if(!orig)return orig;// Older versions of Node erroneously returned signed integers for
// uid + gid.
return function(target,options,cb){if(typeof options==='function'){cb=options;options=null;}function callback(er,stats){if(stats){if(stats.uid<0)stats.uid+=0x100000000;if(stats.gid<0)stats.gid+=0x100000000;}if(cb)cb.apply(this,arguments);}return options?orig.call(fs,target,options,callback):orig.call(fs,target,callback);};}function statFixSync(orig){if(!orig)return orig;// Older versions of Node erroneously returned signed integers for
// uid + gid.
return function(target,options){var stats=options?orig.call(fs,target,options):orig.call(fs,target);if(stats.uid<0)stats.uid+=0x100000000;if(stats.gid<0)stats.gid+=0x100000000;return stats;};}// ENOSYS means that the fs doesn't support the op. Just ignore
// that, because it doesn't matter.
//
// if there's no getuid, or if getuid() is something other
// than 0, and the error is EINVAL or EPERM, then just ignore
// it.
//
// This specific case is a silent failure in cp, install, tar,
// and most other unix tools that manage permissions.
//
// When running as root, or if other types of errors are
// encountered, then it's strict.
function chownErOk(er){if(!er)return true;if(er.code==="ENOSYS")return true;var nonroot=!process.getuid||process.getuid()!==0;if(nonroot){if(er.code==="EINVAL"||er.code==="EPERM")return true;}return false;}}var Stream=stream__default["default"].Stream;var legacyStreams=legacy;function legacy(fs){return{ReadStream:ReadStream,WriteStream:WriteStream};function ReadStream(path,options){if(!(this instanceof ReadStream))return new ReadStream(path,options);Stream.call(this);var self=this;this.path=path;this.fd=null;this.readable=true;this.paused=false;this.flags='r';this.mode=438;/*=0666*/this.bufferSize=64*1024;options=options||{};// Mixin options into this
var keys=Object.keys(options);for(var index=0,length=keys.length;index<length;index++){var key=keys[index];this[key]=options[key];}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==undefined){if('number'!==typeof this.start){throw TypeError('start must be a Number');}if(this.end===undefined){this.end=Infinity;}else if('number'!==typeof this.end){throw TypeError('end must be a Number');}if(this.start>this.end){throw new Error('start must be <= end');}this.pos=this.start;}if(this.fd!==null){process.nextTick(function(){self._read();});return;}fs.open(this.path,this.flags,this.mode,function(err,fd){if(err){self.emit('error',err);self.readable=false;return;}self.fd=fd;self.emit('open',fd);self._read();});}function WriteStream(path,options){if(!(this instanceof WriteStream))return new WriteStream(path,options);Stream.call(this);this.path=path;this.fd=null;this.writable=true;this.flags='w';this.encoding='binary';this.mode=438;/*=0666*/this.bytesWritten=0;options=options||{};// Mixin options into this
var keys=Object.keys(options);for(var index=0,length=keys.length;index<length;index++){var key=keys[index];this[key]=options[key];}if(this.start!==undefined){if('number'!==typeof this.start){throw TypeError('start must be a Number');}if(this.start<0){throw new Error('start must be >= zero');}this.pos=this.start;}this.busy=false;this._queue=[];if(this.fd===null){this._open=fs.open;this._queue.push([this._open,this.path,this.flags,this.mode,undefined]);this.flush();}}}var clone_1=clone;var getPrototypeOf=Object.getPrototypeOf||function(obj){return obj.__proto__;};function clone(obj){if(obj===null||_typeof(obj)!=='object')return obj;if(obj instanceof Object)var copy={__proto__:getPrototypeOf(obj)};else var copy=Object.create(null);Object.getOwnPropertyNames(obj).forEach(function(key){Object.defineProperty(copy,key,Object.getOwnPropertyDescriptor(obj,key));});return copy;}var gracefulFs=createCommonjsModule(function(module){/* istanbul ignore next - node 0.x polyfill */var gracefulQueue;var previousSymbol;/* istanbul ignore else - node 0.x polyfill */if(typeof Symbol==='function'&&typeof Symbol["for"]==='function'){gracefulQueue=Symbol["for"]('graceful-fs.queue');// This is used in testing by future versions
previousSymbol=Symbol["for"]('graceful-fs.previous');}else{gracefulQueue='___graceful-fs.queue';previousSymbol='___graceful-fs.previous';}function noop(){}function publishQueue(context,queue){Object.defineProperty(context,gracefulQueue,{get:function get(){return queue;}});}var debug=noop;if(util__default["default"].debuglog)debug=util__default["default"].debuglog('gfs4');else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||''))debug=function debug(){var m=util__default["default"].format.apply(util__default["default"],arguments);m='GFS4: '+m.split(/\n/).join('\nGFS4: ');console.error(m);};// Once time initialization
if(!fs__default["default"][gracefulQueue]){// This queue can be shared by multiple loaded instances
var queue=commonjsGlobal[gracefulQueue]||[];publishQueue(fs__default["default"],queue);// Patch fs.close/closeSync to shared queue version, because we need
// to retry() whenever a close happens *anywhere* in the program.
// This is essential when multiple graceful-fs instances are
// in play at the same time.
fs__default["default"].close=function(fs$close){function close(fd,cb){return fs$close.call(fs__default["default"],fd,function(err){// This function uses the graceful-fs shared queue
if(!err){resetQueue();}if(typeof cb==='function')cb.apply(this,arguments);});}Object.defineProperty(close,previousSymbol,{value:fs$close});return close;}(fs__default["default"].close);fs__default["default"].closeSync=function(fs$closeSync){function closeSync(fd){// This function uses the graceful-fs shared queue
fs$closeSync.apply(fs__default["default"],arguments);resetQueue();}Object.defineProperty(closeSync,previousSymbol,{value:fs$closeSync});return closeSync;}(fs__default["default"].closeSync);if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||'')){process.on('exit',function(){debug(fs__default["default"][gracefulQueue]);assert__default["default"].equal(fs__default["default"][gracefulQueue].length,0);});}}if(!commonjsGlobal[gracefulQueue]){publishQueue(commonjsGlobal,fs__default["default"][gracefulQueue]);}module.exports=patch(clone_1(fs__default["default"]));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!fs__default["default"].__patched){module.exports=patch(fs__default["default"]);fs__default["default"].__patched=true;}function patch(fs){// Everything that references the open() function needs to be in here
polyfills(fs);fs.gracefulify=patch;fs.createReadStream=createReadStream;fs.createWriteStream=createWriteStream;var fs$readFile=fs.readFile;fs.readFile=readFile;function readFile(path,options,cb){if(typeof options==='function')cb=options,options=null;return go$readFile(path,options,cb);function go$readFile(path,options,cb,startTime){return fs$readFile(path,options,function(err){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$readFile,[path,options,cb],err,startTime||Date.now(),Date.now()]);else{if(typeof cb==='function')cb.apply(this,arguments);}});}}var fs$writeFile=fs.writeFile;fs.writeFile=writeFile;function writeFile(path,data,options,cb){if(typeof options==='function')cb=options,options=null;return go$writeFile(path,data,options,cb);function go$writeFile(path,data,options,cb,startTime){return fs$writeFile(path,data,options,function(err){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$writeFile,[path,data,options,cb],err,startTime||Date.now(),Date.now()]);else{if(typeof cb==='function')cb.apply(this,arguments);}});}}var fs$appendFile=fs.appendFile;if(fs$appendFile)fs.appendFile=appendFile;function appendFile(path,data,options,cb){if(typeof options==='function')cb=options,options=null;return go$appendFile(path,data,options,cb);function go$appendFile(path,data,options,cb,startTime){return fs$appendFile(path,data,options,function(err){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$appendFile,[path,data,options,cb],err,startTime||Date.now(),Date.now()]);else{if(typeof cb==='function')cb.apply(this,arguments);}});}}var fs$copyFile=fs.copyFile;if(fs$copyFile)fs.copyFile=copyFile;function copyFile(src,dest,flags,cb){if(typeof flags==='function'){cb=flags;flags=0;}return go$copyFile(src,dest,flags,cb);function go$copyFile(src,dest,flags,cb,startTime){return fs$copyFile(src,dest,flags,function(err){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$copyFile,[src,dest,flags,cb],err,startTime||Date.now(),Date.now()]);else{if(typeof cb==='function')cb.apply(this,arguments);}});}}var fs$readdir=fs.readdir;fs.readdir=readdir;function readdir(path,options,cb){if(typeof options==='function')cb=options,options=null;return go$readdir(path,options,cb);function go$readdir(path,options,cb,startTime){return fs$readdir(path,options,function(err,files){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$readdir,[path,options,cb],err,startTime||Date.now(),Date.now()]);else{if(files&&files.sort)files.sort();if(typeof cb==='function')cb.call(this,err,files);}});}}if(process.version.substr(0,4)==='v0.8'){var legStreams=legacyStreams(fs);ReadStream=legStreams.ReadStream;WriteStream=legStreams.WriteStream;}var fs$ReadStream=fs.ReadStream;if(fs$ReadStream){ReadStream.prototype=Object.create(fs$ReadStream.prototype);ReadStream.prototype.open=ReadStream$open;}var fs$WriteStream=fs.WriteStream;if(fs$WriteStream){WriteStream.prototype=Object.create(fs$WriteStream.prototype);WriteStream.prototype.open=WriteStream$open;}Object.defineProperty(fs,'ReadStream',{get:function get(){return ReadStream;},set:function set(val){ReadStream=val;},enumerable:true,configurable:true});Object.defineProperty(fs,'WriteStream',{get:function get(){return WriteStream;},set:function set(val){WriteStream=val;},enumerable:true,configurable:true});// legacy names
var FileReadStream=ReadStream;Object.defineProperty(fs,'FileReadStream',{get:function get(){return FileReadStream;},set:function set(val){FileReadStream=val;},enumerable:true,configurable:true});var FileWriteStream=WriteStream;Object.defineProperty(fs,'FileWriteStream',{get:function get(){return FileWriteStream;},set:function set(val){FileWriteStream=val;},enumerable:true,configurable:true});function ReadStream(path,options){if(this instanceof ReadStream)return fs$ReadStream.apply(this,arguments),this;else return ReadStream.apply(Object.create(ReadStream.prototype),arguments);}function ReadStream$open(){var that=this;open(that.path,that.flags,that.mode,function(err,fd){if(err){if(that.autoClose)that.destroy();that.emit('error',err);}else{that.fd=fd;that.emit('open',fd);that.read();}});}function WriteStream(path,options){if(this instanceof WriteStream)return fs$WriteStream.apply(this,arguments),this;else return WriteStream.apply(Object.create(WriteStream.prototype),arguments);}function WriteStream$open(){var that=this;open(that.path,that.flags,that.mode,function(err,fd){if(err){that.destroy();that.emit('error',err);}else{that.fd=fd;that.emit('open',fd);}});}function createReadStream(path,options){return new fs.ReadStream(path,options);}function createWriteStream(path,options){return new fs.WriteStream(path,options);}var fs$open=fs.open;fs.open=open;function open(path,flags,mode,cb){if(typeof mode==='function')cb=mode,mode=null;return go$open(path,flags,mode,cb);function go$open(path,flags,mode,cb,startTime){return fs$open(path,flags,mode,function(err,fd){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$open,[path,flags,mode,cb],err,startTime||Date.now(),Date.now()]);else{if(typeof cb==='function')cb.apply(this,arguments);}});}}return fs;}function enqueue(elem){debug('ENQUEUE',elem[0].name,elem[1]);fs__default["default"][gracefulQueue].push(elem);retry();}// keep track of the timeout between retry() calls
var retryTimer;// reset the startTime and lastTime to now
// this resets the start of the 60 second overall timeout as well as the
// delay between attempts so that we'll retry these jobs sooner
function resetQueue(){var now=Date.now();for(var i=0;i<fs__default["default"][gracefulQueue].length;++i){// entries that are only a length of 2 are from an older version, don't
// bother modifying those since they'll be retried anyway.
if(fs__default["default"][gracefulQueue][i].length>2){fs__default["default"][gracefulQueue][i][3]=now;// startTime
fs__default["default"][gracefulQueue][i][4]=now;// lastTime
}}// call retry to make sure we're actively processing the queue
retry();}function retry(){// clear the timer and remove it to help prevent unintended concurrency
clearTimeout(retryTimer);retryTimer=undefined;if(fs__default["default"][gracefulQueue].length===0)return;var elem=fs__default["default"][gracefulQueue].shift();var fn=elem[0];var args=elem[1];// these items may be unset if they were added by an older graceful-fs
var err=elem[2];var startTime=elem[3];var lastTime=elem[4];// if we don't have a startTime we have no way of knowing if we've waited
// long enough, so go ahead and retry this item now
if(startTime===undefined){debug('RETRY',fn.name,args);fn.apply(null,args);}else if(Date.now()-startTime>=60000){// it's been more than 60 seconds total, bail now
debug('TIMEOUT',fn.name,args);var cb=args.pop();if(typeof cb==='function')cb.call(null,err);}else{// the amount of time between the last attempt and right now
var sinceAttempt=Date.now()-lastTime;// the amount of time between when we first tried, and when we last tried
// rounded up to at least 1
var sinceStart=Math.max(lastTime-startTime,1);// backoff. wait longer than the total time we've been retrying, but only
// up to a maximum of 100ms
var desiredDelay=Math.min(sinceStart*1.2,100);// it's been long enough since the last retry, do it again
if(sinceAttempt>=desiredDelay){debug('RETRY',fn.name,args);fn.apply(null,args.concat([startTime]));}else{// if we can't do this job yet, push it to the end of the queue
// and let the next iteration check again
fs__default["default"][gracefulQueue].push(elem);}}// schedule our next run if one isn't already scheduled
if(retryTimer===undefined){retryTimer=setTimeout(retry,0);}}});var fs_1=createCommonjsModule(function(module,exports){// This is adapted from https://github.com/normalize/mz
// Copyright (c) 2014-2016 Jonathan Ong me@jongleberry.com and Contributors
var u=universalify.fromCallback;var api=['access','appendFile','chmod','chown','close','copyFile','fchmod','fchown','fdatasync','fstat','fsync','ftruncate','futimes','lchown','lchmod','link','lstat','mkdir','mkdtemp','open','readFile','readdir','readlink','realpath','rename','rmdir','stat','symlink','truncate','unlink','utimes','writeFile'].filter(function(key){// Some commands are not available on some systems. Ex:
// fs.copyFile was added in Node.js v8.5.0
// fs.mkdtemp was added in Node.js v5.10.0
// fs.lchown is not available on at least some Linux
return typeof gracefulFs[key]==='function';});// Export all keys:
Object.keys(gracefulFs).forEach(function(key){if(key==='promises'){// fs.promises is a getter property that triggers ExperimentalWarning
// Don't re-export it here, the getter is defined in "lib/index.js"
return;}exports[key]=gracefulFs[key];});// Universalify async methods:
api.forEach(function(method){exports[method]=u(gracefulFs[method]);});// We differ from mz/fs in that we still ship the old, broken, fs.exists()
// since we are a drop-in replacement for the native module
exports.exists=function(filename,callback){if(typeof callback==='function'){return gracefulFs.exists(filename,callback);}return new Promise(function(resolve){return gracefulFs.exists(filename,resolve);});};// fs.read() & fs.write need special treatment due to multiple callback args
exports.read=function(fd,buffer,offset,length,position,callback){if(typeof callback==='function'){return gracefulFs.read(fd,buffer,offset,length,position,callback);}return new Promise(function(resolve,reject){gracefulFs.read(fd,buffer,offset,length,position,function(err,bytesRead,buffer){if(err)return reject(err);resolve({bytesRead:bytesRead,buffer:buffer});});});};// Function signature can be
// fs.write(fd, buffer[, offset[, length[, position]]], callback)
// OR
// fs.write(fd, string[, position[, encoding]], callback)
// We need to handle both cases, so we use ...args
exports.write=function(fd,buffer){for(var _len2=arguments.length,args=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2];}if(typeof args[args.length-1]==='function'){return gracefulFs.write.apply(gracefulFs,[fd,buffer].concat(args));}return new Promise(function(resolve,reject){gracefulFs.write.apply(gracefulFs,[fd,buffer].concat(args,[function(err,bytesWritten,buffer){if(err)return reject(err);resolve({bytesWritten:bytesWritten,buffer:buffer});}]));});};// fs.realpath.native only available in Node v9.2+
if(typeof gracefulFs.realpath["native"]==='function'){exports.realpath["native"]=u(gracefulFs.realpath["native"]);}});fs_1.exists;fs_1.read;fs_1.write;// get drive on windows
function getRootPath(p){p=path__default["default"].normalize(path__default["default"].resolve(p)).split(path__default["default"].sep);if(p.length>0)return p[0];return null;}// http://stackoverflow.com/a/62888/10333 contains more accurate
// TODO: expand to include the rest
var INVALID_PATH_CHARS=/[<>:"|?*]/;function invalidWin32Path$2(p){var rp=getRootPath(p);p=p.replace(rp,'');return INVALID_PATH_CHARS.test(p);}var win32={getRootPath:getRootPath,invalidWin32Path:invalidWin32Path$2};var invalidWin32Path$1=win32.invalidWin32Path;var o777$1=parseInt('0777',8);function mkdirs$2(p,opts,callback,made){if(typeof opts==='function'){callback=opts;opts={};}else if(!opts||_typeof(opts)!=='object'){opts={mode:opts};}if(process.platform==='win32'&&invalidWin32Path$1(p)){var errInval=new Error(p+' contains invalid WIN32 path characters.');errInval.code='EINVAL';return callback(errInval);}var mode=opts.mode;var xfs=opts.fs||gracefulFs;if(mode===undefined){mode=o777$1&~process.umask();}if(!made)made=null;callback=callback||function(){};p=path__default["default"].resolve(p);xfs.mkdir(p,mode,function(er){if(!er){made=made||p;return callback(null,made);}switch(er.code){case'ENOENT':if(path__default["default"].dirname(p)===p)return callback(er);mkdirs$2(path__default["default"].dirname(p),opts,function(er,made){if(er)callback(er,made);else mkdirs$2(p,opts,callback,made);});break;// In the case of any other error, just see if there's a dir
// there already.  If so, then hooray!  If not, then something
// is borked.
default:xfs.stat(p,function(er2,stat){// if the stat fails, then that's super weird.
// let the original error be the failure reason.
if(er2||!stat.isDirectory())callback(er,made);else callback(null,made);});break;}});}var mkdirs_1$1=mkdirs$2;var invalidWin32Path=win32.invalidWin32Path;var o777=parseInt('0777',8);function mkdirsSync$1(p,opts,made){if(!opts||_typeof(opts)!=='object'){opts={mode:opts};}var mode=opts.mode;var xfs=opts.fs||gracefulFs;if(process.platform==='win32'&&invalidWin32Path(p)){var errInval=new Error(p+' contains invalid WIN32 path characters.');errInval.code='EINVAL';throw errInval;}if(mode===undefined){mode=o777&~process.umask();}if(!made)made=null;p=path__default["default"].resolve(p);try{xfs.mkdirSync(p,mode);made=made||p;}catch(err0){if(err0.code==='ENOENT'){if(path__default["default"].dirname(p)===p)throw err0;made=mkdirsSync$1(path__default["default"].dirname(p),opts,made);mkdirsSync$1(p,opts,made);}else{// In the case of any other error, just see if there's a dir there
// already. If so, then hooray!  If not, then something is borked.
var _stat;try{_stat=xfs.statSync(p);}catch(err1){throw err0;}if(!_stat.isDirectory())throw err0;}}return made;}var mkdirsSync_1=mkdirsSync$1;var u$b=universalify.fromCallback;var mkdirs$1=u$b(mkdirs_1$1);var mkdirs_1={mkdirs:mkdirs$1,mkdirsSync:mkdirsSync_1,// alias
mkdirp:mkdirs$1,mkdirpSync:mkdirsSync_1,ensureDir:mkdirs$1,ensureDirSync:mkdirsSync_1};mkdirs_1.mkdirs;mkdirs_1.mkdirsSync;mkdirs_1.mkdirp;mkdirs_1.mkdirpSync;mkdirs_1.ensureDir;mkdirs_1.ensureDirSync;// HFS, ext{2,3}, FAT do not, Node.js v0.10 does not
function hasMillisResSync(){var tmpfile=path__default["default"].join('millis-test-sync'+Date.now().toString()+Math.random().toString().slice(2));tmpfile=path__default["default"].join(os__default["default"].tmpdir(),tmpfile);// 550 millis past UNIX epoch
var d=new Date(1435410243862);gracefulFs.writeFileSync(tmpfile,'https://github.com/jprichardson/node-fs-extra/pull/141');var fd=gracefulFs.openSync(tmpfile,'r+');gracefulFs.futimesSync(fd,d,d);gracefulFs.closeSync(fd);return gracefulFs.statSync(tmpfile).mtime>1435410243000;}function hasMillisRes(callback){var tmpfile=path__default["default"].join('millis-test'+Date.now().toString()+Math.random().toString().slice(2));tmpfile=path__default["default"].join(os__default["default"].tmpdir(),tmpfile);// 550 millis past UNIX epoch
var d=new Date(1435410243862);gracefulFs.writeFile(tmpfile,'https://github.com/jprichardson/node-fs-extra/pull/141',function(err){if(err)return callback(err);gracefulFs.open(tmpfile,'r+',function(err,fd){if(err)return callback(err);gracefulFs.futimes(fd,d,d,function(err){if(err)return callback(err);gracefulFs.close(fd,function(err){if(err)return callback(err);gracefulFs.stat(tmpfile,function(err,stats){if(err)return callback(err);callback(null,stats.mtime>1435410243000);});});});});});}function timeRemoveMillis(timestamp){if(typeof timestamp==='number'){return Math.floor(timestamp/1000)*1000;}else if(timestamp instanceof Date){return new Date(Math.floor(timestamp.getTime()/1000)*1000);}else{throw new Error('fs-extra: timeRemoveMillis() unknown parameter type');}}function utimesMillis(path,atime,mtime,callback){// if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)
gracefulFs.open(path,'r+',function(err,fd){if(err)return callback(err);gracefulFs.futimes(fd,atime,mtime,function(futimesErr){gracefulFs.close(fd,function(closeErr){if(callback)callback(futimesErr||closeErr);});});});}function utimesMillisSync(path,atime,mtime){var fd=gracefulFs.openSync(path,'r+');gracefulFs.futimesSync(fd,atime,mtime);return gracefulFs.closeSync(fd);}var utimes$1={hasMillisRes:hasMillisRes,hasMillisResSync:hasMillisResSync,timeRemoveMillis:timeRemoveMillis,utimesMillis:utimesMillis,utimesMillisSync:utimesMillisSync};var NODE_VERSION_MAJOR_WITH_BIGINT=10;var NODE_VERSION_MINOR_WITH_BIGINT=5;var NODE_VERSION_PATCH_WITH_BIGINT=0;var nodeVersion=process.versions.node.split('.');var nodeVersionMajor=Number.parseInt(nodeVersion[0],10);var nodeVersionMinor=Number.parseInt(nodeVersion[1],10);var nodeVersionPatch=Number.parseInt(nodeVersion[2],10);function nodeSupportsBigInt(){if(nodeVersionMajor>NODE_VERSION_MAJOR_WITH_BIGINT){return true;}else if(nodeVersionMajor===NODE_VERSION_MAJOR_WITH_BIGINT){if(nodeVersionMinor>NODE_VERSION_MINOR_WITH_BIGINT){return true;}else if(nodeVersionMinor===NODE_VERSION_MINOR_WITH_BIGINT){if(nodeVersionPatch>=NODE_VERSION_PATCH_WITH_BIGINT){return true;}}}return false;}function getStats$2(src,dest,cb){if(nodeSupportsBigInt()){gracefulFs.stat(src,{bigint:true},function(err,srcStat){if(err)return cb(err);gracefulFs.stat(dest,{bigint:true},function(err,destStat){if(err){if(err.code==='ENOENT')return cb(null,{srcStat:srcStat,destStat:null});return cb(err);}return cb(null,{srcStat:srcStat,destStat:destStat});});});}else{gracefulFs.stat(src,function(err,srcStat){if(err)return cb(err);gracefulFs.stat(dest,function(err,destStat){if(err){if(err.code==='ENOENT')return cb(null,{srcStat:srcStat,destStat:null});return cb(err);}return cb(null,{srcStat:srcStat,destStat:destStat});});});}}function getStatsSync(src,dest){var srcStat,destStat;if(nodeSupportsBigInt()){srcStat=gracefulFs.statSync(src,{bigint:true});}else{srcStat=gracefulFs.statSync(src);}try{if(nodeSupportsBigInt()){destStat=gracefulFs.statSync(dest,{bigint:true});}else{destStat=gracefulFs.statSync(dest);}}catch(err){if(err.code==='ENOENT')return{srcStat:srcStat,destStat:null};throw err;}return{srcStat:srcStat,destStat:destStat};}function checkPaths(src,dest,funcName,cb){getStats$2(src,dest,function(err,stats){if(err)return cb(err);var srcStat=stats.srcStat,destStat=stats.destStat;if(destStat&&destStat.ino&&destStat.dev&&destStat.ino===srcStat.ino&&destStat.dev===srcStat.dev){return cb(new Error('Source and destination must not be the same.'));}if(srcStat.isDirectory()&&isSrcSubdir(src,dest)){return cb(new Error(errMsg(src,dest,funcName)));}return cb(null,{srcStat:srcStat,destStat:destStat});});}function checkPathsSync(src,dest,funcName){var _getStatsSync=getStatsSync(src,dest),srcStat=_getStatsSync.srcStat,destStat=_getStatsSync.destStat;if(destStat&&destStat.ino&&destStat.dev&&destStat.ino===srcStat.ino&&destStat.dev===srcStat.dev){throw new Error('Source and destination must not be the same.');}if(srcStat.isDirectory()&&isSrcSubdir(src,dest)){throw new Error(errMsg(src,dest,funcName));}return{srcStat:srcStat,destStat:destStat};}// recursively check if dest parent is a subdirectory of src.
// It works for all file types including symlinks since it
// checks the src and dest inodes. It starts from the deepest
// parent and stops once it reaches the src parent or the root path.
function checkParentPaths(src,srcStat,dest,funcName,cb){var srcParent=path__default["default"].resolve(path__default["default"].dirname(src));var destParent=path__default["default"].resolve(path__default["default"].dirname(dest));if(destParent===srcParent||destParent===path__default["default"].parse(destParent).root)return cb();if(nodeSupportsBigInt()){gracefulFs.stat(destParent,{bigint:true},function(err,destStat){if(err){if(err.code==='ENOENT')return cb();return cb(err);}if(destStat.ino&&destStat.dev&&destStat.ino===srcStat.ino&&destStat.dev===srcStat.dev){return cb(new Error(errMsg(src,dest,funcName)));}return checkParentPaths(src,srcStat,destParent,funcName,cb);});}else{gracefulFs.stat(destParent,function(err,destStat){if(err){if(err.code==='ENOENT')return cb();return cb(err);}if(destStat.ino&&destStat.dev&&destStat.ino===srcStat.ino&&destStat.dev===srcStat.dev){return cb(new Error(errMsg(src,dest,funcName)));}return checkParentPaths(src,srcStat,destParent,funcName,cb);});}}function checkParentPathsSync(src,srcStat,dest,funcName){var srcParent=path__default["default"].resolve(path__default["default"].dirname(src));var destParent=path__default["default"].resolve(path__default["default"].dirname(dest));if(destParent===srcParent||destParent===path__default["default"].parse(destParent).root)return;var destStat;try{if(nodeSupportsBigInt()){destStat=gracefulFs.statSync(destParent,{bigint:true});}else{destStat=gracefulFs.statSync(destParent);}}catch(err){if(err.code==='ENOENT')return;throw err;}if(destStat.ino&&destStat.dev&&destStat.ino===srcStat.ino&&destStat.dev===srcStat.dev){throw new Error(errMsg(src,dest,funcName));}return checkParentPathsSync(src,srcStat,destParent,funcName);}// return true if dest is a subdir of src, otherwise false.
// It only checks the path strings.
function isSrcSubdir(src,dest){var srcArr=path__default["default"].resolve(src).split(path__default["default"].sep).filter(function(i){return i;});var destArr=path__default["default"].resolve(dest).split(path__default["default"].sep).filter(function(i){return i;});return srcArr.reduce(function(acc,cur,i){return acc&&destArr[i]===cur;},true);}function errMsg(src,dest,funcName){return"Cannot ".concat(funcName," '").concat(src,"' to a subdirectory of itself, '").concat(dest,"'.");}var stat={checkPaths:checkPaths,checkPathsSync:checkPathsSync,checkParentPaths:checkParentPaths,checkParentPathsSync:checkParentPathsSync,isSrcSubdir:isSrcSubdir};/* eslint-disable node/no-deprecated-api */var buffer$1=function buffer$1(size){if(typeof Buffer.allocUnsafe==='function'){try{return Buffer.allocUnsafe(size);}catch(e){return new Buffer(size);}}return new Buffer(size);};var mkdirpSync$1=mkdirs_1.mkdirsSync;var utimesSync=utimes$1.utimesMillisSync;function copySync$2(src,dest,opts){if(typeof opts==='function'){opts={filter:opts};}opts=opts||{};opts.clobber='clobber'in opts?!!opts.clobber:true;// default to true for now
opts.overwrite='overwrite'in opts?!!opts.overwrite:opts.clobber;// overwrite falls back to clobber
// Warn about using preserveTimestamps on 32-bit node
if(opts.preserveTimestamps&&process.arch==='ia32'){console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");}var _stat$checkPathsSync=stat.checkPathsSync(src,dest,'copy'),srcStat=_stat$checkPathsSync.srcStat,destStat=_stat$checkPathsSync.destStat;stat.checkParentPathsSync(src,srcStat,dest,'copy');return handleFilterAndCopy(destStat,src,dest,opts);}function handleFilterAndCopy(destStat,src,dest,opts){if(opts.filter&&!opts.filter(src,dest))return;var destParent=path__default["default"].dirname(dest);if(!gracefulFs.existsSync(destParent))mkdirpSync$1(destParent);return startCopy$1(destStat,src,dest,opts);}function startCopy$1(destStat,src,dest,opts){if(opts.filter&&!opts.filter(src,dest))return;return getStats$1(destStat,src,dest,opts);}function getStats$1(destStat,src,dest,opts){var statSync=opts.dereference?gracefulFs.statSync:gracefulFs.lstatSync;var srcStat=statSync(src);if(srcStat.isDirectory())return onDir$1(srcStat,destStat,src,dest,opts);else if(srcStat.isFile()||srcStat.isCharacterDevice()||srcStat.isBlockDevice())return onFile$1(srcStat,destStat,src,dest,opts);else if(srcStat.isSymbolicLink())return onLink$1(destStat,src,dest,opts);}function onFile$1(srcStat,destStat,src,dest,opts){if(!destStat)return copyFile$1(srcStat,src,dest,opts);return mayCopyFile$1(srcStat,src,dest,opts);}function mayCopyFile$1(srcStat,src,dest,opts){if(opts.overwrite){gracefulFs.unlinkSync(dest);return copyFile$1(srcStat,src,dest,opts);}else if(opts.errorOnExist){throw new Error("'".concat(dest,"' already exists"));}}function copyFile$1(srcStat,src,dest,opts){if(typeof gracefulFs.copyFileSync==='function'){gracefulFs.copyFileSync(src,dest);gracefulFs.chmodSync(dest,srcStat.mode);if(opts.preserveTimestamps){return utimesSync(dest,srcStat.atime,srcStat.mtime);}return;}return copyFileFallback$1(srcStat,src,dest,opts);}function copyFileFallback$1(srcStat,src,dest,opts){var BUF_LENGTH=64*1024;var _buff=buffer$1(BUF_LENGTH);var fdr=gracefulFs.openSync(src,'r');var fdw=gracefulFs.openSync(dest,'w',srcStat.mode);var pos=0;while(pos<srcStat.size){var bytesRead=gracefulFs.readSync(fdr,_buff,0,BUF_LENGTH,pos);gracefulFs.writeSync(fdw,_buff,0,bytesRead);pos+=bytesRead;}if(opts.preserveTimestamps)gracefulFs.futimesSync(fdw,srcStat.atime,srcStat.mtime);gracefulFs.closeSync(fdr);gracefulFs.closeSync(fdw);}function onDir$1(srcStat,destStat,src,dest,opts){if(!destStat)return mkDirAndCopy$1(srcStat,src,dest,opts);if(destStat&&!destStat.isDirectory()){throw new Error("Cannot overwrite non-directory '".concat(dest,"' with directory '").concat(src,"'."));}return copyDir$1(src,dest,opts);}function mkDirAndCopy$1(srcStat,src,dest,opts){gracefulFs.mkdirSync(dest);copyDir$1(src,dest,opts);return gracefulFs.chmodSync(dest,srcStat.mode);}function copyDir$1(src,dest,opts){gracefulFs.readdirSync(src).forEach(function(item){return copyDirItem$1(item,src,dest,opts);});}function copyDirItem$1(item,src,dest,opts){var srcItem=path__default["default"].join(src,item);var destItem=path__default["default"].join(dest,item);var _stat$checkPathsSync2=stat.checkPathsSync(srcItem,destItem,'copy'),destStat=_stat$checkPathsSync2.destStat;return startCopy$1(destStat,srcItem,destItem,opts);}function onLink$1(destStat,src,dest,opts){var resolvedSrc=gracefulFs.readlinkSync(src);if(opts.dereference){resolvedSrc=path__default["default"].resolve(process.cwd(),resolvedSrc);}if(!destStat){return gracefulFs.symlinkSync(resolvedSrc,dest);}else{var resolvedDest;try{resolvedDest=gracefulFs.readlinkSync(dest);}catch(err){// dest exists and is a regular file or directory,
// Windows may throw UNKNOWN error. If dest already exists,
// fs throws error anyway, so no need to guard against it here.
if(err.code==='EINVAL'||err.code==='UNKNOWN')return gracefulFs.symlinkSync(resolvedSrc,dest);throw err;}if(opts.dereference){resolvedDest=path__default["default"].resolve(process.cwd(),resolvedDest);}if(stat.isSrcSubdir(resolvedSrc,resolvedDest)){throw new Error("Cannot copy '".concat(resolvedSrc,"' to a subdirectory of itself, '").concat(resolvedDest,"'."));}// prevent copy if src is a subdir of dest since unlinking
// dest in this case would result in removing src contents
// and therefore a broken symlink would be created.
if(gracefulFs.statSync(dest).isDirectory()&&stat.isSrcSubdir(resolvedDest,resolvedSrc)){throw new Error("Cannot overwrite '".concat(resolvedDest,"' with '").concat(resolvedSrc,"'."));}return copyLink$1(resolvedSrc,dest);}}function copyLink$1(resolvedSrc,dest){gracefulFs.unlinkSync(dest);return gracefulFs.symlinkSync(resolvedSrc,dest);}var copySync_1=copySync$2;var copySync$1={copySync:copySync_1};copySync$1.copySync;var u$a=universalify.fromPromise;function pathExists$8(path){return fs_1.access(path).then(function(){return true;})["catch"](function(){return false;});}var pathExists_1={pathExists:u$a(pathExists$8),pathExistsSync:fs_1.existsSync};pathExists_1.pathExists;pathExists_1.pathExistsSync;var mkdirp$1=mkdirs_1.mkdirs;var pathExists$7=pathExists_1.pathExists;var utimes=utimes$1.utimesMillis;function copy$2(src,dest,opts,cb){if(typeof opts==='function'&&!cb){cb=opts;opts={};}else if(typeof opts==='function'){opts={filter:opts};}cb=cb||function(){};opts=opts||{};opts.clobber='clobber'in opts?!!opts.clobber:true;// default to true for now
opts.overwrite='overwrite'in opts?!!opts.overwrite:opts.clobber;// overwrite falls back to clobber
// Warn about using preserveTimestamps on 32-bit node
if(opts.preserveTimestamps&&process.arch==='ia32'){console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");}stat.checkPaths(src,dest,'copy',function(err,stats){if(err)return cb(err);var srcStat=stats.srcStat,destStat=stats.destStat;stat.checkParentPaths(src,srcStat,dest,'copy',function(err){if(err)return cb(err);if(opts.filter)return handleFilter(checkParentDir,destStat,src,dest,opts,cb);return checkParentDir(destStat,src,dest,opts,cb);});});}function checkParentDir(destStat,src,dest,opts,cb){var destParent=path__default["default"].dirname(dest);pathExists$7(destParent,function(err,dirExists){if(err)return cb(err);if(dirExists)return startCopy(destStat,src,dest,opts,cb);mkdirp$1(destParent,function(err){if(err)return cb(err);return startCopy(destStat,src,dest,opts,cb);});});}function handleFilter(onInclude,destStat,src,dest,opts,cb){Promise.resolve(opts.filter(src,dest)).then(function(include){if(include)return onInclude(destStat,src,dest,opts,cb);return cb();},function(error){return cb(error);});}function startCopy(destStat,src,dest,opts,cb){if(opts.filter)return handleFilter(getStats,destStat,src,dest,opts,cb);return getStats(destStat,src,dest,opts,cb);}function getStats(destStat,src,dest,opts,cb){var stat=opts.dereference?gracefulFs.stat:gracefulFs.lstat;stat(src,function(err,srcStat){if(err)return cb(err);if(srcStat.isDirectory())return onDir(srcStat,destStat,src,dest,opts,cb);else if(srcStat.isFile()||srcStat.isCharacterDevice()||srcStat.isBlockDevice())return onFile(srcStat,destStat,src,dest,opts,cb);else if(srcStat.isSymbolicLink())return onLink(destStat,src,dest,opts,cb);});}function onFile(srcStat,destStat,src,dest,opts,cb){if(!destStat)return copyFile(srcStat,src,dest,opts,cb);return mayCopyFile(srcStat,src,dest,opts,cb);}function mayCopyFile(srcStat,src,dest,opts,cb){if(opts.overwrite){gracefulFs.unlink(dest,function(err){if(err)return cb(err);return copyFile(srcStat,src,dest,opts,cb);});}else if(opts.errorOnExist){return cb(new Error("'".concat(dest,"' already exists")));}else return cb();}function copyFile(srcStat,src,dest,opts,cb){if(typeof gracefulFs.copyFile==='function'){return gracefulFs.copyFile(src,dest,function(err){if(err)return cb(err);return setDestModeAndTimestamps(srcStat,dest,opts,cb);});}return copyFileFallback(srcStat,src,dest,opts,cb);}function copyFileFallback(srcStat,src,dest,opts,cb){var rs=gracefulFs.createReadStream(src);rs.on('error',function(err){return cb(err);}).once('open',function(){var ws=gracefulFs.createWriteStream(dest,{mode:srcStat.mode});ws.on('error',function(err){return cb(err);}).on('open',function(){return rs.pipe(ws);}).once('close',function(){return setDestModeAndTimestamps(srcStat,dest,opts,cb);});});}function setDestModeAndTimestamps(srcStat,dest,opts,cb){gracefulFs.chmod(dest,srcStat.mode,function(err){if(err)return cb(err);if(opts.preserveTimestamps){return utimes(dest,srcStat.atime,srcStat.mtime,cb);}return cb();});}function onDir(srcStat,destStat,src,dest,opts,cb){if(!destStat)return mkDirAndCopy(srcStat,src,dest,opts,cb);if(destStat&&!destStat.isDirectory()){return cb(new Error("Cannot overwrite non-directory '".concat(dest,"' with directory '").concat(src,"'.")));}return copyDir(src,dest,opts,cb);}function mkDirAndCopy(srcStat,src,dest,opts,cb){gracefulFs.mkdir(dest,function(err){if(err)return cb(err);copyDir(src,dest,opts,function(err){if(err)return cb(err);return gracefulFs.chmod(dest,srcStat.mode,cb);});});}function copyDir(src,dest,opts,cb){gracefulFs.readdir(src,function(err,items){if(err)return cb(err);return copyDirItems(items,src,dest,opts,cb);});}function copyDirItems(items,src,dest,opts,cb){var item=items.pop();if(!item)return cb();return copyDirItem(items,item,src,dest,opts,cb);}function copyDirItem(items,item,src,dest,opts,cb){var srcItem=path__default["default"].join(src,item);var destItem=path__default["default"].join(dest,item);stat.checkPaths(srcItem,destItem,'copy',function(err,stats){if(err)return cb(err);var destStat=stats.destStat;startCopy(destStat,srcItem,destItem,opts,function(err){if(err)return cb(err);return copyDirItems(items,src,dest,opts,cb);});});}function onLink(destStat,src,dest,opts,cb){gracefulFs.readlink(src,function(err,resolvedSrc){if(err)return cb(err);if(opts.dereference){resolvedSrc=path__default["default"].resolve(process.cwd(),resolvedSrc);}if(!destStat){return gracefulFs.symlink(resolvedSrc,dest,cb);}else{gracefulFs.readlink(dest,function(err,resolvedDest){if(err){// dest exists and is a regular file or directory,
// Windows may throw UNKNOWN error. If dest already exists,
// fs throws error anyway, so no need to guard against it here.
if(err.code==='EINVAL'||err.code==='UNKNOWN')return gracefulFs.symlink(resolvedSrc,dest,cb);return cb(err);}if(opts.dereference){resolvedDest=path__default["default"].resolve(process.cwd(),resolvedDest);}if(stat.isSrcSubdir(resolvedSrc,resolvedDest)){return cb(new Error("Cannot copy '".concat(resolvedSrc,"' to a subdirectory of itself, '").concat(resolvedDest,"'.")));}// do not copy if src is a subdir of dest since unlinking
// dest in this case would result in removing src contents
// and therefore a broken symlink would be created.
if(destStat.isDirectory()&&stat.isSrcSubdir(resolvedDest,resolvedSrc)){return cb(new Error("Cannot overwrite '".concat(resolvedDest,"' with '").concat(resolvedSrc,"'.")));}return copyLink(resolvedSrc,dest,cb);});}});}function copyLink(resolvedSrc,dest,cb){gracefulFs.unlink(dest,function(err){if(err)return cb(err);return gracefulFs.symlink(resolvedSrc,dest,cb);});}var copy_1=copy$2;var u$9=universalify.fromCallback;var copy$1={copy:u$9(copy_1)};copy$1.copy;var isWindows$1=process.platform==='win32';function defaults(options){var methods=['unlink','chmod','stat','lstat','rmdir','readdir'];methods.forEach(function(m){options[m]=options[m]||gracefulFs[m];m=m+'Sync';options[m]=options[m]||gracefulFs[m];});options.maxBusyTries=options.maxBusyTries||3;}function rimraf(p,options,cb){var busyTries=0;if(typeof options==='function'){cb=options;options={};}assert__default["default"](p,'rimraf: missing path');assert__default["default"].strictEqual(_typeof(p),'string','rimraf: path should be a string');assert__default["default"].strictEqual(_typeof(cb),'function','rimraf: callback function required');assert__default["default"](options,'rimraf: invalid options argument provided');assert__default["default"].strictEqual(_typeof(options),'object','rimraf: options should be object');defaults(options);rimraf_(p,options,function CB(er){if(er){if((er.code==='EBUSY'||er.code==='ENOTEMPTY'||er.code==='EPERM')&&busyTries<options.maxBusyTries){busyTries++;var time=busyTries*100;// try again, with the same exact callback as this one.
return setTimeout(function(){return rimraf_(p,options,CB);},time);}// already gone
if(er.code==='ENOENT')er=null;}cb(er);});}// Two possible strategies.
// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR
// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR
//
// Both result in an extra syscall when you guess wrong.  However, there
// are likely far more normal files in the world than directories.  This
// is based on the assumption that a the average number of files per
// directory is >= 1.
//
// If anyone ever complains about this, then I guess the strategy could
// be made configurable somehow.  But until then, YAGNI.
function rimraf_(p,options,cb){assert__default["default"](p);assert__default["default"](options);assert__default["default"](typeof cb==='function');// sunos lets the root user unlink directories, which is... weird.
// so we have to lstat here and make sure it's not a dir.
options.lstat(p,function(er,st){if(er&&er.code==='ENOENT'){return cb(null);}// Windows can EPERM on stat.  Life is suffering.
if(er&&er.code==='EPERM'&&isWindows$1){return fixWinEPERM(p,options,er,cb);}if(st&&st.isDirectory()){return rmdir(p,options,er,cb);}options.unlink(p,function(er){if(er){if(er.code==='ENOENT'){return cb(null);}if(er.code==='EPERM'){return isWindows$1?fixWinEPERM(p,options,er,cb):rmdir(p,options,er,cb);}if(er.code==='EISDIR'){return rmdir(p,options,er,cb);}}return cb(er);});});}function fixWinEPERM(p,options,er,cb){assert__default["default"](p);assert__default["default"](options);assert__default["default"](typeof cb==='function');if(er){assert__default["default"](er instanceof Error);}options.chmod(p,438,function(er2){if(er2){cb(er2.code==='ENOENT'?null:er);}else{options.stat(p,function(er3,stats){if(er3){cb(er3.code==='ENOENT'?null:er);}else if(stats.isDirectory()){rmdir(p,options,er,cb);}else{options.unlink(p,cb);}});}});}function fixWinEPERMSync(p,options,er){var stats;assert__default["default"](p);assert__default["default"](options);if(er){assert__default["default"](er instanceof Error);}try{options.chmodSync(p,438);}catch(er2){if(er2.code==='ENOENT'){return;}else{throw er;}}try{stats=options.statSync(p);}catch(er3){if(er3.code==='ENOENT'){return;}else{throw er;}}if(stats.isDirectory()){rmdirSync(p,options,er);}else{options.unlinkSync(p);}}function rmdir(p,options,originalEr,cb){assert__default["default"](p);assert__default["default"](options);if(originalEr){assert__default["default"](originalEr instanceof Error);}assert__default["default"](typeof cb==='function');// try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)
// if we guessed wrong, and it's not a directory, then
// raise the original error.
options.rmdir(p,function(er){if(er&&(er.code==='ENOTEMPTY'||er.code==='EEXIST'||er.code==='EPERM')){rmkids(p,options,cb);}else if(er&&er.code==='ENOTDIR'){cb(originalEr);}else{cb(er);}});}function rmkids(p,options,cb){assert__default["default"](p);assert__default["default"](options);assert__default["default"](typeof cb==='function');options.readdir(p,function(er,files){if(er)return cb(er);var n=files.length;var errState;if(n===0)return options.rmdir(p,cb);files.forEach(function(f){rimraf(path__default["default"].join(p,f),options,function(er){if(errState){return;}if(er)return cb(errState=er);if(--n===0){options.rmdir(p,cb);}});});});}// this looks simpler, and is strictly *faster*, but will
// tie up the JavaScript thread and fail on excessively
// deep directory trees.
function rimrafSync(p,options){var st;options=options||{};defaults(options);assert__default["default"](p,'rimraf: missing path');assert__default["default"].strictEqual(_typeof(p),'string','rimraf: path should be a string');assert__default["default"](options,'rimraf: missing options');assert__default["default"].strictEqual(_typeof(options),'object','rimraf: options should be object');try{st=options.lstatSync(p);}catch(er){if(er.code==='ENOENT'){return;}// Windows can EPERM on stat.  Life is suffering.
if(er.code==='EPERM'&&isWindows$1){fixWinEPERMSync(p,options,er);}}try{// sunos lets the root user unlink directories, which is... weird.
if(st&&st.isDirectory()){rmdirSync(p,options,null);}else{options.unlinkSync(p);}}catch(er){if(er.code==='ENOENT'){return;}else if(er.code==='EPERM'){return isWindows$1?fixWinEPERMSync(p,options,er):rmdirSync(p,options,er);}else if(er.code!=='EISDIR'){throw er;}rmdirSync(p,options,er);}}function rmdirSync(p,options,originalEr){assert__default["default"](p);assert__default["default"](options);if(originalEr){assert__default["default"](originalEr instanceof Error);}try{options.rmdirSync(p);}catch(er){if(er.code==='ENOTDIR'){throw originalEr;}else if(er.code==='ENOTEMPTY'||er.code==='EEXIST'||er.code==='EPERM'){rmkidsSync(p,options);}else if(er.code!=='ENOENT'){throw er;}}}function rmkidsSync(p,options){assert__default["default"](p);assert__default["default"](options);options.readdirSync(p).forEach(function(f){return rimrafSync(path__default["default"].join(p,f),options);});if(isWindows$1){// We only end up here once we got ENOTEMPTY at least once, and
// at this point, we are guaranteed to have removed all the kids.
// So, we know that it won't be ENOENT or ENOTDIR or anything else.
// try really hard to delete stuff on windows, because it has a
// PROFOUNDLY annoying habit of not closing handles promptly when
// files are deleted, resulting in spurious ENOTEMPTY errors.
var startTime=Date.now();do{try{var ret=options.rmdirSync(p,options);return ret;}catch(er){}}while(Date.now()-startTime<500);// give up after 500ms
}else{var _ret3=options.rmdirSync(p,options);return _ret3;}}var rimraf_1=rimraf;rimraf.sync=rimrafSync;var u$8=universalify.fromCallback;var remove$1={remove:u$8(rimraf_1),removeSync:rimraf_1.sync};remove$1.remove;remove$1.removeSync;var u$7=universalify.fromCallback;var emptyDir=u$7(function emptyDir(dir,callback){callback=callback||function(){};gracefulFs.readdir(dir,function(err,items){if(err)return mkdirs_1.mkdirs(dir,callback);items=items.map(function(item){return path__default["default"].join(dir,item);});deleteItem();function deleteItem(){var item=items.pop();if(!item)return callback();remove$1.remove(item,function(err){if(err)return callback(err);deleteItem();});}});});function emptyDirSync(dir){var items;try{items=gracefulFs.readdirSync(dir);}catch(err){return mkdirs_1.mkdirsSync(dir);}items.forEach(function(item){item=path__default["default"].join(dir,item);remove$1.removeSync(item);});}var empty={emptyDirSync:emptyDirSync,emptydirSync:emptyDirSync,emptyDir:emptyDir,emptydir:emptyDir};empty.emptyDirSync;empty.emptydirSync;empty.emptyDir;empty.emptydir;var u$6=universalify.fromCallback;var pathExists$6=pathExists_1.pathExists;function createFile(file,callback){function makeFile(){gracefulFs.writeFile(file,'',function(err){if(err)return callback(err);callback();});}gracefulFs.stat(file,function(err,stats){// eslint-disable-line handle-callback-err
if(!err&&stats.isFile())return callback();var dir=path__default["default"].dirname(file);pathExists$6(dir,function(err,dirExists){if(err)return callback(err);if(dirExists)return makeFile();mkdirs_1.mkdirs(dir,function(err){if(err)return callback(err);makeFile();});});});}function createFileSync(file){var stats;try{stats=gracefulFs.statSync(file);}catch(e){}if(stats&&stats.isFile())return;var dir=path__default["default"].dirname(file);if(!gracefulFs.existsSync(dir)){mkdirs_1.mkdirsSync(dir);}gracefulFs.writeFileSync(file,'');}var file$1={createFile:u$6(createFile),createFileSync:createFileSync};var u$5=universalify.fromCallback;var pathExists$5=pathExists_1.pathExists;function createLink(srcpath,dstpath,callback){function makeLink(srcpath,dstpath){gracefulFs.link(srcpath,dstpath,function(err){if(err)return callback(err);callback(null);});}pathExists$5(dstpath,function(err,destinationExists){if(err)return callback(err);if(destinationExists)return callback(null);gracefulFs.lstat(srcpath,function(err){if(err){err.message=err.message.replace('lstat','ensureLink');return callback(err);}var dir=path__default["default"].dirname(dstpath);pathExists$5(dir,function(err,dirExists){if(err)return callback(err);if(dirExists)return makeLink(srcpath,dstpath);mkdirs_1.mkdirs(dir,function(err){if(err)return callback(err);makeLink(srcpath,dstpath);});});});});}function createLinkSync(srcpath,dstpath){var destinationExists=gracefulFs.existsSync(dstpath);if(destinationExists)return undefined;try{gracefulFs.lstatSync(srcpath);}catch(err){err.message=err.message.replace('lstat','ensureLink');throw err;}var dir=path__default["default"].dirname(dstpath);var dirExists=gracefulFs.existsSync(dir);if(dirExists)return gracefulFs.linkSync(srcpath,dstpath);mkdirs_1.mkdirsSync(dir);return gracefulFs.linkSync(srcpath,dstpath);}var link={createLink:u$5(createLink),createLinkSync:createLinkSync};var pathExists$4=pathExists_1.pathExists;/**
 * Function that returns two types of paths, one relative to symlink, and one
 * relative to the current working directory. Checks if path is absolute or
 * relative. If the path is relative, this function checks if the path is
 * relative to symlink or relative to current working directory. This is an
 * initiative to find a smarter `srcpath` to supply when building symlinks.
 * This allows you to determine which path to use out of one of three possible
 * types of source paths. The first is an absolute path. This is detected by
 * `path.isAbsolute()`. When an absolute path is provided, it is checked to
 * see if it exists. If it does it's used, if not an error is returned
 * (callback)/ thrown (sync). The other two options for `srcpath` are a
 * relative url. By default Node's `fs.symlink` works by creating a symlink
 * using `dstpath` and expects the `srcpath` to be relative to the newly
 * created symlink. If you provide a `srcpath` that does not exist on the file
 * system it results in a broken symlink. To minimize this, the function
 * checks to see if the 'relative to symlink' source file exists, and if it
 * does it will use it. If it does not, it checks if there's a file that
 * exists that is relative to the current working directory, if does its used.
 * This preserves the expectations of the original fs.symlink spec and adds
 * the ability to pass in `relative to current working direcotry` paths.
 */function symlinkPaths$1(srcpath,dstpath,callback){if(path__default["default"].isAbsolute(srcpath)){return gracefulFs.lstat(srcpath,function(err){if(err){err.message=err.message.replace('lstat','ensureSymlink');return callback(err);}return callback(null,{'toCwd':srcpath,'toDst':srcpath});});}else{var dstdir=path__default["default"].dirname(dstpath);var relativeToDst=path__default["default"].join(dstdir,srcpath);return pathExists$4(relativeToDst,function(err,exists){if(err)return callback(err);if(exists){return callback(null,{'toCwd':relativeToDst,'toDst':srcpath});}else{return gracefulFs.lstat(srcpath,function(err){if(err){err.message=err.message.replace('lstat','ensureSymlink');return callback(err);}return callback(null,{'toCwd':srcpath,'toDst':path__default["default"].relative(dstdir,srcpath)});});}});}}function symlinkPathsSync$1(srcpath,dstpath){var exists;if(path__default["default"].isAbsolute(srcpath)){exists=gracefulFs.existsSync(srcpath);if(!exists)throw new Error('absolute srcpath does not exist');return{'toCwd':srcpath,'toDst':srcpath};}else{var dstdir=path__default["default"].dirname(dstpath);var relativeToDst=path__default["default"].join(dstdir,srcpath);exists=gracefulFs.existsSync(relativeToDst);if(exists){return{'toCwd':relativeToDst,'toDst':srcpath};}else{exists=gracefulFs.existsSync(srcpath);if(!exists)throw new Error('relative srcpath does not exist');return{'toCwd':srcpath,'toDst':path__default["default"].relative(dstdir,srcpath)};}}}var symlinkPaths_1={symlinkPaths:symlinkPaths$1,symlinkPathsSync:symlinkPathsSync$1};function symlinkType$1(srcpath,type,callback){callback=typeof type==='function'?type:callback;type=typeof type==='function'?false:type;if(type)return callback(null,type);gracefulFs.lstat(srcpath,function(err,stats){if(err)return callback(null,'file');type=stats&&stats.isDirectory()?'dir':'file';callback(null,type);});}function symlinkTypeSync$1(srcpath,type){var stats;if(type)return type;try{stats=gracefulFs.lstatSync(srcpath);}catch(e){return'file';}return stats&&stats.isDirectory()?'dir':'file';}var symlinkType_1={symlinkType:symlinkType$1,symlinkTypeSync:symlinkTypeSync$1};var u$4=universalify.fromCallback;var mkdirs=mkdirs_1.mkdirs;var mkdirsSync=mkdirs_1.mkdirsSync;var symlinkPaths=symlinkPaths_1.symlinkPaths;var symlinkPathsSync=symlinkPaths_1.symlinkPathsSync;var symlinkType=symlinkType_1.symlinkType;var symlinkTypeSync=symlinkType_1.symlinkTypeSync;var pathExists$3=pathExists_1.pathExists;function createSymlink(srcpath,dstpath,type,callback){callback=typeof type==='function'?type:callback;type=typeof type==='function'?false:type;pathExists$3(dstpath,function(err,destinationExists){if(err)return callback(err);if(destinationExists)return callback(null);symlinkPaths(srcpath,dstpath,function(err,relative){if(err)return callback(err);srcpath=relative.toDst;symlinkType(relative.toCwd,type,function(err,type){if(err)return callback(err);var dir=path__default["default"].dirname(dstpath);pathExists$3(dir,function(err,dirExists){if(err)return callback(err);if(dirExists)return gracefulFs.symlink(srcpath,dstpath,type,callback);mkdirs(dir,function(err){if(err)return callback(err);gracefulFs.symlink(srcpath,dstpath,type,callback);});});});});});}function createSymlinkSync(srcpath,dstpath,type){var destinationExists=gracefulFs.existsSync(dstpath);if(destinationExists)return undefined;var relative=symlinkPathsSync(srcpath,dstpath);srcpath=relative.toDst;type=symlinkTypeSync(relative.toCwd,type);var dir=path__default["default"].dirname(dstpath);var exists=gracefulFs.existsSync(dir);if(exists)return gracefulFs.symlinkSync(srcpath,dstpath,type);mkdirsSync(dir);return gracefulFs.symlinkSync(srcpath,dstpath,type);}var symlink={createSymlink:u$4(createSymlink),createSymlinkSync:createSymlinkSync};var ensure={// file
createFile:file$1.createFile,createFileSync:file$1.createFileSync,ensureFile:file$1.createFile,ensureFileSync:file$1.createFileSync,// link
createLink:link.createLink,createLinkSync:link.createLinkSync,ensureLink:link.createLink,ensureLinkSync:link.createLinkSync,// symlink
createSymlink:symlink.createSymlink,createSymlinkSync:symlink.createSymlinkSync,ensureSymlink:symlink.createSymlink,ensureSymlinkSync:symlink.createSymlinkSync};ensure.createFile;ensure.createFileSync;ensure.ensureFile;ensure.ensureFileSync;ensure.createLink;ensure.createLinkSync;ensure.ensureLink;ensure.ensureLinkSync;ensure.createSymlink;ensure.createSymlinkSync;ensure.ensureSymlink;ensure.ensureSymlinkSync;var _fs;try{_fs=gracefulFs;}catch(_){_fs=fs__default["default"];}function readFile(file,options,callback){if(callback==null){callback=options;options={};}if(typeof options==='string'){options={encoding:options};}options=options||{};var fs=options.fs||_fs;var shouldThrow=true;if('throws'in options){shouldThrow=options["throws"];}fs.readFile(file,options,function(err,data){if(err)return callback(err);data=stripBom(data);var obj;try{obj=JSON.parse(data,options?options.reviver:null);}catch(err2){if(shouldThrow){err2.message=file+': '+err2.message;return callback(err2);}else{return callback(null,null);}}callback(null,obj);});}function readFileSync(file,options){options=options||{};if(typeof options==='string'){options={encoding:options};}var fs=options.fs||_fs;var shouldThrow=true;if('throws'in options){shouldThrow=options["throws"];}try{var content=fs.readFileSync(file,options);content=stripBom(content);return JSON.parse(content,options.reviver);}catch(err){if(shouldThrow){err.message=file+': '+err.message;throw err;}else{return null;}}}function stringify(obj,options){var spaces;var EOL='\n';if(_typeof(options)==='object'&&options!==null){if(options.spaces){spaces=options.spaces;}if(options.EOL){EOL=options.EOL;}}var str=JSON.stringify(obj,options?options.replacer:null,spaces);return str.replace(/\n/g,EOL)+EOL;}function writeFile(file,obj,options,callback){if(callback==null){callback=options;options={};}options=options||{};var fs=options.fs||_fs;var str='';try{str=stringify(obj,options);}catch(err){// Need to return whether a callback was passed or not
if(callback)callback(err,null);return;}fs.writeFile(file,str,options,callback);}function writeFileSync(file,obj,options){options=options||{};var fs=options.fs||_fs;var str=stringify(obj,options);// not sure if fs.writeFileSync returns anything, but just in case
return fs.writeFileSync(file,str,options);}function stripBom(content){// we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified
if(Buffer.isBuffer(content))content=content.toString('utf8');content=content.replace(/^\uFEFF/,'');return content;}var jsonfile$1={readFile:readFile,readFileSync:readFileSync,writeFile:writeFile,writeFileSync:writeFileSync};var jsonfile_1=jsonfile$1;var u$3=universalify.fromCallback;var jsonfile={// jsonfile exports
readJson:u$3(jsonfile_1.readFile),readJsonSync:jsonfile_1.readFileSync,writeJson:u$3(jsonfile_1.writeFile),writeJsonSync:jsonfile_1.writeFileSync};jsonfile.readJson;jsonfile.readJsonSync;jsonfile.writeJson;jsonfile.writeJsonSync;var pathExists$2=pathExists_1.pathExists;function outputJson(file,data,options,callback){if(typeof options==='function'){callback=options;options={};}var dir=path__default["default"].dirname(file);pathExists$2(dir,function(err,itDoes){if(err)return callback(err);if(itDoes)return jsonfile.writeJson(file,data,options,callback);mkdirs_1.mkdirs(dir,function(err){if(err)return callback(err);jsonfile.writeJson(file,data,options,callback);});});}var outputJson_1=outputJson;function outputJsonSync(file,data,options){var dir=path__default["default"].dirname(file);if(!gracefulFs.existsSync(dir)){mkdirs_1.mkdirsSync(dir);}jsonfile.writeJsonSync(file,data,options);}var outputJsonSync_1=outputJsonSync;var u$2=universalify.fromCallback;jsonfile.outputJson=u$2(outputJson_1);jsonfile.outputJsonSync=outputJsonSync_1;// aliases
jsonfile.outputJSON=jsonfile.outputJson;jsonfile.outputJSONSync=jsonfile.outputJsonSync;jsonfile.writeJSON=jsonfile.writeJson;jsonfile.writeJSONSync=jsonfile.writeJsonSync;jsonfile.readJSON=jsonfile.readJson;jsonfile.readJSONSync=jsonfile.readJsonSync;var json=jsonfile;var copySync=copySync$1.copySync;var removeSync=remove$1.removeSync;var mkdirpSync=mkdirs_1.mkdirpSync;function moveSync$1(src,dest,opts){opts=opts||{};var overwrite=opts.overwrite||opts.clobber||false;var _stat$checkPathsSync3=stat.checkPathsSync(src,dest,'move'),srcStat=_stat$checkPathsSync3.srcStat;stat.checkParentPathsSync(src,srcStat,dest,'move');mkdirpSync(path__default["default"].dirname(dest));return doRename$1(src,dest,overwrite);}function doRename$1(src,dest,overwrite){if(overwrite){removeSync(dest);return rename$1(src,dest,overwrite);}if(gracefulFs.existsSync(dest))throw new Error('dest already exists.');return rename$1(src,dest,overwrite);}function rename$1(src,dest,overwrite){try{gracefulFs.renameSync(src,dest);}catch(err){if(err.code!=='EXDEV')throw err;return moveAcrossDevice$1(src,dest,overwrite);}}function moveAcrossDevice$1(src,dest,overwrite){var opts={overwrite:overwrite,errorOnExist:true};copySync(src,dest,opts);return removeSync(src);}var moveSync_1=moveSync$1;var moveSync={moveSync:moveSync_1};moveSync.moveSync;var copy=copy$1.copy;var remove=remove$1.remove;var mkdirp=mkdirs_1.mkdirp;var pathExists$1=pathExists_1.pathExists;function move$1(src,dest,opts,cb){if(typeof opts==='function'){cb=opts;opts={};}var overwrite=opts.overwrite||opts.clobber||false;stat.checkPaths(src,dest,'move',function(err,stats){if(err)return cb(err);var srcStat=stats.srcStat;stat.checkParentPaths(src,srcStat,dest,'move',function(err){if(err)return cb(err);mkdirp(path__default["default"].dirname(dest),function(err){if(err)return cb(err);return doRename(src,dest,overwrite,cb);});});});}function doRename(src,dest,overwrite,cb){if(overwrite){return remove(dest,function(err){if(err)return cb(err);return rename(src,dest,overwrite,cb);});}pathExists$1(dest,function(err,destExists){if(err)return cb(err);if(destExists)return cb(new Error('dest already exists.'));return rename(src,dest,overwrite,cb);});}function rename(src,dest,overwrite,cb){gracefulFs.rename(src,dest,function(err){if(!err)return cb();if(err.code!=='EXDEV')return cb(err);return moveAcrossDevice(src,dest,overwrite,cb);});}function moveAcrossDevice(src,dest,overwrite,cb){var opts={overwrite:overwrite,errorOnExist:true};copy(src,dest,opts,function(err){if(err)return cb(err);return remove(src,cb);});}var move_1=move$1;var u$1=universalify.fromCallback;var move={move:u$1(move_1)};move.move;var u=universalify.fromCallback;var pathExists=pathExists_1.pathExists;function outputFile(file,data,encoding,callback){if(typeof encoding==='function'){callback=encoding;encoding='utf8';}var dir=path__default["default"].dirname(file);pathExists(dir,function(err,itDoes){if(err)return callback(err);if(itDoes)return gracefulFs.writeFile(file,data,encoding,callback);mkdirs_1.mkdirs(dir,function(err){if(err)return callback(err);gracefulFs.writeFile(file,data,encoding,callback);});});}function outputFileSync(file){var dir=path__default["default"].dirname(file);for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3];}if(gracefulFs.existsSync(dir)){return gracefulFs.writeFileSync.apply(gracefulFs,[file].concat(args));}mkdirs_1.mkdirsSync(dir);gracefulFs.writeFileSync.apply(gracefulFs,[file].concat(args));}var output={outputFile:u(outputFile),outputFileSync:outputFileSync};output.outputFile;output.outputFileSync;var lib$2=createCommonjsModule(function(module){module.exports=Object.assign({},// Export promiseified graceful-fs:
fs_1,// Export extra methods:
copySync$1,copy$1,empty,ensure,json,mkdirs_1,moveSync,move,output,pathExists_1,remove$1);// Export fs.promises as a getter property so that we don't trigger
// ExperimentalWarning before fs.promises is actually accessed.
if(Object.getOwnPropertyDescriptor(fs__default["default"],'promises')){Object.defineProperty(module.exports,'promises',{get:function get(){return fs__default["default"].promises;}});}});// allows us to inject a mock date in tests
var now=function now(){return new Date();};var lib$1=createCommonjsModule(function(module){function padWithZeros(vNumber,width){var numAsString=vNumber.toString();while(numAsString.length<width){numAsString="0"+numAsString;}return numAsString;}function addZero(vNumber){return padWithZeros(vNumber,2);}/**
 * Formats the TimeOffset
 * Thanks to http://www.svendtofte.com/code/date_format/
 * @private
 */function offset(timezoneOffset){var os=Math.abs(timezoneOffset);var h=String(Math.floor(os/60));var m=String(os%60);if(h.length===1){h="0"+h;}if(m.length===1){m="0"+m;}return timezoneOffset<0?"+"+h+m:"-"+h+m;}function datePart(date,displayUTC,part){return displayUTC?date["getUTC"+part]():date["get"+part]();}function asString(format,date){if(typeof format!=="string"){date=format;format=module.exports.ISO8601_FORMAT;}if(!date){date=module.exports.now();}var displayUTC=format.indexOf("O")>-1;var vDay=addZero(datePart(date,displayUTC,"Date"));var vMonth=addZero(datePart(date,displayUTC,"Month")+1);var vYearLong=addZero(datePart(date,displayUTC,"FullYear"));var vYearShort=addZero(vYearLong.substring(2,4));var vYear=format.indexOf("yyyy")>-1?vYearLong:vYearShort;var vHour=addZero(datePart(date,displayUTC,"Hours"));var vMinute=addZero(datePart(date,displayUTC,"Minutes"));var vSecond=addZero(datePart(date,displayUTC,"Seconds"));var vMillisecond=padWithZeros(datePart(date,displayUTC,"Milliseconds"),3);var vTimeZone=offset(date.getTimezoneOffset());var formatted=format.replace(/dd/g,vDay).replace(/MM/g,vMonth).replace(/y{1,4}/g,vYear).replace(/hh/g,vHour).replace(/mm/g,vMinute).replace(/ss/g,vSecond).replace(/SSS/g,vMillisecond).replace(/O/g,vTimeZone);return formatted;}function extractDateParts(pattern,str,missingValuesDate){var matchers=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function fn(date,value){date.setFullYear(value);}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function fn(date,value){date.setMonth(value-1);}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function fn(date,value){date.setDate(value);}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function fn(date,value){date.setHours(value);}},{pattern:/mm/,regexp:"\\d\\d",fn:function fn(date,value){date.setMinutes(value);}},{pattern:/ss/,regexp:"\\d\\d",fn:function fn(date,value){date.setSeconds(value);}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function fn(date,value){date.setMilliseconds(value);}},{pattern:/O/,regexp:"[+-]\\d{3,4}|Z",fn:function fn(date,value){if(value==="Z"){value=0;}var offset=Math.abs(value);var minutes=offset%100+Math.floor(offset/100)*60;date.setMinutes(date.getMinutes()+(value>0?minutes:-minutes));}}];var parsedPattern=matchers.reduce(function(p,m){if(m.pattern.test(p.regexp)){m.index=p.regexp.match(m.pattern).index;p.regexp=p.regexp.replace(m.pattern,"("+m.regexp+")");}else{m.index=-1;}return p;},{regexp:pattern,index:[]});var dateFns=matchers.filter(function(m){return m.index>-1;});dateFns.sort(function(a,b){return a.index-b.index;});var matcher=new RegExp(parsedPattern.regexp);var matches=matcher.exec(str);if(matches){var date=missingValuesDate||module.exports.now();dateFns.forEach(function(f,i){f.fn(date,matches[i+1]);});return date;}throw new Error("String '"+str+"' could not be parsed as '"+pattern+"'");}function parse(pattern,str,missingValuesDate){if(!pattern){throw new Error("pattern must be supplied");}return extractDateParts(pattern,str,missingValuesDate);}/**
 * Used for testing - replace this function with a fixed date.
 */function now(){return new Date();}module.exports=asString;module.exports.asString=asString;module.exports.parse=parse;module.exports.now=now;module.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";module.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";module.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";module.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS";});lib$1.asString;lib$1.parse;lib$1.now;lib$1.ISO8601_FORMAT;lib$1.ISO8601_WITH_TZ_OFFSET_FORMAT;lib$1.DATETIME_FORMAT;lib$1.ABSOLUTETIME_FORMAT;var debug$9=src("streamroller:fileNameFormatter");var FILENAME_SEP$1=".";var ZIP_EXT$1=".gz";var fileNameFormatter=function fileNameFormatter(_ref){var file=_ref.file,keepFileExt=_ref.keepFileExt,needsIndex=_ref.needsIndex,alwaysIncludeDate=_ref.alwaysIncludeDate,compress=_ref.compress;var dirAndName=path__default["default"].join(file.dir,file.name);var ext=function ext(f){return f+file.ext;};var index=function index(f,i,d){return(needsIndex||!d)&&i?f+FILENAME_SEP$1+i:f;};var date=function date(f,i,d){return(i>0||alwaysIncludeDate)&&d?f+FILENAME_SEP$1+d:f;};var gzip=function gzip(f,i){return i&&compress?f+ZIP_EXT$1:f;};var parts=keepFileExt?[date,index,ext,gzip]:[ext,date,index,gzip];return function(_ref2){var date=_ref2.date,index=_ref2.index;debug$9("_formatFileName: date=".concat(date,", index=").concat(index));return parts.reduce(function(filename,part){return part(filename,index,date);},dirAndName);};};var debug$8=src("streamroller:fileNameParser");var FILENAME_SEP=".";var ZIP_EXT=".gz";var fileNameParser=function fileNameParser(_ref3){var file=_ref3.file,keepFileExt=_ref3.keepFileExt,pattern=_ref3.pattern;// All these functions take two arguments: f, the filename, and p, the result placeholder
// They return the filename with any matching parts removed.
// The "zip" function, for instance, removes the ".gz" part of the filename (if present)
var zip=function zip(f,p){if(f.endsWith(ZIP_EXT)){debug$8("it is gzipped");p.isCompressed=true;return f.slice(0,-1*ZIP_EXT.length);}return f;};var __NOT_MATCHING__="__NOT_MATCHING__";var extAtEnd=function extAtEnd(f){if(f.startsWith(file.name)&&f.endsWith(file.ext)){debug$8("it starts and ends with the right things");return f.slice(file.name.length+1,-1*file.ext.length);}return __NOT_MATCHING__;};var extInMiddle=function extInMiddle(f){if(f.startsWith(file.base)){debug$8("it starts with the right things");return f.slice(file.base.length+1);}return __NOT_MATCHING__;};var dateAndIndex=function dateAndIndex(f,p){var items=f.split(FILENAME_SEP);var indexStr=items[items.length-1];debug$8("items: ",items,", indexStr: ",indexStr);var dateStr=f;if(indexStr!==undefined&&indexStr.match(/^\d+$/)){dateStr=f.slice(0,-1*(indexStr.length+1));debug$8("dateStr is ".concat(dateStr));if(pattern&&!dateStr){dateStr=indexStr;indexStr="0";}}else{indexStr="0";}try{// Two arguments for new Date() are intentional. This will set other date
// components to minimal values in the current timezone instead of UTC,
// as new Date(0) will do.
var date=lib$1.parse(pattern,dateStr,new Date(0,0));if(lib$1.asString(pattern,date)!==dateStr)return f;p.index=parseInt(indexStr,10);p.date=dateStr;p.timestamp=date.getTime();return"";}catch(e){//not a valid date, don't panic.
debug$8("Problem parsing ".concat(dateStr," as ").concat(pattern,", error was: "),e);return f;}};var index=function index(f,p){if(f.match(/^\d+$/)){debug$8("it has an index");p.index=parseInt(f,10);return"";}return f;};var parts=[zip,keepFileExt?extAtEnd:extInMiddle,pattern?dateAndIndex:index];return function(filename){var result={filename:filename,index:0,isCompressed:false};// pass the filename through each of the file part parsers
var whatsLeftOver=parts.reduce(function(remains,part){return part(remains,result);},filename);// if there's anything left after parsing, then it wasn't a valid filename
return whatsLeftOver?null:result;};};var debug$7=src('streamroller:moveAndMaybeCompressFile');var moveAndMaybeCompressFile=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(sourceFilePath,targetFilePath,needCompress){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(sourceFilePath===targetFilePath)){_context.next=3;break;}debug$7("moveAndMaybeCompressFile: source and target are the same, not doing anything");return _context.abrupt("return");case 3:_context.next=5;return lib$2.pathExists(sourceFilePath);case 5:if(!_context.sent){_context.next=26;break;}debug$7("moveAndMaybeCompressFile: moving file from ".concat(sourceFilePath," to ").concat(targetFilePath," ").concat(needCompress?"with":"without"," compress"));if(!needCompress){_context.next=12;break;}_context.next=10;return new Promise(function(resolve,reject){lib$2.createReadStream(sourceFilePath).pipe(zlib__default["default"].createGzip()).pipe(lib$2.createWriteStream(targetFilePath)).on("finish",function(){debug$7("moveAndMaybeCompressFile: finished compressing ".concat(targetFilePath,", deleting ").concat(sourceFilePath));lib$2.unlink(sourceFilePath).then(resolve)["catch"](function(){debug$7("Deleting ".concat(sourceFilePath," failed, truncating instead"));lib$2.truncate(sourceFilePath).then(resolve)["catch"](reject);});});});case 10:_context.next=26;break;case 12:debug$7("moveAndMaybeCompressFile: deleting file=".concat(targetFilePath,", renaming ").concat(sourceFilePath," to ").concat(targetFilePath));_context.prev=13;_context.next=16;return lib$2.move(sourceFilePath,targetFilePath,{overwrite:true});case 16:_context.next=26;break;case 18:_context.prev=18;_context.t0=_context["catch"](13);debug$7("moveAndMaybeCompressFile: error moving ".concat(sourceFilePath," to ").concat(targetFilePath),_context.t0);debug$7("Trying copy+truncate instead");_context.next=24;return lib$2.copy(sourceFilePath,targetFilePath,{overwrite:true});case 24:_context.next=26;return lib$2.truncate(sourceFilePath);case 26:case"end":return _context.stop();}}},_callee,null,[[13,18]]);}));return function moveAndMaybeCompressFile(_x,_x2,_x3){return _ref4.apply(this,arguments);};}();var moveAndMaybeCompressFile_1=moveAndMaybeCompressFile;var debug$6=src("streamroller:RollingFileWriteStream");var Writable=stream__default["default"].Writable;/**
 * RollingFileWriteStream is mainly used when writing to a file rolling by date or size.
 * RollingFileWriteStream inherits from stream.Writable
 */var RollingFileWriteStream=/*#__PURE__*/function(_Writable){_inherits(RollingFileWriteStream,_Writable);var _super4=_createSuper(RollingFileWriteStream);/**
   * Create a RollingFileWriteStream
   * @constructor
   * @param {string} filePath - The file path to write.
   * @param {object} options - The extra options
   * @param {number} options.numToKeep - The max numbers of files to keep.
   * @param {number} options.maxSize - The maxSize one file can reach. Unit is Byte.
   *                                   This should be more than 1024. The default is Number.MAX_SAFE_INTEGER.
   * @param {string} options.mode - The mode of the files. The default is '0644'. Refer to stream.writable for more.
   * @param {string} options.flags - The default is 'a'. Refer to stream.flags for more.
   * @param {boolean} options.compress - Whether to compress backup files.
   * @param {boolean} options.keepFileExt - Whether to keep the file extension.
   * @param {string} options.pattern - The date string pattern in the file name.
   * @param {boolean} options.alwaysIncludePattern - Whether to add date to the name of the first file.
   */function RollingFileWriteStream(filePath,options){var _this8;_classCallCheck(this,RollingFileWriteStream);debug$6("constructor: creating RollingFileWriteStream. path=".concat(filePath));_this8=_super4.call(this,options);_this8.options=_this8._parseOption(options);_this8.fileObject=path__default["default"].parse(filePath);if(_this8.fileObject.dir===""){_this8.fileObject=path__default["default"].parse(path__default["default"].join(process.cwd(),filePath));}_this8.fileFormatter=fileNameFormatter({file:_this8.fileObject,alwaysIncludeDate:_this8.options.alwaysIncludePattern,needsIndex:_this8.options.maxSize<Number.MAX_SAFE_INTEGER,compress:_this8.options.compress,keepFileExt:_this8.options.keepFileExt});_this8.fileNameParser=fileNameParser({file:_this8.fileObject,keepFileExt:_this8.options.keepFileExt,pattern:_this8.options.pattern});_this8.state={currentSize:0};if(_this8.options.pattern){_this8.state.currentDate=lib$1(_this8.options.pattern,now());}_this8.filename=_this8.fileFormatter({index:0,date:_this8.state.currentDate});if(["a","a+","as","as+"].includes(_this8.options.flags)){_this8._setExistingSizeAndDate();}debug$6("constructor: create new file ".concat(_this8.filename,", state=").concat(JSON.stringify(_this8.state)));_this8._renewWriteStream();return _this8;}_createClass(RollingFileWriteStream,[{key:"_setExistingSizeAndDate",value:function _setExistingSizeAndDate(){try{var stats=lib$2.statSync(this.filename);this.state.currentSize=stats.size;if(this.options.pattern){this.state.currentDate=lib$1(this.options.pattern,stats.mtime);}}catch(e){//file does not exist, that's fine - move along
return;}}},{key:"_parseOption",value:function _parseOption(rawOptions){var defaultOptions={maxSize:Number.MAX_SAFE_INTEGER,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0644",8),flags:"a",compress:false,keepFileExt:false,alwaysIncludePattern:false};var options=Object.assign({},defaultOptions,rawOptions);if(options.maxSize<=0){throw new Error("options.maxSize (".concat(options.maxSize,") should be > 0"));}if(options.numToKeep<=0){throw new Error("options.numToKeep (".concat(options.numToKeep,") should be > 0"));}debug$6("_parseOption: creating stream with option=".concat(JSON.stringify(options)));return options;}},{key:"_final",value:function _final(callback){this.currentFileStream.end("",this.options.encoding,callback);}},{key:"_write",value:function _write(chunk,encoding,callback){var _this9=this;this._shouldRoll().then(function(){debug$6("_write: writing chunk. "+"file=".concat(_this9.currentFileStream.path," ")+"state=".concat(JSON.stringify(_this9.state)," ")+"chunk=".concat(chunk));_this9.currentFileStream.write(chunk,encoding,function(e){_this9.state.currentSize+=chunk.length;callback(e);});});}},{key:"_shouldRoll",value:function(){var _shouldRoll2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this._dateChanged()||this._tooBig())){_context2.next=4;break;}debug$6("_shouldRoll: rolling because dateChanged? ".concat(this._dateChanged()," or tooBig? ").concat(this._tooBig()));_context2.next=4;return this._roll();case 4:case"end":return _context2.stop();}}},_callee2,this);}));function _shouldRoll(){return _shouldRoll2.apply(this,arguments);}return _shouldRoll;}()},{key:"_dateChanged",value:function _dateChanged(){return this.state.currentDate&&this.state.currentDate!==lib$1(this.options.pattern,now());}},{key:"_tooBig",value:function _tooBig(){return this.state.currentSize>=this.options.maxSize;}},{key:"_roll",value:function _roll(){var _this10=this;debug$6("_roll: closing the current stream");return new Promise(function(resolve,reject){_this10.currentFileStream.end("",_this10.options.encoding,function(){_this10._moveOldFiles().then(resolve)["catch"](reject);});});}},{key:"_moveOldFiles",value:function(){var _moveOldFiles2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee3(){var _this11=this;var files,todaysFiles,i,sourceFilePath,targetFilePath;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this._getExistingFiles();case 2:files=_context3.sent;todaysFiles=this.state.currentDate?files.filter(function(f){return f.date===_this11.state.currentDate;}):files;i=todaysFiles.length;case 5:if(!(i>=0)){_context3.next=14;break;}debug$6("_moveOldFiles: i = ".concat(i));sourceFilePath=this.fileFormatter({date:this.state.currentDate,index:i});targetFilePath=this.fileFormatter({date:this.state.currentDate,index:i+1});_context3.next=11;return moveAndMaybeCompressFile_1(sourceFilePath,targetFilePath,this.options.compress&&i===0);case 11:i--;_context3.next=5;break;case 14:this.state.currentSize=0;this.state.currentDate=this.state.currentDate?lib$1(this.options.pattern,now()):null;debug$6("_moveOldFiles: finished rolling files. state=".concat(JSON.stringify(this.state)));this._renewWriteStream();// wait for the file to be open before cleaning up old ones,
// otherwise the daysToKeep calculations can be off
_context3.next=20;return new Promise(function(resolve,reject){_this11.currentFileStream.write("","utf8",function(){_this11._clean().then(resolve)["catch"](reject);});});case 20:case"end":return _context3.stop();}}},_callee3,this);}));function _moveOldFiles(){return _moveOldFiles2.apply(this,arguments);}return _moveOldFiles;}()// Sorted from the oldest to the latest
},{key:"_getExistingFiles",value:function(){var _getExistingFiles2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee4(){var _this12=this;var files,existingFileDetails,getKey;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return lib$2.readdir(this.fileObject.dir)["catch"](function(){return[];});case 2:files=_context4.sent;debug$6("_getExistingFiles: files=".concat(files));existingFileDetails=files.map(function(n){return _this12.fileNameParser(n);}).filter(function(n){return n;});getKey=function getKey(n){return(n.timestamp?n.timestamp:now().getTime())-n.index;};existingFileDetails.sort(function(a,b){return getKey(a)-getKey(b);});return _context4.abrupt("return",existingFileDetails);case 8:case"end":return _context4.stop();}}},_callee4,this);}));function _getExistingFiles(){return _getExistingFiles2.apply(this,arguments);}return _getExistingFiles;}()},{key:"_renewWriteStream",value:function _renewWriteStream(){var _this13=this;lib$2.ensureDirSync(this.fileObject.dir);var filePath=this.fileFormatter({date:this.state.currentDate,index:0});var ops={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode};this.currentFileStream=lib$2.createWriteStream(filePath,ops);this.currentFileStream.on("error",function(e){_this13.emit("error",e);});}},{key:"_clean",value:function(){var _clean2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee5(){var _this14=this;var existingFileDetails,fileNamesToRemove;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this._getExistingFiles();case 2:existingFileDetails=_context5.sent;debug$6("_clean: numToKeep = ".concat(this.options.numToKeep,", existingFiles = ").concat(existingFileDetails.length));debug$6("_clean: existing files are: ",existingFileDetails);if(!this._tooManyFiles(existingFileDetails.length)){_context5.next=9;break;}fileNamesToRemove=existingFileDetails.slice(0,existingFileDetails.length-this.options.numToKeep-1).map(function(f){return path__default["default"].format({dir:_this14.fileObject.dir,base:f.filename});});_context5.next=9;return deleteFiles(fileNamesToRemove);case 9:case"end":return _context5.stop();}}},_callee5,this);}));function _clean(){return _clean2.apply(this,arguments);}return _clean;}()},{key:"_tooManyFiles",value:function _tooManyFiles(numFiles){return this.options.numToKeep>0&&numFiles>this.options.numToKeep;}}]);return RollingFileWriteStream;}(Writable);var deleteFiles=function deleteFiles(fileNames){debug$6("deleteFiles: files to delete: ".concat(fileNames));return Promise.all(fileNames.map(function(f){return lib$2.unlink(f)["catch"](function(e){debug$6("deleteFiles: error when unlinking ".concat(f,", ignoring. Error was ").concat(e));});}));};var RollingFileWriteStream_1=RollingFileWriteStream;// just to adapt the previous version
var RollingFileStream=/*#__PURE__*/function(_RollingFileWriteStre){_inherits(RollingFileStream,_RollingFileWriteStre);var _super5=_createSuper(RollingFileStream);function RollingFileStream(filename,size,backups,options){var _this15;_classCallCheck(this,RollingFileStream);if(!options){options={};}if(size){options.maxSize=size;}if(!backups){backups=1;}options.numToKeep=backups;_this15=_super5.call(this,filename,options);_this15.backups=_this15.options.numToKeep;_this15.size=_this15.options.maxSize;return _this15;}_createClass(RollingFileStream,[{key:"theStream",get:function get(){return this.currentFileStream;}}]);return RollingFileStream;}(RollingFileWriteStream_1);var RollingFileStream_1=RollingFileStream;// just to adapt the previous version
var DateRollingFileStream=/*#__PURE__*/function(_RollingFileWriteStre2){_inherits(DateRollingFileStream,_RollingFileWriteStre2);var _super6=_createSuper(DateRollingFileStream);function DateRollingFileStream(filename,pattern,options){var _this16;_classCallCheck(this,DateRollingFileStream);if(pattern&&_typeof(pattern)==='object'){options=pattern;pattern=null;}if(!options){options={};}if(!pattern){pattern='yyyy-MM-dd';}if(options.daysToKeep){options.numToKeep=options.daysToKeep;}if(pattern.startsWith('.')){pattern=pattern.substring(1);}options.pattern=pattern;_this16=_super6.call(this,filename,options);_this16.mode=_this16.options.mode;return _this16;}_createClass(DateRollingFileStream,[{key:"theStream",get:function get(){return this.currentFileStream;}}]);return DateRollingFileStream;}(RollingFileWriteStream_1);var DateRollingFileStream_1=DateRollingFileStream;var lib={RollingFileWriteStream:RollingFileWriteStream_1,RollingFileStream:RollingFileStream_1,DateRollingFileStream:DateRollingFileStream_1};var debug$5=src('log4js:file');var eol$2=os__default["default"].EOL;function openTheStream(file,fileSize,numFiles,options){var stream=new lib.RollingFileStream(file,fileSize,numFiles,options);stream.on('error',function(err){console.error('log4js.fileAppender - Writing to file %s, error happened ',file,err);//eslint-disable-line
});stream.on('drain',function(){process.emit("log4js:pause",false);});return stream;}/**
 * File Appender writing the logs to a text file. Supports rolling of logs by size.
 *
 * @param file file log messages will be written to
 * @param layout a function that takes a logEvent and returns a string
 *   (defaults to basicLayout).
 * @param logSize - the maximum size (in bytes) for a log file,
 *   if not provided then logs won't be rotated.
 * @param numBackups - the number of log files to keep after logSize
 *   has been reached (default 5)
 * @param options - options to be passed to the underlying stream
 * @param timezoneOffset - optional timezone offset in minutes (default system local)
 */function fileAppender$1(file,layout,logSize,numBackups,options,timezoneOffset){file=path__default["default"].normalize(file);numBackups=numBackups===undefined?5:numBackups;// there has to be at least one backup if logSize has been specified
numBackups=numBackups===0?1:numBackups;debug$5('Creating file appender (',file,', ',logSize,', ',numBackups,', ',options,', ',timezoneOffset,')');var writer=openTheStream(file,logSize,numBackups,options);var app=function app(loggingEvent){if(options.removeColor===true){// eslint-disable-next-line no-control-regex
var regex=/\x1b[[0-9;]*m/g;loggingEvent.data=loggingEvent.data.map(function(d){if(typeof d==='string')return d.replace(regex,'');return d;});}if(!writer.write(layout(loggingEvent,timezoneOffset)+eol$2,"utf8")){process.emit('log4js:pause',true);}};app.reopen=function(){writer.end(function(){writer=openTheStream(file,logSize,numBackups,options);});};app.sighupHandler=function(){debug$5('SIGHUP handler called.');app.reopen();};app.shutdown=function(complete){process.removeListener('SIGHUP',app.sighupHandler);writer.end('','utf-8',complete);};// On SIGHUP, close and reopen all files. This allows this appender to work with
// logrotate. Note that if you are using logrotate, you should not set
// `logSize`.
process.on('SIGHUP',app.sighupHandler);return app;}function configure$3(config,layouts){var layout=layouts.basicLayout;if(config.layout){layout=layouts.layout(config.layout.type,config.layout);}return fileAppender$1(config.filename,layout,config.maxLogSize,config.backups,config,config.timezoneOffset);}var configure_1$2=configure$3;var file={configure:configure_1$2};var eol$1=os__default["default"].EOL;/**
 * File appender that rolls files according to a date pattern.
 * @filename base filename.
 * @pattern the format that will be added to the end of filename when rolling,
 *          also used to check when to roll files - defaults to '.yyyy-MM-dd'
 * @layout layout function for log messages - defaults to basicLayout
 * @timezoneOffset optional timezone offset in minutes - defaults to system local
 */function appender(filename,pattern,layout,options,timezoneOffset){// the options for file appender use maxLogSize, but the docs say any file appender
// options should work for dateFile as well.
options.maxSize=options.maxLogSize;var logFile=new lib.DateRollingFileStream(filename,pattern,options);logFile.on("drain",function(){process.emit("log4js:pause",false);});var app=function app(logEvent){if(!logFile.write(layout(logEvent,timezoneOffset)+eol$1,"utf8")){process.emit("log4js:pause",true);}};app.shutdown=function(complete){logFile.write('','utf-8',function(){logFile.end(complete);});};return app;}function configure$2(config,layouts){var layout=layouts.basicLayout;if(config.layout){layout=layouts.layout(config.layout.type,config.layout);}if(!config.alwaysIncludePattern){config.alwaysIncludePattern=false;}return appender(config.filename,config.pattern,layout,config,config.timezoneOffset);}var configure_1$1=configure$2;var dateFile={configure:configure_1$1};var debug$4=src('log4js:fileSync');var eol=os__default["default"].EOL||'\n';function touchFile(file,options){// if the file exists, nothing to do
if(fs__default["default"].existsSync(file)){return;}// touch the file to apply flags (like w to truncate the file)
var id=fs__default["default"].openSync(file,options.flags,options.mode);fs__default["default"].closeSync(id);}var RollingFileSync=/*#__PURE__*/function(){function RollingFileSync(filename,size,backups,options){_classCallCheck(this,RollingFileSync);debug$4('In RollingFileStream');function throwErrorIfArgumentsAreNotValid(){if(!filename||!size||size<=0){throw new Error('You must specify a filename and file size');}}throwErrorIfArgumentsAreNotValid();this.filename=filename;this.size=size;this.backups=backups||1;this.options=options;this.currentSize=0;function currentFileSize(file){var fileSize=0;try{fileSize=fs__default["default"].statSync(file).size;}catch(e){// file does not exist
touchFile(file,options);}return fileSize;}this.currentSize=currentFileSize(this.filename);}_createClass(RollingFileSync,[{key:"shouldRoll",value:function shouldRoll(){debug$4('should roll with current size %d, and max size %d',this.currentSize,this.size);return this.currentSize>=this.size;}},{key:"roll",value:function roll(filename){var that=this;var nameMatcher=new RegExp("^".concat(path__default["default"].basename(filename)));function justTheseFiles(item){return nameMatcher.test(item);}function index(filename_){return parseInt(filename_.substring("".concat(path__default["default"].basename(filename),".").length),10)||0;}function byIndex(a,b){if(index(a)>index(b)){return 1;}if(index(a)<index(b)){return-1;}return 0;}function increaseFileIndex(fileToRename){var idx=index(fileToRename);debug$4("Index of ".concat(fileToRename," is ").concat(idx));if(idx<that.backups){// on windows, you can get a EEXIST error if you rename a file to an existing file
// so, we'll try to delete the file we're renaming to first
try{fs__default["default"].unlinkSync("".concat(filename,".").concat(idx+1));}catch(e){// ignore err: if we could not delete, it's most likely that it doesn't exist
}debug$4("Renaming ".concat(fileToRename," -> ").concat(filename,".").concat(idx+1));fs__default["default"].renameSync(path__default["default"].join(path__default["default"].dirname(filename),fileToRename),"".concat(filename,".").concat(idx+1));}}function renameTheFiles(){// roll the backups (rename file.n to file.n+1, where n <= numBackups)
debug$4('Renaming the old files');var files=fs__default["default"].readdirSync(path__default["default"].dirname(filename));files.filter(justTheseFiles).sort(byIndex).reverse().forEach(increaseFileIndex);}debug$4('Rolling, rolling, rolling');renameTheFiles();}/* eslint no-unused-vars:0 */},{key:"write",value:function write(chunk,encoding){var that=this;function writeTheChunk(){debug$4('writing the chunk to the file');that.currentSize+=chunk.length;fs__default["default"].appendFileSync(that.filename,chunk);}debug$4('in write');if(this.shouldRoll()){this.currentSize=0;this.roll(this.filename);}writeTheChunk();}}]);return RollingFileSync;}();/**
 * File Appender writing the logs to a text file. Supports rolling of logs by size.
 *
 * @param file file log messages will be written to
 * @param layout a function that takes a logevent and returns a string
 *   (defaults to basicLayout).
 * @param logSize - the maximum size (in bytes) for a log file,
 *   if not provided then logs won't be rotated.
 * @param numBackups - the number of log files to keep after logSize
 *   has been reached (default 5)
 * @param timezoneOffset - optional timezone offset in minutes
 *   (default system local)
 * @param options - passed as is to fs options
 */function fileAppender(file,layout,logSize,numBackups,timezoneOffset,options){debug$4('fileSync appender created');file=path__default["default"].normalize(file);numBackups=numBackups===undefined?5:numBackups;// there has to be at least one backup if logSize has been specified
numBackups=numBackups===0?1:numBackups;function openTheStream(filePath,fileSize,numFiles){var stream;if(fileSize){stream=new RollingFileSync(filePath,fileSize,numFiles,options);}else{stream=function(f){// touch the file to apply flags (like w to truncate the file)
touchFile(f,options);return{write:function write(data){fs__default["default"].appendFileSync(f,data);}};}(filePath);}return stream;}var logFile=openTheStream(file,logSize,numBackups);return function(loggingEvent){logFile.write(layout(loggingEvent,timezoneOffset)+eol);};}function configure$1(config,layouts){var layout=layouts.basicLayout;if(config.layout){layout=layouts.layout(config.layout.type,config.layout);}var options={flags:config.flags||'a',encoding:config.encoding||'utf8',mode:config.mode||420};return fileAppender(config.filename,layout,config.maxLogSize,config.backups,config.timezoneOffset,options);}var configure_1=configure$1;var fileSync={configure:configure_1};var debug$3=src('log4js:appenders');// pre-load the core appenders so that webpack can find them
var coreAppenders=new Map();coreAppenders.set('console',console_1);coreAppenders.set('stdout',stdout);coreAppenders.set('stderr',stderr);coreAppenders.set('logLevelFilter',logLevelFilter_1);coreAppenders.set('categoryFilter',categoryFilter_1);coreAppenders.set('noLogFilter',noLogFilter_1);coreAppenders.set('file',file);coreAppenders.set('dateFile',dateFile);coreAppenders.set('fileSync',fileSync);var appenders=new Map();var tryLoading=function tryLoading(modulePath,config){debug$3('Loading module from ',modulePath);try{return commonjsRequire(modulePath);//eslint-disable-line
}catch(e){// if the module was found, and we still got an error, then raise it
configuration.throwExceptionIf(config,e.code!=='MODULE_NOT_FOUND',"appender \"".concat(modulePath,"\" could not be loaded (error was: ").concat(e,")"));return undefined;}};var loadAppenderModule=function loadAppenderModule(type,config){return coreAppenders.get(type)||tryLoading("./".concat(type),config)||tryLoading(type,config)||commonjsRequire.main&&tryLoading(path__default["default"].join(path__default["default"].dirname(commonjsRequire.main.filename),type),config)||tryLoading(path__default["default"].join(process.cwd(),type),config);};var appendersLoading=new Set();var getAppender=function getAppender(name,config){if(appenders.has(name))return appenders.get(name);if(!config.appenders[name])return false;if(appendersLoading.has(name))throw new Error("Dependency loop detected for appender ".concat(name,"."));appendersLoading.add(name);debug$3("Creating appender ".concat(name));// eslint-disable-next-line no-use-before-define
var appender=createAppender(name,config);appendersLoading["delete"](name);appenders.set(name,appender);return appender;};var createAppender=function createAppender(name,config){var appenderConfig=config.appenders[name];var appenderModule=appenderConfig.type.configure?appenderConfig.type:loadAppenderModule(appenderConfig.type,config);configuration.throwExceptionIf(config,configuration.not(appenderModule),"appender \"".concat(name,"\" is not valid (type \"").concat(appenderConfig.type,"\" could not be found)"));if(appenderModule.appender){debug$3("DEPRECATION: Appender ".concat(appenderConfig.type," exports an appender function."));}if(appenderModule.shutdown){debug$3("DEPRECATION: Appender ".concat(appenderConfig.type," exports a shutdown function."));}debug$3("".concat(name,": clustering.isMaster ? ").concat(clustering.isMaster()));debug$3("".concat(name,": appenderModule is ").concat(util__default["default"].inspect(appenderModule)));// eslint-disable-line
return clustering.onlyOnMaster(function(){debug$3("calling appenderModule.configure for ".concat(name," / ").concat(appenderConfig.type));return appenderModule.configure(adapters_1.modifyConfig(appenderConfig),layouts,function(appender){return getAppender(appender,config);},levels);},function(){});};var setup$1=function setup$1(config){appenders.clear();appendersLoading.clear();var usedAppenders=[];Object.values(config.categories).forEach(function(category){usedAppenders.push.apply(usedAppenders,_toConsumableArray(category.appenders));});Object.keys(config.appenders).forEach(function(name){// dodgy hard-coding of special case for tcp-server which may not have
// any categories associated with it, but needs to be started up anyway
if(usedAppenders.includes(name)||config.appenders[name].type==='tcp-server'){getAppender(name,config);}});};setup$1({appenders:{out:{type:'stdout'}},categories:{"default":{appenders:['out'],level:'trace'}}});configuration.addListener(function(config){configuration.throwExceptionIf(config,configuration.not(configuration.anObject(config.appenders)),'must have a property "appenders" of type object.');var appenderNames=Object.keys(config.appenders);configuration.throwExceptionIf(config,configuration.not(appenderNames.length),'must define at least one appender.');appenderNames.forEach(function(name){configuration.throwExceptionIf(config,configuration.not(config.appenders[name].type),"appender \"".concat(name,"\" is not valid (must be an object with property \"type\")"));});});configuration.addListener(setup$1);var appenders_1=appenders;var debug$2=src('log4js:categories');var categories=new Map();/**
 * Add inherited config to this category.  That includes extra appenders from parent,
 * and level, if none is set on this category.
 * This is recursive, so each parent also gets loaded with inherited appenders.
 * Inheritance is blocked if a category has inherit=false
 * @param  {*} config
 * @param  {*} category the child category
 * @param  {string} categoryName dotted path to category
 * @return {void}
 */function inheritFromParent(config,category,categoryName){if(category.inherit===false)return;var lastDotIndex=categoryName.lastIndexOf('.');if(lastDotIndex<0)return;// category is not a child
var parentCategoryName=categoryName.substring(0,lastDotIndex);var parentCategory=config.categories[parentCategoryName];if(!parentCategory){// parent is missing, so implicitly create it, so that it can inherit from its parents
parentCategory={inherit:true,appenders:[]};}// make sure parent has had its inheritance taken care of before pulling its properties to this child
inheritFromParent(config,parentCategory,parentCategoryName);// if the parent is not in the config (because we just created it above),
// and it inherited a valid configuration, add it to config.categories
if(!config.categories[parentCategoryName]&&parentCategory.appenders&&parentCategory.appenders.length&&parentCategory.level){config.categories[parentCategoryName]=parentCategory;}category.appenders=category.appenders||[];category.level=category.level||parentCategory.level;// merge in appenders from parent (parent is already holding its inherited appenders)
parentCategory.appenders.forEach(function(ap){if(!category.appenders.includes(ap)){category.appenders.push(ap);}});category.parent=parentCategory;}/**
 * Walk all categories in the config, and pull down any configuration from parent to child.
 * This includes inherited appenders, and level, where level is not set.
 * Inheritance is skipped where a category has inherit=false.
 * @param  {*} config
 */function addCategoryInheritance(config){if(!config.categories)return;var categoryNames=Object.keys(config.categories);categoryNames.forEach(function(name){var category=config.categories[name];// add inherited appenders and level to this category
inheritFromParent(config,category,name);});}configuration.addPreProcessingListener(function(config){return addCategoryInheritance(config);});configuration.addListener(function(config){configuration.throwExceptionIf(config,configuration.not(configuration.anObject(config.categories)),'must have a property "categories" of type object.');var categoryNames=Object.keys(config.categories);configuration.throwExceptionIf(config,configuration.not(categoryNames.length),'must define at least one category.');categoryNames.forEach(function(name){var category=config.categories[name];configuration.throwExceptionIf(config,[configuration.not(category.appenders),configuration.not(category.level)],"category \"".concat(name,"\" is not valid (must be an object with properties \"appenders\" and \"level\")"));configuration.throwExceptionIf(config,configuration.not(Array.isArray(category.appenders)),"category \"".concat(name,"\" is not valid (appenders must be an array of appender names)"));configuration.throwExceptionIf(config,configuration.not(category.appenders.length),"category \"".concat(name,"\" is not valid (appenders must contain at least one appender name)"));if(Object.prototype.hasOwnProperty.call(category,'enableCallStack')){configuration.throwExceptionIf(config,typeof category.enableCallStack!=='boolean',"category \"".concat(name,"\" is not valid (enableCallStack must be boolean type)"));}category.appenders.forEach(function(appender){configuration.throwExceptionIf(config,configuration.not(appenders_1.get(appender)),"category \"".concat(name,"\" is not valid (appender \"").concat(appender,"\" is not defined)"));});configuration.throwExceptionIf(config,configuration.not(levels.getLevel(category.level)),"category \"".concat(name,"\" is not valid (level \"").concat(category.level,"\" not recognised;")+" valid levels are ".concat(levels.levels.join(', '),")"));});configuration.throwExceptionIf(config,configuration.not(config.categories["default"]),'must define a "default" category.');});var setup=function setup(config){categories.clear();var categoryNames=Object.keys(config.categories);categoryNames.forEach(function(name){var category=config.categories[name];var categoryAppenders=[];category.appenders.forEach(function(appender){categoryAppenders.push(appenders_1.get(appender));debug$2("Creating category ".concat(name));categories.set(name,{appenders:categoryAppenders,level:levels.getLevel(category.level),enableCallStack:category.enableCallStack||false});});});};setup({categories:{"default":{appenders:['out'],level:'OFF'}}});configuration.addListener(setup);var configForCategory=function configForCategory(category){debug$2("configForCategory: searching for config for ".concat(category));if(categories.has(category)){debug$2("configForCategory: ".concat(category," exists in config, returning it"));return categories.get(category);}if(category.indexOf('.')>0){debug$2("configForCategory: ".concat(category," has hierarchy, searching for parents"));return configForCategory(category.substring(0,category.lastIndexOf('.')));}debug$2('configForCategory: returning config for default category');return configForCategory('default');};var appendersForCategory=function appendersForCategory(category){return configForCategory(category).appenders;};var getLevelForCategory=function getLevelForCategory(category){return configForCategory(category).level;};var setLevelForCategory=function setLevelForCategory(category,level){var categoryConfig=categories.get(category);debug$2("setLevelForCategory: found ".concat(categoryConfig," for ").concat(category));if(!categoryConfig){var sourceCategoryConfig=configForCategory(category);debug$2('setLevelForCategory: no config found for category, '+"found ".concat(sourceCategoryConfig," for parents of ").concat(category));categoryConfig={appenders:sourceCategoryConfig.appenders};}categoryConfig.level=level;categories.set(category,categoryConfig);};var getEnableCallStackForCategory=function getEnableCallStackForCategory(category){return configForCategory(category).enableCallStack===true;};var setEnableCallStackForCategory=function setEnableCallStackForCategory(category,useCallStack){configForCategory(category).enableCallStack=useCallStack;};var categories_1={appendersForCategory:appendersForCategory,getLevelForCategory:getLevelForCategory,setLevelForCategory:setLevelForCategory,getEnableCallStackForCategory:getEnableCallStackForCategory,setEnableCallStackForCategory:setEnableCallStackForCategory};/* eslint no-underscore-dangle:0 */var debug$1=src("log4js:logger");var stackReg=/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/;function defaultParseCallStack(data){var skipIdx=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var stacklines=data.stack.split("\n").slice(skipIdx);var lineMatch=stackReg.exec(stacklines[0]);if(lineMatch&&lineMatch.length===6){return{functionName:lineMatch[1],fileName:lineMatch[2],lineNumber:parseInt(lineMatch[3],10),columnNumber:parseInt(lineMatch[4],10),callStack:stacklines.join("\n")};}return null;}/**
 * Logger to log messages.
 * use {@see log4js#getLogger(String)} to get an instance.
 *
 * @name Logger
 * @namespace Log4js
 * @param name name of category to log to
 * @param level - the loglevel for the category
 * @param dispatch - the function which will receive the logevents
 *
 * @author Stephan Strittmatter
 */var Logger=/*#__PURE__*/function(){function Logger(name){_classCallCheck(this,Logger);if(!name){throw new Error("No category provided.");}this.category=name;this.context={};this.parseCallStack=defaultParseCallStack;debug$1("Logger created (".concat(this.category,", ").concat(this.level,")"));}_createClass(Logger,[{key:"level",get:function get(){return levels.getLevel(categories_1.getLevelForCategory(this.category),levels.TRACE);},set:function set(level){categories_1.setLevelForCategory(this.category,levels.getLevel(level,this.level));}},{key:"useCallStack",get:function get(){return categories_1.getEnableCallStackForCategory(this.category);},set:function set(bool){categories_1.setEnableCallStackForCategory(this.category,bool===true);}},{key:"log",value:function log(level){var logLevel=levels.getLevel(level,levels.INFO);if(this.isLevelEnabled(logLevel)){for(var _len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++){args[_key4-1]=arguments[_key4];}this._log(logLevel,args);}}},{key:"isLevelEnabled",value:function isLevelEnabled(otherLevel){return this.level.isLessThanOrEqualTo(otherLevel);}},{key:"_log",value:function _log(level,data){debug$1("sending log data (".concat(level,") to appenders"));var loggingEvent=new LoggingEvent_1(this.category,level,data,this.context,this.useCallStack&&this.parseCallStack(new Error()));clustering.send(loggingEvent);}},{key:"addContext",value:function addContext(key,value){this.context[key]=value;}},{key:"removeContext",value:function removeContext(key){delete this.context[key];}},{key:"clearContext",value:function clearContext(){this.context={};}},{key:"setParseCallStackFunction",value:function setParseCallStackFunction(parseFunction){this.parseCallStack=parseFunction;}}]);return Logger;}();function addLevelMethods(target){var level=levels.getLevel(target);var levelStrLower=level.toString().toLowerCase();var levelMethod=levelStrLower.replace(/_([a-z])/g,function(g){return g[1].toUpperCase();});var isLevelMethod=levelMethod[0].toUpperCase()+levelMethod.slice(1);Logger.prototype["is".concat(isLevelMethod,"Enabled")]=function(){return this.isLevelEnabled(level);};Logger.prototype[levelMethod]=function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5];}this.log.apply(this,[level].concat(args));};}levels.levels.forEach(addLevelMethods);configuration.addListener(function(){levels.levels.forEach(addLevelMethods);});var logger=Logger;/* eslint-disable no-plusplus */var DEFAULT_FORMAT=":remote-addr - -"+' ":method :url HTTP/:http-version"'+' :status :content-length ":referrer"'+' ":user-agent"';/**
 * Return request url path,
 * adding this function prevents the Cyclomatic Complexity,
 * for the assemble_tokens function at low, to pass the tests.
 *
 * @param  {IncomingMessage} req
 * @return {string}
 * @api private
 */function getUrl(req){return req.originalUrl||req.url;}/**
 * Adds custom {token, replacement} objects to defaults,
 * overwriting the defaults if any tokens clash
 *
 * @param  {IncomingMessage} req
 * @param  {ServerResponse} res
 * @param  {Array} customTokens
 *    [{ token: string-or-regexp, replacement: string-or-replace-function }]
 * @return {Array}
 */function assembleTokens(req,res,customTokens){var arrayUniqueTokens=function arrayUniqueTokens(array){var a=array.concat();for(var i=0;i<a.length;++i){for(var j=i+1;j<a.length;++j){// not === because token can be regexp object
/* eslint eqeqeq:0 */if(a[i].token==a[j].token){a.splice(j--,1);}}}return a;};var defaultTokens=[];defaultTokens.push({token:":url",replacement:getUrl(req)});defaultTokens.push({token:":protocol",replacement:req.protocol});defaultTokens.push({token:":hostname",replacement:req.hostname});defaultTokens.push({token:":method",replacement:req.method});defaultTokens.push({token:":status",replacement:res.__statusCode||res.statusCode});defaultTokens.push({token:":response-time",replacement:res.responseTime});defaultTokens.push({token:":date",replacement:new Date().toUTCString()});defaultTokens.push({token:":referrer",replacement:req.headers.referer||req.headers.referrer||""});defaultTokens.push({token:":http-version",replacement:"".concat(req.httpVersionMajor,".").concat(req.httpVersionMinor)});defaultTokens.push({token:":remote-addr",replacement:req.headers["x-forwarded-for"]||req.ip||req._remoteAddress||req.socket&&(req.socket.remoteAddress||req.socket.socket&&req.socket.socket.remoteAddress)});defaultTokens.push({token:":user-agent",replacement:req.headers["user-agent"]});defaultTokens.push({token:":content-length",replacement:res.getHeader("content-length")||res.__headers&&res.__headers["Content-Length"]||"-"});defaultTokens.push({token:/:req\[([^\]]+)]/g,replacement:function replacement(_,field){return req.headers[field.toLowerCase()];}});defaultTokens.push({token:/:res\[([^\]]+)]/g,replacement:function replacement(_,field){return res.getHeader(field.toLowerCase())||res.__headers&&res.__headers[field];}});return arrayUniqueTokens(customTokens.concat(defaultTokens));}/**
 * Return formatted log line.
 *
 * @param  {string} str
 * @param {Array} tokens
 * @return {string}
 * @api private
 */function format(str,tokens){for(var i=0;i<tokens.length;i++){str=str.replace(tokens[i].token,tokens[i].replacement);}return str;}/**
 * Return RegExp Object about nolog
 *
 * @param  {(string|Array)} nolog
 * @return {RegExp}
 * @api private
 *
 * syntax
 *  1. String
 *   1.1 "\\.gif"
 *         NOT LOGGING http://example.com/hoge.gif and http://example.com/hoge.gif?fuga
 *         LOGGING http://example.com/hoge.agif
 *   1.2 in "\\.gif|\\.jpg$"
 *         NOT LOGGING http://example.com/hoge.gif and
 *           http://example.com/hoge.gif?fuga and http://example.com/hoge.jpg?fuga
 *         LOGGING http://example.com/hoge.agif,
 *           http://example.com/hoge.ajpg and http://example.com/hoge.jpg?hoge
 *   1.3 in "\\.(gif|jpe?g|png)$"
 *         NOT LOGGING http://example.com/hoge.gif and http://example.com/hoge.jpeg
 *         LOGGING http://example.com/hoge.gif?uid=2 and http://example.com/hoge.jpg?pid=3
 *  2. RegExp
 *   2.1 in /\.(gif|jpe?g|png)$/
 *         SAME AS 1.3
 *  3. Array
 *   3.1 ["\\.jpg$", "\\.png", "\\.gif"]
 *         SAME AS "\\.jpg|\\.png|\\.gif"
 */function createNoLogCondition(nolog){var regexp=null;if(nolog instanceof RegExp){regexp=nolog;}if(typeof nolog==="string"){regexp=new RegExp(nolog);}if(Array.isArray(nolog)){// convert to strings
var regexpsAsStrings=nolog.map(function(reg){return reg.source?reg.source:reg;});regexp=new RegExp(regexpsAsStrings.join("|"));}return regexp;}/**
 * Allows users to define rules around status codes to assign them to a specific
 * logging level.
 * There are two types of rules:
 *   - RANGE: matches a code within a certain range
 *     E.g. { 'from': 200, 'to': 299, 'level': 'info' }
 *   - CONTAINS: matches a code to a set of expected codes
 *     E.g. { 'codes': [200, 203], 'level': 'debug' }
 * Note*: Rules are respected only in order of prescendence.
 *
 * @param {Number} statusCode
 * @param {Level} currentLevel
 * @param {Object} ruleSet
 * @return {Level}
 * @api private
 */function matchRules(statusCode,currentLevel,ruleSet){var level=currentLevel;if(ruleSet){var matchedRule=ruleSet.find(function(rule){var ruleMatched=false;if(rule.from&&rule.to){ruleMatched=statusCode>=rule.from&&statusCode<=rule.to;}else{ruleMatched=rule.codes.indexOf(statusCode)!==-1;}return ruleMatched;});if(matchedRule){level=levels.getLevel(matchedRule.level,level);}}return level;}/**
 * Log requests with the given `options` or a `format` string.
 *
 * Options:
 *
 *   - `format`        Format string, see below for tokens
 *   - `level`         A log4js levels instance. Supports also 'auto'
 *   - `nolog`         A string or RegExp to exclude target logs
 *   - `statusRules`   A array of rules for setting specific logging levels base on status codes
 *   - `context`       Whether to add a response of express to the context
 *
 * Tokens:
 *
 *   - `:req[header]` ex: `:req[Accept]`
 *   - `:res[header]` ex: `:res[Content-Length]`
 *   - `:http-version`
 *   - `:response-time`
 *   - `:remote-addr`
 *   - `:date`
 *   - `:method`
 *   - `:url`
 *   - `:referrer`
 *   - `:user-agent`
 *   - `:status`
 *
 * @return {Function}
 * @param logger4js
 * @param options
 * @api public
 */var connectLogger=function getLogger(logger4js,options){/* eslint no-underscore-dangle:0 */if(typeof options==="string"||typeof options==="function"){options={format:options};}else{options=options||{};}var thisLogger=logger4js;var level=levels.getLevel(options.level,levels.INFO);var fmt=options.format||DEFAULT_FORMAT;var nolog=createNoLogCondition(options.nolog);return function(req,res,next){// mount safety
if(req._logging)return next();// nologs
if(nolog&&nolog.test(req.originalUrl))return next();if(thisLogger.isLevelEnabled(level)||options.level==="auto"){var start=new Date();var writeHead=res.writeHead;// flag as logging
req._logging=true;// proxy for statusCode.
res.writeHead=function(code,headers){res.writeHead=writeHead;res.writeHead(code,headers);res.__statusCode=code;res.__headers=headers||{};};// hook on end request to emit the log entry of the HTTP request.
res.on("finish",function(){res.responseTime=new Date()-start;// status code response level handling
if(res.statusCode&&options.level==="auto"){level=levels.INFO;if(res.statusCode>=300)level=levels.WARN;if(res.statusCode>=400)level=levels.ERROR;}level=matchRules(res.statusCode,level,options.statusRules);var combinedTokens=assembleTokens(req,res,options.tokens||[]);if(options.context)thisLogger.addContext("res",res);if(typeof fmt==="function"){var line=fmt(req,res,function(str){return format(str,combinedTokens);});if(line)thisLogger.log(level,line);}else{thisLogger.log(level,format(fmt,combinedTokens));}if(options.context)thisLogger.removeContext("res");});}// ensure next gets always called
return next();};};/**
 * @fileoverview log4js is a library to log in JavaScript in similar manner
 * than in log4j for Java (but not really).
 *
 * <h3>Example:</h3>
 * <pre>
 *  const logging = require('log4js');
 *  const log = logging.getLogger('some-category');
 *
 *  //call the log
 *  log.trace('trace me' );
 * </pre>
 *
 * NOTE: the authors below are the original browser-based log4js authors
 * don't try to contact them about bugs in this version :)
 * @author Stephan Strittmatter - http://jroller.com/page/stritti
 * @author Seth Chisamore - http://www.chisamore.com
 * @since 2005-05-20
 * Website: http://log4js.berlios.de
 */var debug=src("log4js:main");var deepClone=rfdc_1({proto:true});var enabled=false;function sendLogEventToAppender(logEvent){if(!enabled)return;debug("Received log event ",logEvent);var categoryAppenders=categories_1.appendersForCategory(logEvent.categoryName);categoryAppenders.forEach(function(appender){appender(logEvent);});}function loadConfigurationFile(filename){debug("Loading configuration from ".concat(filename));try{return JSON.parse(fs__default["default"].readFileSync(filename,"utf8"));}catch(e){throw new Error("Problem reading config from file \"".concat(filename,"\". Error was ").concat(e.message),e);}}function configure(configurationFileOrObject){var configObject=configurationFileOrObject;if(typeof configObject==="string"){configObject=loadConfigurationFile(configurationFileOrObject);}debug("Configuration is ".concat(configObject));configuration.configure(deepClone(configObject));clustering.onMessage(sendLogEventToAppender);enabled=true;// eslint-disable-next-line no-use-before-define
return log4js;}/**
 * Shutdown all log appenders. This will first disable all writing to appenders
 * and then call the shutdown function each appender.
 *
 * @params {Function} cb - The callback to be invoked once all appenders have
 *  shutdown. If an error occurs, the callback will be given the error object
 *  as the first argument.
 */function shutdown(cb){debug("Shutdown called. Disabling all log writing.");// First, disable all writing to appenders. This prevents appenders from
// not being able to be drained because of run-away log writes.
enabled=false;// Call each of the shutdown functions in parallel
var appendersToCheck=Array.from(appenders_1.values());var shutdownFunctions=appendersToCheck.reduceRight(function(accum,next){return next.shutdown?accum+1:accum;},0);var completed=0;var error;debug("Found ".concat(shutdownFunctions," appenders with shutdown functions."));function complete(err){error=error||err;completed+=1;debug("Appender shutdowns complete: ".concat(completed," / ").concat(shutdownFunctions));if(completed>=shutdownFunctions){debug("All shutdown functions completed.");if(cb){cb(error);}}}if(shutdownFunctions===0){debug("No appenders with shutdown functions found.");return cb!==undefined&&cb();}appendersToCheck.filter(function(a){return a.shutdown;}).forEach(function(a){return a.shutdown(complete);});return null;}/**
 * Get a logger instance.
 * @static
 * @param loggerCategoryName
 * @return {Logger} instance of logger for the category
 */function getLogger(category){if(!enabled){configure(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{"default":{appenders:["out"],level:"OFF"}}});}return new logger(category||"default");}/**
 * @name log4js
 * @namespace Log4js
 * @property getLogger
 * @property configure
 * @property shutdown
 */var log4js={getLogger:getLogger,configure:configure,shutdown:shutdown,connectLogger:connectLogger,levels:levels,addLayout:layouts.addLayout};var timeNow=new Date().getTime();var logConfigDefault={appenders:{console:{type:'console'},file:{type:'file',filename:path__namespace.join(__dirname,"../logs/time-".concat(timeNow,".log"))}},categories:{"default":{appenders:['file','console'],level:'debug'}}};undefined(logConfigDefault);var logx=undefined();function createLogProxy(logLevel){var logger=arguments.length>1&&arguments[1]!==undefined?arguments[1]:logx;return function(messeage){for(var _len6=arguments.length,arg=new Array(_len6>1?_len6-1:0),_key6=1;_key6<_len6;_key6++){arg[_key6-1]=arguments[_key6];}switch(logLevel){case'debug':return logger.debug.apply(logger,[messeage].concat(arg));case'info':return logger.debug.apply(logger,[messeage].concat(arg));case'warn':return logger.debug.apply(logger,[messeage].concat(arg));case'error':return logger.debug.apply(logger,[messeage].concat(arg));}};}console.log=createLogProxy('debug');console.info=createLogProxy('info');console.warn=createLogProxy('warn');console.error=createLogProxy('error');var windows=isexe$2;isexe$2.sync=sync$4;function checkPathExt(path,options){var pathext=options.pathExt!==undefined?options.pathExt:process.env.PATHEXT;if(!pathext){return true;}pathext=pathext.split(';');if(pathext.indexOf('')!==-1){return true;}for(var i=0;i<pathext.length;i++){var p=pathext[i].toLowerCase();if(p&&path.substr(-p.length).toLowerCase()===p){return true;}}return false;}function checkStat$1(stat,path,options){if(!stat.isSymbolicLink()&&!stat.isFile()){return false;}return checkPathExt(path,options);}function isexe$2(path,options,cb){fs__default["default"].stat(path,function(er,stat){cb(er,er?false:checkStat$1(stat,path,options));});}function sync$4(path,options){return checkStat$1(fs__default["default"].statSync(path),path,options);}var mode=isexe$1;isexe$1.sync=sync$3;function isexe$1(path,options,cb){fs__default["default"].stat(path,function(er,stat){cb(er,er?false:checkStat(stat,options));});}function sync$3(path,options){return checkStat(fs__default["default"].statSync(path),options);}function checkStat(stat,options){return stat.isFile()&&checkMode(stat,options);}function checkMode(stat,options){var mod=stat.mode;var uid=stat.uid;var gid=stat.gid;var myUid=options.uid!==undefined?options.uid:process.getuid&&process.getuid();var myGid=options.gid!==undefined?options.gid:process.getgid&&process.getgid();var u=parseInt('100',8);var g=parseInt('010',8);var o=parseInt('001',8);var ug=u|g;var ret=mod&o||mod&g&&gid===myGid||mod&u&&uid===myUid||mod&ug&&myUid===0;return ret;}var core$1;if(process.platform==='win32'||commonjsGlobal.TESTING_WINDOWS){core$1=windows;}else{core$1=mode;}var isexe_1=isexe;isexe.sync=sync$2;function isexe(path,options,cb){if(typeof options==='function'){cb=options;options={};}if(!cb){if(typeof Promise!=='function'){throw new TypeError('callback not provided');}return new Promise(function(resolve,reject){isexe(path,options||{},function(er,is){if(er){reject(er);}else{resolve(is);}});});}core$1(path,options||{},function(er,is){// ignore EACCES because that just means we aren't allowed to run it
if(er){if(er.code==='EACCES'||options&&options.ignoreErrors){er=null;is=false;}}cb(er,is);});}function sync$2(path,options){// my kingdom for a filtered catch
try{return core$1.sync(path,options||{});}catch(er){if(options&&options.ignoreErrors||er.code==='EACCES'){return false;}else{throw er;}}}var isWindows=process.platform==='win32'||process.env.OSTYPE==='cygwin'||process.env.OSTYPE==='msys';var COLON=isWindows?';':':';var getNotFoundError=function getNotFoundError(cmd){return Object.assign(new Error("not found: ".concat(cmd)),{code:'ENOENT'});};var getPathInfo=function getPathInfo(cmd,opt){var colon=opt.colon||COLON;// If it has a slash, then we don't bother searching the pathenv.
// just check the file itself, and that's it.
var pathEnv=cmd.match(/\//)||isWindows&&cmd.match(/\\/)?['']:[].concat(_toConsumableArray(isWindows?[process.cwd()]:[]),_toConsumableArray((opt.path||process.env.PATH||/* istanbul ignore next: very unusual */'').split(colon)));var pathExtExe=isWindows?opt.pathExt||process.env.PATHEXT||'.EXE;.CMD;.BAT;.COM':'';var pathExt=isWindows?pathExtExe.split(colon):[''];if(isWindows){if(cmd.indexOf('.')!==-1&&pathExt[0]!=='')pathExt.unshift('');}return{pathEnv:pathEnv,pathExt:pathExt,pathExtExe:pathExtExe};};var which=function which(cmd,opt,cb){if(typeof opt==='function'){cb=opt;opt={};}if(!opt)opt={};var _getPathInfo=getPathInfo(cmd,opt),pathEnv=_getPathInfo.pathEnv,pathExt=_getPathInfo.pathExt,pathExtExe=_getPathInfo.pathExtExe;var found=[];var step=function step(i){return new Promise(function(resolve,reject){if(i===pathEnv.length)return opt.all&&found.length?resolve(found):reject(getNotFoundError(cmd));var ppRaw=pathEnv[i];var pathPart=/^".*"$/.test(ppRaw)?ppRaw.slice(1,-1):ppRaw;var pCmd=path__default["default"].join(pathPart,cmd);var p=!pathPart&&/^\.[\\\/]/.test(cmd)?cmd.slice(0,2)+pCmd:pCmd;resolve(subStep(p,i,0));});};var subStep=function subStep(p,i,ii){return new Promise(function(resolve,reject){if(ii===pathExt.length)return resolve(step(i+1));var ext=pathExt[ii];isexe_1(p+ext,{pathExt:pathExtExe},function(er,is){if(!er&&is){if(opt.all)found.push(p+ext);else return resolve(p+ext);}return resolve(subStep(p,i,ii+1));});});};return cb?step(0).then(function(res){return cb(null,res);},cb):step(0);};var whichSync=function whichSync(cmd,opt){opt=opt||{};var _getPathInfo2=getPathInfo(cmd,opt),pathEnv=_getPathInfo2.pathEnv,pathExt=_getPathInfo2.pathExt,pathExtExe=_getPathInfo2.pathExtExe;var found=[];for(var i=0;i<pathEnv.length;i++){var ppRaw=pathEnv[i];var pathPart=/^".*"$/.test(ppRaw)?ppRaw.slice(1,-1):ppRaw;var pCmd=path__default["default"].join(pathPart,cmd);var p=!pathPart&&/^\.[\\\/]/.test(cmd)?cmd.slice(0,2)+pCmd:pCmd;for(var j=0;j<pathExt.length;j++){var cur=p+pathExt[j];try{var is=isexe_1.sync(cur,{pathExt:pathExtExe});if(is){if(opt.all)found.push(cur);else return cur;}}catch(ex){}}}if(opt.all&&found.length)return found;if(opt.nothrow)return null;throw getNotFoundError(cmd);};var which_1=which;which.sync=whichSync;var pathKey=function pathKey(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var environment=options.env||process.env;var platform=options.platform||process.platform;if(platform!=='win32'){return'PATH';}return Object.keys(environment).reverse().find(function(key){return key.toUpperCase()==='PATH';})||'Path';};var pathKey_1=pathKey;// TODO: Remove this for the next major release
var default_1$2=pathKey;pathKey_1["default"]=default_1$2;function resolveCommandAttempt(parsed,withoutPathExt){var env=parsed.options.env||process.env;var cwd=process.cwd();var hasCustomCwd=parsed.options.cwd!=null;// Worker threads do not have process.chdir()
var shouldSwitchCwd=hasCustomCwd&&process.chdir!==undefined&&!process.chdir.disabled;// If a custom `cwd` was specified, we need to change the process cwd
// because `which` will do stat calls but does not support a custom cwd
if(shouldSwitchCwd){try{process.chdir(parsed.options.cwd);}catch(err){/* Empty */}}var resolved;try{resolved=which_1.sync(parsed.command,{path:env[pathKey_1({env:env})],pathExt:withoutPathExt?path__default["default"].delimiter:undefined});}catch(e){/* Empty */}finally{if(shouldSwitchCwd){process.chdir(cwd);}}// If we successfully resolved, ensure that an absolute path is returned
// Note that when a custom `cwd` was used, we need to resolve to an absolute path based on it
if(resolved){resolved=path__default["default"].resolve(hasCustomCwd?parsed.options.cwd:'',resolved);}return resolved;}function resolveCommand(parsed){return resolveCommandAttempt(parsed)||resolveCommandAttempt(parsed,true);}var resolveCommand_1=resolveCommand;// See http://www.robvanderwoude.com/escapechars.php
var metaCharsRegExp=/([()\][%!^"`<>&|;, *?])/g;function escapeCommand(arg){// Escape meta chars
arg=arg.replace(metaCharsRegExp,'^$1');return arg;}function escapeArgument(arg,doubleEscapeMetaChars){// Convert to string
arg="".concat(arg);// Algorithm below is based on https://qntm.org/cmd
// Sequence of backslashes followed by a double quote:
// double up all the backslashes and escape the double quote
arg=arg.replace(/(\\*)"/g,'$1$1\\"');// Sequence of backslashes followed by the end of the string
// (which will become a double quote later):
// double up all the backslashes
arg=arg.replace(/(\\*)$/,'$1$1');// All other backslashes occur literally
// Quote the whole thing:
arg="\"".concat(arg,"\"");// Escape meta chars
arg=arg.replace(metaCharsRegExp,'^$1');// Double escape meta chars if necessary
if(doubleEscapeMetaChars){arg=arg.replace(metaCharsRegExp,'^$1');}return arg;}var command$2=escapeCommand;var argument=escapeArgument;var _escape={command:command$2,argument:argument};var shebangRegex=/^#!(.*)/;var shebangCommand=function shebangCommand(){var string=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var match=string.match(shebangRegex);if(!match){return null;}var _match$0$replace$spli=match[0].replace(/#! ?/,'').split(' '),_match$0$replace$spli2=_slicedToArray(_match$0$replace$spli,2),path=_match$0$replace$spli2[0],argument=_match$0$replace$spli2[1];var binary=path.split('/').pop();if(binary==='env'){return argument;}return argument?"".concat(binary," ").concat(argument):binary;};function readShebang(command){// Read the first 150 bytes from the file
var size=150;var buffer=Buffer.alloc(size);var fd;try{fd=fs__default["default"].openSync(command,'r');fs__default["default"].readSync(fd,buffer,0,size,0);fs__default["default"].closeSync(fd);}catch(e){/* Empty */}// Attempt to extract shebang (null is returned if not a shebang)
return shebangCommand(buffer.toString());}var readShebang_1=readShebang;var isWin$1=process.platform==='win32';var isExecutableRegExp=/\.(?:com|exe)$/i;var isCmdShimRegExp=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function detectShebang(parsed){parsed.file=resolveCommand_1(parsed);var shebang=parsed.file&&readShebang_1(parsed.file);if(shebang){parsed.args.unshift(parsed.file);parsed.command=shebang;return resolveCommand_1(parsed);}return parsed.file;}function parseNonShell(parsed){if(!isWin$1){return parsed;}// Detect & add support for shebangs
var commandFile=detectShebang(parsed);// We don't need a shell if the command filename is an executable
var needsShell=!isExecutableRegExp.test(commandFile);// If a shell is required, use cmd.exe and take care of escaping everything correctly
// Note that `forceShell` is an hidden option used only in tests
if(parsed.options.forceShell||needsShell){// Need to double escape meta chars if the command is a cmd-shim located in `node_modules/.bin/`
// The cmd-shim simply calls execute the package bin file with NodeJS, proxying any argument
// Because the escape of metachars with ^ gets interpreted when the cmd.exe is first called,
// we need to double escape them
var needsDoubleEscapeMetaChars=isCmdShimRegExp.test(commandFile);// Normalize posix paths into OS compatible paths (e.g.: foo/bar -> foo\bar)
// This is necessary otherwise it will always fail with ENOENT in those cases
parsed.command=path__default["default"].normalize(parsed.command);// Escape command & arguments
parsed.command=_escape.command(parsed.command);parsed.args=parsed.args.map(function(arg){return _escape.argument(arg,needsDoubleEscapeMetaChars);});var shellCommand=[parsed.command].concat(parsed.args).join(' ');parsed.args=['/d','/s','/c',"\"".concat(shellCommand,"\"")];parsed.command=process.env.comspec||'cmd.exe';parsed.options.windowsVerbatimArguments=true;// Tell node's spawn that the arguments are already escaped
}return parsed;}function parse(command,args,options){// Normalize arguments, similar to nodejs
if(args&&!Array.isArray(args)){options=args;args=null;}args=args?args.slice(0):[];// Clone array to avoid changing the original
options=Object.assign({},options);// Clone object to avoid changing the original
// Build our parsed object
var parsed={command:command,args:args,options:options,file:undefined,original:{command:command,args:args}};// Delegate further parsing to shell or non-shell
return options.shell?parsed:parseNonShell(parsed);}var parse_1=parse;var isWin=process.platform==='win32';function notFoundError(original,syscall){return Object.assign(new Error("".concat(syscall," ").concat(original.command," ENOENT")),{code:'ENOENT',errno:'ENOENT',syscall:"".concat(syscall," ").concat(original.command),path:original.command,spawnargs:original.args});}function hookChildProcess(cp,parsed){if(!isWin){return;}var originalEmit=cp.emit;cp.emit=function(name,arg1){// If emitting "exit" event and exit code is 1, we need to check if
// the command exists and emit an "error" instead
// See https://github.com/IndigoUnited/node-cross-spawn/issues/16
if(name==='exit'){var err=verifyENOENT(arg1,parsed);if(err){return originalEmit.call(cp,'error',err);}}return originalEmit.apply(cp,arguments);// eslint-disable-line prefer-rest-params
};}function verifyENOENT(status,parsed){if(isWin&&status===1&&!parsed.file){return notFoundError(parsed.original,'spawn');}return null;}function verifyENOENTSync(status,parsed){if(isWin&&status===1&&!parsed.file){return notFoundError(parsed.original,'spawnSync');}return null;}var enoent={hookChildProcess:hookChildProcess,verifyENOENT:verifyENOENT,verifyENOENTSync:verifyENOENTSync,notFoundError:notFoundError};enoent.hookChildProcess;enoent.verifyENOENT;enoent.verifyENOENTSync;enoent.notFoundError;function spawn(command,args,options){// Parse the arguments
var parsed=parse_1(command,args,options);// Spawn the child process
var spawned=child_process__default["default"].spawn(parsed.command,parsed.args,parsed.options);// Hook into child process "exit" event to emit an error if the command
// does not exists, see: https://github.com/IndigoUnited/node-cross-spawn/issues/16
enoent.hookChildProcess(spawned,parsed);return spawned;}function spawnSync(command,args,options){// Parse the arguments
var parsed=parse_1(command,args,options);// Spawn the child process
var result=child_process__default["default"].spawnSync(parsed.command,parsed.args,parsed.options);// Analyze if the command does not exist, see: https://github.com/IndigoUnited/node-cross-spawn/issues/16
result.error=result.error||enoent.verifyENOENTSync(result.status,parsed);return result;}var crossSpawn=spawn;var spawn_1=spawn;var sync$1=spawnSync;var _parse=parse_1;var _enoent=enoent;crossSpawn.spawn=spawn_1;crossSpawn.sync=sync$1;crossSpawn._parse=_parse;crossSpawn._enoent=_enoent;var stripFinalNewline=function stripFinalNewline(input){var LF=typeof input==='string'?'\n':'\n'.charCodeAt();var CR=typeof input==='string'?'\r':'\r'.charCodeAt();if(input[input.length-1]===LF){input=input.slice(0,input.length-1);}if(input[input.length-1]===CR){input=input.slice(0,input.length-1);}return input;};var npmRunPath_1=createCommonjsModule(function(module){var npmRunPath=function npmRunPath(options){options=_objectSpread({cwd:process.cwd(),path:process.env[pathKey_1()],execPath:process.execPath},options);var previous;var cwdPath=path__default["default"].resolve(options.cwd);var result=[];while(previous!==cwdPath){result.push(path__default["default"].join(cwdPath,'node_modules/.bin'));previous=cwdPath;cwdPath=path__default["default"].resolve(cwdPath,'..');}// Ensure the running `node` binary is used
var execPathDir=path__default["default"].resolve(options.cwd,options.execPath,'..');result.push(execPathDir);return result.concat(options.path).join(path__default["default"].delimiter);};module.exports=npmRunPath;// TODO: Remove this for the next major release
module.exports["default"]=npmRunPath;module.exports.env=function(options){options=_objectSpread({env:process.env},options);var env=_objectSpread({},options.env);var path=pathKey_1({env:env});options.path=env[path];env[path]=module.exports(options);return env;};});npmRunPath_1.env;var mimicFn=function mimicFn(to,from){var _iterator14=_createForOfIteratorHelper(Reflect.ownKeys(from)),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var prop=_step14.value;Object.defineProperty(to,prop,Object.getOwnPropertyDescriptor(from,prop));}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}return to;};var mimicFn_1=mimicFn;// TODO: Remove this for the next major release
var default_1$1=mimicFn;mimicFn_1["default"]=default_1$1;var calledFunctions=new WeakMap();var onetime=function onetime(function_){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(typeof function_!=='function'){throw new TypeError('Expected a function');}var returnValue;var callCount=0;var functionName=function_.displayName||function_.name||'<anonymous>';var onetime=function onetime(){calledFunctions.set(onetime,++callCount);if(callCount===1){for(var _len7=arguments.length,arguments_=new Array(_len7),_key7=0;_key7<_len7;_key7++){arguments_[_key7]=arguments[_key7];}returnValue=function_.apply(this,arguments_);function_=null;}else if(options["throw"]===true){throw new Error("Function `".concat(functionName,"` can only be called once"));}return returnValue;};mimicFn_1(onetime,function_);calledFunctions.set(onetime,callCount);return onetime;};var onetime_1=onetime;// TODO: Remove this for the next major release
var default_1=onetime;var callCount=function callCount(function_){if(!calledFunctions.has(function_)){throw new Error("The given function `".concat(function_.name,"` is not wrapped by the `onetime` package"));}return calledFunctions.get(function_);};onetime_1["default"]=default_1;onetime_1.callCount=callCount;var core=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.SIGNALS=void 0;var SIGNALS=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:true},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:true},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:true},{name:"SIGTSTP",number:20,action:"pause",description:"Paused using CTRL-Z or \"suspend\"",standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];exports.SIGNALS=SIGNALS;});unwrapExports(core);core.SIGNALS;var realtime=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.SIGRTMAX=exports.getRealtimeSignals=void 0;var getRealtimeSignals=function getRealtimeSignals(){var length=SIGRTMAX-SIGRTMIN+1;return Array.from({length:length},getRealtimeSignal);};exports.getRealtimeSignals=getRealtimeSignals;var getRealtimeSignal=function getRealtimeSignal(value,index){return{name:"SIGRT".concat(index+1),number:SIGRTMIN+index,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"};};var SIGRTMIN=34;var SIGRTMAX=64;exports.SIGRTMAX=SIGRTMAX;});unwrapExports(realtime);realtime.SIGRTMAX;realtime.getRealtimeSignals;var signals=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getSignals=void 0;var getSignals=function getSignals(){var realtimeSignals=(0,realtime.getRealtimeSignals)();var signals=[].concat(_toConsumableArray(core.SIGNALS),_toConsumableArray(realtimeSignals)).map(normalizeSignal);return signals;};exports.getSignals=getSignals;var normalizeSignal=function normalizeSignal(_ref5){var name=_ref5.name,defaultNumber=_ref5.number,description=_ref5.description,action=_ref5.action,_ref5$forced=_ref5.forced,forced=_ref5$forced===void 0?false:_ref5$forced,standard=_ref5.standard;var constantSignal=os__default["default"].constants.signals[name];var supported=constantSignal!==undefined;var number=supported?constantSignal:defaultNumber;return{name:name,number:number,description:description,supported:supported,action:action,forced:forced,standard:standard};};});unwrapExports(signals);signals.getSignals;var main=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.signalsByNumber=exports.signalsByName=void 0;var getSignalsByName=function getSignalsByName(){var signals$1=(0,signals.getSignals)();return signals$1.reduce(getSignalByName,{});};var getSignalByName=function getSignalByName(signalByNameMemo,_ref6){var name=_ref6.name,number=_ref6.number,description=_ref6.description,supported=_ref6.supported,action=_ref6.action,forced=_ref6.forced,standard=_ref6.standard;return _objectSpread(_objectSpread({},signalByNameMemo),{},_defineProperty({},name,{name:name,number:number,description:description,supported:supported,action:action,forced:forced,standard:standard}));};var signalsByName=getSignalsByName();exports.signalsByName=signalsByName;var getSignalsByNumber=function getSignalsByNumber(){var signals$1=(0,signals.getSignals)();var length=realtime.SIGRTMAX+1;var signalsA=Array.from({length:length},function(value,number){return getSignalByNumber(number,signals$1);});return Object.assign.apply(Object,[{}].concat(_toConsumableArray(signalsA)));};var getSignalByNumber=function getSignalByNumber(number,signals){var signal=findSignalByNumber(number,signals);if(signal===undefined){return{};}var name=signal.name,description=signal.description,supported=signal.supported,action=signal.action,forced=signal.forced,standard=signal.standard;return _defineProperty({},number,{name:name,number:number,description:description,supported:supported,action:action,forced:forced,standard:standard});};var findSignalByNumber=function findSignalByNumber(number,signals){var signal=signals.find(function(_ref8){var name=_ref8.name;return os__default["default"].constants.signals[name]===number;});if(signal!==undefined){return signal;}return signals.find(function(signalA){return signalA.number===number;});};var signalsByNumber=getSignalsByNumber();exports.signalsByNumber=signalsByNumber;});unwrapExports(main);main.signalsByNumber;main.signalsByName;var signalsByName=main.signalsByName;var getErrorPrefix=function getErrorPrefix(_ref9){var timedOut=_ref9.timedOut,timeout=_ref9.timeout,errorCode=_ref9.errorCode,signal=_ref9.signal,signalDescription=_ref9.signalDescription,exitCode=_ref9.exitCode,isCanceled=_ref9.isCanceled;if(timedOut){return"timed out after ".concat(timeout," milliseconds");}if(isCanceled){return'was canceled';}if(errorCode!==undefined){return"failed with ".concat(errorCode);}if(signal!==undefined){return"was killed with ".concat(signal," (").concat(signalDescription,")");}if(exitCode!==undefined){return"failed with exit code ".concat(exitCode);}return'failed';};var makeError=function makeError(_ref10){var stdout=_ref10.stdout,stderr=_ref10.stderr,all=_ref10.all,error=_ref10.error,signal=_ref10.signal,exitCode=_ref10.exitCode,command=_ref10.command,escapedCommand=_ref10.escapedCommand,timedOut=_ref10.timedOut,isCanceled=_ref10.isCanceled,killed=_ref10.killed,timeout=_ref10.parsed.options.timeout;// `signal` and `exitCode` emitted on `spawned.on('exit')` event can be `null`.
// We normalize them to `undefined`
exitCode=exitCode===null?undefined:exitCode;signal=signal===null?undefined:signal;var signalDescription=signal===undefined?undefined:signalsByName[signal].description;var errorCode=error&&error.code;var prefix=getErrorPrefix({timedOut:timedOut,timeout:timeout,errorCode:errorCode,signal:signal,signalDescription:signalDescription,exitCode:exitCode,isCanceled:isCanceled});var execaMessage="Command ".concat(prefix,": ").concat(command);var isError=Object.prototype.toString.call(error)==='[object Error]';var shortMessage=isError?"".concat(execaMessage,"\n").concat(error.message):execaMessage;var message=[shortMessage,stderr,stdout].filter(Boolean).join('\n');if(isError){error.originalMessage=error.message;error.message=message;}else{error=new Error(message);}error.shortMessage=shortMessage;error.command=command;error.escapedCommand=escapedCommand;error.exitCode=exitCode;error.signal=signal;error.signalDescription=signalDescription;error.stdout=stdout;error.stderr=stderr;if(all!==undefined){error.all=all;}if('bufferedData'in error){delete error.bufferedData;}error.failed=true;error.timedOut=Boolean(timedOut);error.isCanceled=isCanceled;error.killed=killed&&!timedOut;return error;};var error=makeError;var aliases=['stdin','stdout','stderr'];var hasAlias=function hasAlias(options){return aliases.some(function(alias){return options[alias]!==undefined;});};var normalizeStdio=function normalizeStdio(options){if(!options){return;}var stdio=options.stdio;if(stdio===undefined){return aliases.map(function(alias){return options[alias];});}if(hasAlias(options)){throw new Error("It's not possible to provide `stdio` in combination with one of ".concat(aliases.map(function(alias){return"`".concat(alias,"`");}).join(', ')));}if(typeof stdio==='string'){return stdio;}if(!Array.isArray(stdio)){throw new TypeError("Expected `stdio` to be of type `string` or `Array`, got `".concat(_typeof(stdio),"`"));}var length=Math.max(stdio.length,aliases.length);return Array.from({length:length},function(value,index){return stdio[index];});};var stdio=normalizeStdio;// `ipc` is pushed unless it is already present
var node$1=function node$1(options){var stdio=normalizeStdio(options);if(stdio==='ipc'){return'ipc';}if(stdio===undefined||typeof stdio==='string'){return[stdio,stdio,stdio,'ipc'];}if(stdio.includes('ipc')){return stdio;}return[].concat(_toConsumableArray(stdio),['ipc']);};stdio.node=node$1;var DEFAULT_FORCE_KILL_TIMEOUT=1000*5;// Monkey-patches `childProcess.kill()` to add `forceKillAfterTimeout` behavior
var spawnedKill$1=function spawnedKill$1(kill){var signal=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'SIGTERM';var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var killResult=kill(signal);setKillTimeout(kill,signal,options,killResult);return killResult;};var setKillTimeout=function setKillTimeout(kill,signal,options,killResult){if(!shouldForceKill(signal,options,killResult)){return;}var timeout=getForceKillAfterTimeout(options);var t=setTimeout(function(){kill('SIGKILL');},timeout);// Guarded because there's no `.unref()` when `execa` is used in the renderer
// process in Electron. This cannot be tested since we don't run tests in
// Electron.
// istanbul ignore else
if(t.unref){t.unref();}};var shouldForceKill=function shouldForceKill(signal,_ref11,killResult){var forceKillAfterTimeout=_ref11.forceKillAfterTimeout;return isSigterm(signal)&&forceKillAfterTimeout!==false&&killResult;};var isSigterm=function isSigterm(signal){return signal===os__default["default"].constants.signals.SIGTERM||typeof signal==='string'&&signal.toUpperCase()==='SIGTERM';};var getForceKillAfterTimeout=function getForceKillAfterTimeout(_ref12){var _ref12$forceKillAfter=_ref12.forceKillAfterTimeout,forceKillAfterTimeout=_ref12$forceKillAfter===void 0?true:_ref12$forceKillAfter;if(forceKillAfterTimeout===true){return DEFAULT_FORCE_KILL_TIMEOUT;}if(!Number.isFinite(forceKillAfterTimeout)||forceKillAfterTimeout<0){throw new TypeError("Expected the `forceKillAfterTimeout` option to be a non-negative integer, got `".concat(forceKillAfterTimeout,"` (").concat(_typeof(forceKillAfterTimeout),")"));}return forceKillAfterTimeout;};// `childProcess.cancel()`
var spawnedCancel$1=function spawnedCancel$1(spawned,context){var killResult=spawned.kill();if(killResult){context.isCanceled=true;}};var timeoutKill=function timeoutKill(spawned,signal,reject){spawned.kill(signal);reject(Object.assign(new Error('Timed out'),{timedOut:true,signal:signal}));};// `timeout` option handling
var setupTimeout$1=function setupTimeout$1(spawned,_ref13,spawnedPromise){var timeout=_ref13.timeout,_ref13$killSignal=_ref13.killSignal,killSignal=_ref13$killSignal===void 0?'SIGTERM':_ref13$killSignal;if(timeout===0||timeout===undefined){return spawnedPromise;}var timeoutId;var timeoutPromise=new Promise(function(resolve,reject){timeoutId=setTimeout(function(){timeoutKill(spawned,killSignal,reject);},timeout);});var safeSpawnedPromise=spawnedPromise["finally"](function(){clearTimeout(timeoutId);});return Promise.race([timeoutPromise,safeSpawnedPromise]);};var validateTimeout$1=function validateTimeout$1(_ref14){var timeout=_ref14.timeout;if(timeout!==undefined&&(!Number.isFinite(timeout)||timeout<0)){throw new TypeError("Expected the `timeout` option to be a non-negative integer, got `".concat(timeout,"` (").concat(_typeof(timeout),")"));}};// `cleanup` option handling
var setExitHandler$1=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee6(spawned,_ref15,timedPromise){var cleanup,detached,removeExitHandler;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:cleanup=_ref15.cleanup,detached=_ref15.detached;if(!(!cleanup||detached)){_context6.next=3;break;}return _context6.abrupt("return",timedPromise);case 3:removeExitHandler=signalExit(function(){spawned.kill();});return _context6.abrupt("return",timedPromise["finally"](function(){removeExitHandler();}));case 5:case"end":return _context6.stop();}}},_callee6);}));return function setExitHandler$1(_x4,_x5,_x6){return _ref16.apply(this,arguments);};}();var kill={spawnedKill:spawnedKill$1,spawnedCancel:spawnedCancel$1,setupTimeout:setupTimeout$1,validateTimeout:validateTimeout$1,setExitHandler:setExitHandler$1};var isStream=function isStream(stream){return stream!==null&&_typeof(stream)==='object'&&typeof stream.pipe==='function';};isStream.writable=function(stream){return isStream(stream)&&stream.writable!==false&&typeof stream._write==='function'&&_typeof(stream._writableState)==='object';};isStream.readable=function(stream){return isStream(stream)&&stream.readable!==false&&typeof stream._read==='function'&&_typeof(stream._readableState)==='object';};isStream.duplex=function(stream){return isStream.writable(stream)&&isStream.readable(stream);};isStream.transform=function(stream){return isStream.duplex(stream)&&typeof stream._transform==='function';};var isStream_1=isStream;var PassThroughStream=stream__default["default"].PassThrough;var bufferStream=function bufferStream(options){options=_objectSpread({},options);var _options2=options,array=_options2.array;var _options3=options,encoding=_options3.encoding;var isBuffer=encoding==='buffer';var objectMode=false;if(array){objectMode=!(encoding||isBuffer);}else{encoding=encoding||'utf8';}if(isBuffer){encoding=null;}var stream=new PassThroughStream({objectMode:objectMode});if(encoding){stream.setEncoding(encoding);}var length=0;var chunks=[];stream.on('data',function(chunk){chunks.push(chunk);if(objectMode){length=chunks.length;}else{length+=chunk.length;}});stream.getBufferedValue=function(){if(array){return chunks;}return isBuffer?Buffer.concat(chunks,length):chunks.join('');};stream.getBufferedLength=function(){return length;};return stream;};var BufferConstants=buffer__default["default"].constants;var promisify=util__default["default"].promisify;var streamPipelinePromisified=promisify(stream__default["default"].pipeline);var MaxBufferError=/*#__PURE__*/function(_Error2){_inherits(MaxBufferError,_Error2);var _super7=_createSuper(MaxBufferError);function MaxBufferError(){var _this17;_classCallCheck(this,MaxBufferError);_this17=_super7.call(this,'maxBuffer exceeded');_this17.name='MaxBufferError';return _this17;}return MaxBufferError;}(/*#__PURE__*/_wrapNativeSuper(Error));function getStream(_x7,_x8){return _getStream.apply(this,arguments);}function _getStream(){_getStream=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee13(inputStream,options){var _options5,maxBuffer,stream;return regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:if(inputStream){_context13.next=2;break;}throw new Error('Expected a stream');case 2:options=_objectSpread({maxBuffer:Infinity},options);_options5=options,maxBuffer=_options5.maxBuffer;stream=bufferStream(options);_context13.next=7;return new Promise(function(resolve,reject){var rejectPromise=function rejectPromise(error){// Don't retrieve an oversized buffer.
if(error&&stream.getBufferedLength()<=BufferConstants.MAX_LENGTH){error.bufferedData=stream.getBufferedValue();}reject(error);};_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee12(){return regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;_context12.next=3;return streamPipelinePromisified(inputStream,stream);case 3:resolve();_context12.next=9;break;case 6:_context12.prev=6;_context12.t0=_context12["catch"](0);rejectPromise(_context12.t0);case 9:case"end":return _context12.stop();}}},_callee12,null,[[0,6]]);}))();stream.on('data',function(){if(stream.getBufferedLength()>maxBuffer){rejectPromise(new MaxBufferError());}});});case 7:return _context13.abrupt("return",stream.getBufferedValue());case 8:case"end":return _context13.stop();}}},_callee13);}));return _getStream.apply(this,arguments);}var getStream_1=getStream;var buffer=function buffer(stream,options){return getStream(stream,_objectSpread(_objectSpread({},options),{},{encoding:'buffer'}));};var array=function array(stream,options){return getStream(stream,_objectSpread(_objectSpread({},options),{},{array:true}));};var MaxBufferError_1=MaxBufferError;getStream_1.buffer=buffer;getStream_1.array=array;getStream_1.MaxBufferError=MaxBufferError_1;var PassThrough=stream__default["default"].PassThrough;var mergeStream=function mergeStream(){var sources=[];var output=new PassThrough({objectMode:true});output.setMaxListeners(0);output.add=add;output.isEmpty=isEmpty;output.on('unpipe',remove);Array.prototype.slice.call(arguments).forEach(add);return output;function add(source){if(Array.isArray(source)){source.forEach(add);return this;}sources.push(source);source.once('end',remove.bind(null,source));source.once('error',output.emit.bind(output,'error'));source.pipe(output,{end:false});return this;}function isEmpty(){return sources.length==0;}function remove(source){sources=sources.filter(function(it){return it!==source;});if(!sources.length&&output.readable){output.end();}}};// `input` option
var handleInput$1=function handleInput$1(spawned,input){// Checking for stdin is workaround for https://github.com/nodejs/node/issues/26852
// @todo remove `|| spawned.stdin === undefined` once we drop support for Node.js <=12.2.0
if(input===undefined||spawned.stdin===undefined){return;}if(isStream_1(input)){input.pipe(spawned.stdin);}else{spawned.stdin.end(input);}};// `all` interleaves `stdout` and `stderr`
var makeAllStream$1=function makeAllStream$1(spawned,_ref17){var all=_ref17.all;if(!all||!spawned.stdout&&!spawned.stderr){return;}var mixed=mergeStream();if(spawned.stdout){mixed.add(spawned.stdout);}if(spawned.stderr){mixed.add(spawned.stderr);}return mixed;};// On failure, `result.stdout|stderr|all` should contain the currently buffered stream
var getBufferedData=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee7(stream,streamPromise){return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(stream){_context7.next=2;break;}return _context7.abrupt("return");case 2:stream.destroy();_context7.prev=3;_context7.next=6;return streamPromise;case 6:return _context7.abrupt("return",_context7.sent);case 9:_context7.prev=9;_context7.t0=_context7["catch"](3);return _context7.abrupt("return",_context7.t0.bufferedData);case 12:case"end":return _context7.stop();}}},_callee7,null,[[3,9]]);}));return function getBufferedData(_x9,_x10){return _ref18.apply(this,arguments);};}();var getStreamPromise=function getStreamPromise(stream,_ref19){var encoding=_ref19.encoding,buffer=_ref19.buffer,maxBuffer=_ref19.maxBuffer;if(!stream||!buffer){return;}if(encoding){return getStream_1(stream,{encoding:encoding,maxBuffer:maxBuffer});}return getStream_1.buffer(stream,{maxBuffer:maxBuffer});};// Retrieve result of child process: exit code, signal, error, streams (stdout/stderr/all)
var getSpawnedResult$1=/*#__PURE__*/function(){var _ref22=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee8(_ref20,_ref21,processDone){var stdout,stderr,all,encoding,buffer,maxBuffer,stdoutPromise,stderrPromise,allPromise;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:stdout=_ref20.stdout,stderr=_ref20.stderr,all=_ref20.all;encoding=_ref21.encoding,buffer=_ref21.buffer,maxBuffer=_ref21.maxBuffer;stdoutPromise=getStreamPromise(stdout,{encoding:encoding,buffer:buffer,maxBuffer:maxBuffer});stderrPromise=getStreamPromise(stderr,{encoding:encoding,buffer:buffer,maxBuffer:maxBuffer});allPromise=getStreamPromise(all,{encoding:encoding,buffer:buffer,maxBuffer:maxBuffer*2});_context8.prev=5;_context8.next=8;return Promise.all([processDone,stdoutPromise,stderrPromise,allPromise]);case 8:return _context8.abrupt("return",_context8.sent);case 11:_context8.prev=11;_context8.t0=_context8["catch"](5);return _context8.abrupt("return",Promise.all([{error:_context8.t0,signal:_context8.t0.signal,timedOut:_context8.t0.timedOut},getBufferedData(stdout,stdoutPromise),getBufferedData(stderr,stderrPromise),getBufferedData(all,allPromise)]));case 14:case"end":return _context8.stop();}}},_callee8,null,[[5,11]]);}));return function getSpawnedResult$1(_x11,_x12,_x13){return _ref22.apply(this,arguments);};}();var validateInputSync$1=function validateInputSync$1(_ref23){var input=_ref23.input;if(isStream_1(input)){throw new TypeError('The `input` option cannot be a stream in sync mode');}};var stream={handleInput:handleInput$1,makeAllStream:makeAllStream$1,getSpawnedResult:getSpawnedResult$1,validateInputSync:validateInputSync$1};var nativePromisePrototype=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee9(){return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:case"end":return _context9.stop();}}},_callee9);}))().constructor.prototype;var descriptors=['then','catch','finally'].map(function(property){return[property,Reflect.getOwnPropertyDescriptor(nativePromisePrototype,property)];});// The return value is a mixin of `childProcess` and `Promise`
var mergePromise$1=function mergePromise$1(spawned,promise){var _iterator15=_createForOfIteratorHelper(descriptors),_step15;try{var _loop5=function _loop5(){var _step15$value=_slicedToArray(_step15.value,2),property=_step15$value[0],descriptor=_step15$value[1];// Starting the main `promise` is deferred to avoid consuming streams
var value=typeof promise==='function'?function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++){args[_key8]=arguments[_key8];}return Reflect.apply(descriptor.value,promise(),args);}:descriptor.value.bind(promise);Reflect.defineProperty(spawned,property,_objectSpread(_objectSpread({},descriptor),{},{value:value}));};for(_iterator15.s();!(_step15=_iterator15.n()).done;){_loop5();}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}return spawned;};// Use promises instead of `child_process` events
var getSpawnedPromise$1=function getSpawnedPromise$1(spawned){return new Promise(function(resolve,reject){spawned.on('exit',function(exitCode,signal){resolve({exitCode:exitCode,signal:signal});});spawned.on('error',function(error){reject(error);});if(spawned.stdin){spawned.stdin.on('error',function(error){reject(error);});}});};var promise={mergePromise:mergePromise$1,getSpawnedPromise:getSpawnedPromise$1};var normalizeArgs=function normalizeArgs(file){var args=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(!Array.isArray(args)){return[file];}return[file].concat(_toConsumableArray(args));};var NO_ESCAPE_REGEXP=/^[\w.-]+$/;var DOUBLE_QUOTES_REGEXP=/"/g;var escapeArg=function escapeArg(arg){if(typeof arg!=='string'||NO_ESCAPE_REGEXP.test(arg)){return arg;}return"\"".concat(arg.replace(DOUBLE_QUOTES_REGEXP,'\\"'),"\"");};var joinCommand$1=function joinCommand$1(file,args){return normalizeArgs(file,args).join(' ');};var getEscapedCommand$1=function getEscapedCommand$1(file,args){return normalizeArgs(file,args).map(function(arg){return escapeArg(arg);}).join(' ');};var SPACES_REGEXP=/ +/g;// Handle `execa.command()`
var parseCommand$1=function parseCommand$1(command){var tokens=[];var _iterator16=_createForOfIteratorHelper(command.trim().split(SPACES_REGEXP)),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var token=_step16.value;// Allow spaces to be escaped by a backslash if not meant as a delimiter
var previousToken=tokens[tokens.length-1];if(previousToken&&previousToken.endsWith('\\')){// Merge previous token with current one
tokens[tokens.length-1]="".concat(previousToken.slice(0,-1)," ").concat(token);}else{tokens.push(token);}}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}return tokens;};var command$1={joinCommand:joinCommand$1,getEscapedCommand:getEscapedCommand$1,parseCommand:parseCommand$1};var spawnedKill=kill.spawnedKill,spawnedCancel=kill.spawnedCancel,setupTimeout=kill.setupTimeout,validateTimeout=kill.validateTimeout,setExitHandler=kill.setExitHandler;var handleInput=stream.handleInput,getSpawnedResult=stream.getSpawnedResult,makeAllStream=stream.makeAllStream,validateInputSync=stream.validateInputSync;var mergePromise=promise.mergePromise,getSpawnedPromise=promise.getSpawnedPromise;var joinCommand=command$1.joinCommand,parseCommand=command$1.parseCommand,getEscapedCommand=command$1.getEscapedCommand;var DEFAULT_MAX_BUFFER=1000*1000*100;var getEnv=function getEnv(_ref25){var envOption=_ref25.env,extendEnv=_ref25.extendEnv,preferLocal=_ref25.preferLocal,localDir=_ref25.localDir,execPath=_ref25.execPath;var env=extendEnv?_objectSpread(_objectSpread({},process.env),envOption):envOption;if(preferLocal){return npmRunPath_1.env({env:env,cwd:localDir,execPath:execPath});}return env;};var handleArguments=function handleArguments(file,args){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var parsed=crossSpawn._parse(file,args,options);file=parsed.command;args=parsed.args;options=parsed.options;options=_objectSpread({maxBuffer:DEFAULT_MAX_BUFFER,buffer:true,stripFinalNewline:true,extendEnv:true,preferLocal:false,localDir:options.cwd||process.cwd(),execPath:process.execPath,encoding:'utf8',reject:true,cleanup:true,all:false,windowsHide:true},options);options.env=getEnv(options);options.stdio=stdio(options);if(process.platform==='win32'&&path__default["default"].basename(file,'.exe')==='cmd'){// #116
args.unshift('/q');}return{file:file,args:args,options:options,parsed:parsed};};var handleOutput=function handleOutput(options,value,error){if(typeof value!=='string'&&!Buffer.isBuffer(value)){// When `execa.sync()` errors, we normalize it to '' to mimic `execa()`
return error===undefined?undefined:'';}if(options.stripFinalNewline){return stripFinalNewline(value);}return value;};var execa=function execa(file,args,options){var parsed=handleArguments(file,args,options);var command=joinCommand(file,args);var escapedCommand=getEscapedCommand(file,args);validateTimeout(parsed.options);var spawned;try{spawned=child_process__default["default"].spawn(parsed.file,parsed.args,parsed.options);}catch(error$1){// Ensure the returned error is always both a promise and a child process
var dummySpawned=new child_process__default["default"].ChildProcess();var errorPromise=Promise.reject(error({error:error$1,stdout:'',stderr:'',all:'',command:command,escapedCommand:escapedCommand,parsed:parsed,timedOut:false,isCanceled:false,killed:false}));return mergePromise(dummySpawned,errorPromise);}var spawnedPromise=getSpawnedPromise(spawned);var timedPromise=setupTimeout(spawned,parsed.options,spawnedPromise);var processDone=setExitHandler(spawned,parsed.options,timedPromise);var context={isCanceled:false};spawned.kill=spawnedKill.bind(null,spawned.kill.bind(spawned));spawned.cancel=spawnedCancel.bind(null,spawned,context);var handlePromise=/*#__PURE__*/function(){var _ref26=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee10(){var _yield$getSpawnedResu,_yield$getSpawnedResu2,_yield$getSpawnedResu3,error$1,exitCode,signal,timedOut,stdoutResult,stderrResult,allResult,stdout,stderr,all,returnedError;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return getSpawnedResult(spawned,parsed.options,processDone);case 2:_yield$getSpawnedResu=_context10.sent;_yield$getSpawnedResu2=_slicedToArray(_yield$getSpawnedResu,4);_yield$getSpawnedResu3=_yield$getSpawnedResu2[0];error$1=_yield$getSpawnedResu3.error;exitCode=_yield$getSpawnedResu3.exitCode;signal=_yield$getSpawnedResu3.signal;timedOut=_yield$getSpawnedResu3.timedOut;stdoutResult=_yield$getSpawnedResu2[1];stderrResult=_yield$getSpawnedResu2[2];allResult=_yield$getSpawnedResu2[3];stdout=handleOutput(parsed.options,stdoutResult);stderr=handleOutput(parsed.options,stderrResult);all=handleOutput(parsed.options,allResult);if(!(error$1||exitCode!==0||signal!==null)){_context10.next=20;break;}returnedError=error({error:error$1,exitCode:exitCode,signal:signal,stdout:stdout,stderr:stderr,all:all,command:command,escapedCommand:escapedCommand,parsed:parsed,timedOut:timedOut,isCanceled:context.isCanceled,killed:spawned.killed});if(parsed.options.reject){_context10.next=19;break;}return _context10.abrupt("return",returnedError);case 19:throw returnedError;case 20:return _context10.abrupt("return",{command:command,escapedCommand:escapedCommand,exitCode:0,stdout:stdout,stderr:stderr,all:all,failed:false,timedOut:false,isCanceled:false,killed:false});case 21:case"end":return _context10.stop();}}},_callee10);}));return function handlePromise(){return _ref26.apply(this,arguments);};}();var handlePromiseOnce=onetime_1(handlePromise);handleInput(spawned,parsed.options.input);spawned.all=makeAllStream(spawned,parsed.options);return mergePromise(spawned,handlePromiseOnce);};var execa_1=execa;var sync=function sync(file,args,options){var parsed=handleArguments(file,args,options);var command=joinCommand(file,args);var escapedCommand=getEscapedCommand(file,args);validateInputSync(parsed.options);var result;try{result=child_process__default["default"].spawnSync(parsed.file,parsed.args,parsed.options);}catch(error$1){throw error({error:error$1,stdout:'',stderr:'',all:'',command:command,escapedCommand:escapedCommand,parsed:parsed,timedOut:false,isCanceled:false,killed:false});}var stdout=handleOutput(parsed.options,result.stdout,result.error);var stderr=handleOutput(parsed.options,result.stderr,result.error);if(result.error||result.status!==0||result.signal!==null){var error$1=error({stdout:stdout,stderr:stderr,error:result.error,signal:result.signal,exitCode:result.status,command:command,escapedCommand:escapedCommand,parsed:parsed,timedOut:result.error&&result.error.code==='ETIMEDOUT',isCanceled:false,killed:result.signal!==null});if(!parsed.options.reject){return error$1;}throw error$1;}return{command:command,escapedCommand:escapedCommand,exitCode:0,stdout:stdout,stderr:stderr,failed:false,timedOut:false,isCanceled:false,killed:false};};var command=function command(_command,options){var _parseCommand=parseCommand(_command),_parseCommand2=_toArray(_parseCommand),file=_parseCommand2[0],args=_parseCommand2.slice(1);return execa(file,args,options);};var commandSync=function commandSync(command,options){var _parseCommand3=parseCommand(command),_parseCommand4=_toArray(_parseCommand3),file=_parseCommand4[0],args=_parseCommand4.slice(1);return execa.sync(file,args,options);};var node=function node(scriptPath,args){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(args&&!Array.isArray(args)&&_typeof(args)==='object'){options=args;args=[];}var stdio$1=stdio.node(options);var defaultExecArgv=process.execArgv.filter(function(arg){return!arg.startsWith('--inspect');});var _options4=options,_options4$nodePath=_options4.nodePath,nodePath=_options4$nodePath===void 0?process.execPath:_options4$nodePath,_options4$nodeOptions=_options4.nodeOptions,nodeOptions=_options4$nodeOptions===void 0?defaultExecArgv:_options4$nodeOptions;return execa(nodePath,[].concat(_toConsumableArray(nodeOptions),[scriptPath],_toConsumableArray(Array.isArray(args)?args:[])),_objectSpread(_objectSpread({},options),{},{stdin:undefined,stdout:undefined,stderr:undefined,stdio:stdio$1,shell:false}));};execa_1.sync=sync;execa_1.command=command;execa_1.commandSync=commandSync;execa_1.node=node;var installDemo=/*#__PURE__*/function(){var _ref27=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee11(){var subprocessRes;return regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;_context11.next=3;return execa_1.command('yarn install  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -d');case 3:subprocessRes=_context11.sent;console.log(subprocessRes);_context11.next=10;break;case 7:_context11.prev=7;_context11.t0=_context11["catch"](0);console.error(_context11.t0);case 10:case"end":return _context11.stop();}}},_callee11,null,[[0,7]]);}));return function installDemo(){return _ref27.apply(this,arguments);};}();var runs=[{title:'task: install-demo',task:installDemo}];logx.info('============= 开始运行 =============');var tasks=new listr(runs,{concurrent:3});tasks.run().then(function(subprocessRes){console.log(subprocessRes);})["catch"](function(err){return console.error(err);});
